(function(e){function t(t){for(var o,a,l=t[0],u=t[1],d=t[2],p=t[3]||[],h=0,f=[];h<l.length;h++)a=l[h],s[a]&&f.push(s[a][0]),s[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);m&&m(t),p.forEach(function(e){if(void 0===s[e]){s[e]=null;var t=document.createElement("link");c.nc&&t.setAttribute("nonce",c.nc),t.rel="prefetch",t.as="script",t.href=i(e),document.head.appendChild(t)}});while(f.length)f.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var i=n[a];0!==s[i]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},s={app:0},r=[];function i(e){return c.p+"js/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"."+{about:"01578d5d",login:"9e3b9170",viewer:"51bac827"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={about:1,login:1,viewer:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var o="css/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"."+{about:"1bc686aa",login:"0b97524b",viewer:"867b098e"}[e]+".css",s=c.p+o,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var l=r[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===s))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===o||u===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var o=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete a[e],m.parentNode.removeChild(m),n(r)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)}).then(function(){a[e]=0}));var o=s[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise(function(t,n){o=s[e]=[t,n]});t.push(o[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e),l=function(t){u.onerror=u.onload=null,clearTimeout(d);var n=s[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,r=new Error("Loading chunk "+e+" failed.\n("+o+": "+a+")");r.type=o,r.request=a,n[1](r)}s[e]=void 0}};var d=setTimeout(function(){l({type:"timeout",target:u})},12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var m=u;t([[],{},0,["about","login","viewer"]]),r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"01f1":function(e,t,n){},"0613":function(e,t,n){"use strict";n("ac6a");var o=n("1da1"),a=n("2b0e"),s=n("2f62");class r{constructor(){this.columns=[],this.documents=new Map,this.authType="unknown",this.isOnline=!0,this.displayInstallApp=!1,this.locale="fr"===Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_I18N_LOCALE?"fr":"en"}}var i={getDocumentById:e=>t=>{return e.documents.get(t)},getColumnByIndex:e=>t=>{return e.columns[t]},getDocumentsIdsByColumnId:(e,t)=>(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.getColumnByIndex(e).documentsIds.filter(e=>n||!e.includes("documents-gap"))}),getDocumentsByColumnId:(e,t)=>(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.getDocumentsIdsByColumnId(e,n).map(e=>t.getDocumentById(e))}),isAnonymous(e){return"anonymous"===e.authType},isAuthenticated(e){return"credentials"===e.authType},getPreviousDocumentIdInColById:(e,t)=>(e,n)=>{if(null===e||void 0===n)return!1;const o=t.getDocumentsByColumnId(e,!1),a=o.findIndex(e=>e.uno===n),s=o[a+1];return s&&s.uno||!1},getNextDocumentIdInColById:(e,t)=>(e,n)=>{if(null===e||void 0===n)return!1;const o=t.getDocumentsByColumnId(e,!1),a=o.findIndex(e=>e.uno===n),s=o[a-1];return s&&s.uno||!1},getFirstDocumentInCol:(e,t)=>e=>{if(null===e)return!1;const n=t.getDocumentsIdsByColumnId(e,!1);return 0!==n.length&&t.getDocumentById(n[0])},getLastDocumentInCol:(e,t)=>e=>{if(null===e)return!1;const n=t.getDocumentsIdsByColumnId(e,!1);return 0!==n.length&&t.getDocumentById(n[n.length-1])}},c=(n("55dd"),n("90a2")),l=n.n(c);const u=new l.a({customAuthUrl:"https://3o3qoiah2e.execute-api.eu-central-1.amazonaws.com/afpdeck",saveToken:e=>{e&&D.commit("setToken",e)}});var d=u,m=n("c64e"),p=n.n(m),h=n("2b28"),f={addColumn(e,t){const n={id:p()(),params:Object.assign({},d.defaultSearchParams,{products:[],size:10}),documentsIds:[],error:!1};t&&t.params&&(t.params=Object.assign(n.params,t.params));const o=Object.assign({},n,t);e.columns.find(e=>e.id===o.id)||e.columns.push(o)},moveColumn(e,t){let n=t.indexCol,o=t.dir;const a=e.columns.map(e=>e.id),s="left"===o?n-1:n+1,r=a[n];a.splice(n,1),a.splice(s,0,r),e.columns.sort((e,t)=>a.indexOf(e.id)-a.indexOf(t.id))},closeColumn(e,t){let n=t.indexCol;e.columns=e.columns.filter((e,t)=>t!==n)},resetColumn(e,t){let n=t.indexCol;e.columns[n].documentsIds=[]},updateColumnParams(e,t){let n=t.indexCol,o=t.params;e.columns[n].params=o},setToken(e,t){e.authType=t.authType},unsetToken(e){e.authType="unknown"},setError(e,t){let n=t.indexCol,o=t.value;if(!e.columns[n])return!1;e.columns[n].error=o},addDocuments(e,t){t.forEach(t=>{try{const o=new h["a"](t).toObject();e.documents.set(o.uno,o)}catch(n){a["default"].toasted.global.error(n)}})},clearDocuments(e){e.columns.forEach(e=>{e.documentsIds=[]}),e.documents.clear()},prependDocumentsIdsToCol(e,t){let n=t.indexCol,o=t.documentsIds;if(!e.columns[n])return!1;const a=e.columns[n].documentsIds;e.columns[n].documentsIds=[...new Set(o.concat(a))]},appendDocumentsIdsToCol(e,t){let n=t.indexCol,o=t.documentsIds;if(!e.columns[n])return!1;const a=e.columns[n].documentsIds;e.columns[n].documentsIds=[...new Set(a.concat(o))]},setConnectivityStatus(e,t){e.isOnline=t},setLocale(e,t){e.locale=t},resetState(e){Object.assign(e,new r)},displayInstallApp(e,t){e.displayInstallApp=t}},g=n("be94"),v=(n("386d"),n("fe0b")),b=n("70cb");const y={changeLocale(e,t){return Object(o["a"])(function*(){let n=e.commit;yield Object(v["b"])(t),Object(b["a"])(t),n("setLocale",t)})()},logout(e){let t=e.commit,n=e.dispatch;return t("unsetToken"),t("clearDocuments"),n("refreshAllColumns")},authenticate(e){var t=arguments;return Object(o["a"])(function*(){let n=e.commit,o=e.dispatch,s=t.length>1&&void 0!==t[1]?t[1]:{},r=s.username,i=s.password;try{yield d.authenticate({username:r,password:i}),n("clearDocuments"),o("refreshAllColumns",{more:"before"})}catch(c){return a["default"].toasted.global.error(c),Promise.reject(c)}})()},searchDocuments(e,t){return Object(o["a"])(function*(){let n=e.commit,o=e.dispatch;try{o("wait/start","documents.search",{root:!0});const e=yield d.search(t),r=e.documents;return r?(n("addDocuments",r),r.map(e=>new h["a"](e).toObject())):[]}catch(s){return s.response&&401===s.response.status&&(yield o("logout")),a["default"].toasted.global.error(s),[]}finally{o("wait/end","documents.search",{root:!0})}})()},refreshColumn(e,t){return Object(o["a"])(function*(){let n=e.state,o=e.commit,s=e.dispatch,r=e.getters,i=e.rootGetters,c=t.indexCol,l=t.more;if(!i["wait/is"](`column.refreshing.${n.columns[c].id}`))try{let e=Object(g["a"])({},r.getColumnByIndex(c).params);try{if(r.getColumnByIndex(c).documentsIds.length>0)switch(l){case"before":const t=r.getLastDocumentInCol(c);if(!t)throw new Error(`No last document in col ${c}`);{const n=new Date(t.published);n.setSeconds(n.getSeconds()-1),e=Object.assign(e,{dateTo:n.toISOString()})}break;case"after":const n=r.getFirstDocumentInCol(c);if(!n)throw new Error(`No first document in col ${c}`);{const t=new Date(n.published);t.setSeconds(t.getSeconds()+1),e=Object.assign(e,{dateFrom:t.toISOString()})}break;default:}}catch(u){return console.error(u),o("resetColumn",{indexCol:c}),s("refreshColumn",{indexCol:c,more:l})}s("wait/start",`column.refreshing.${n.columns[c].id}`,{root:!0});const t=yield d.search(e),i=t.documents,m=t.count;if(!i||0===i.length)return!1;o("addDocuments",i);const p=i.map(e=>e.uno);switch(l){case"before":o("appendDocumentsIdsToCol",{indexCol:c,documentsIds:p});break;case"after":m>i.length&&p.push(`documents-gap|${+new Date}|${m-i.length}`),o("prependDocumentsIdsToCol",{indexCol:c,documentsIds:p});break;default:}return n.columns[c].error&&o("setError",{indexCol:c,value:!1}),!0}catch(u){return void(u.request?console.error(u.request):u.response&&401===u.response.status?yield s("logout"):a["default"].toasted.global.error(u))}finally{s("wait/end",`column.refreshing.${n.columns[c].id}`,{root:!0})}})()},refreshAllColumns(e){var t=arguments;return Object(o["a"])(function*(){let n=e.state,o=e.dispatch,a=t.length>1&&void 0!==t[1]?t[1]:{},s=a.more,r=void 0===s?"after":s;yield Promise.all(n.columns.map((e,t)=>o("refreshColumn",{indexCol:t,more:r})))})()},getDocument(e,t){return Object(o["a"])(function*(){let n=e.commit;try{const e=yield d.get(t),s=e.document;n("addDocuments",[s])}catch(o){return a["default"].toasted.global.error(o),Promise.reject(o)}})()}};var C=y,w=n("3835"),I=n("a002"),A=n.n(I);const k={columns:"afpnews-deck-columns",token:"afpnews-deck-token",client:"afpnews-deck-client",clientId:"afpnews-deck-client-id",clientSecret:"afpnews-deck-client-secret",autoRefresh:"afpnews-deck-auto-refresh",locale:"afpnews-deck-locale"},x=A.a.createInstance({name:"userStore"}),O=A.a.createInstance({name:"documentsStore"}),S=function(){var e=Object(o["a"])(function*(e){yield Promise.all([k.token].map(e=>x.getItem(e))).then(t=>{let n=Object(w["a"])(t,1),o=n[0];o&&(d.token=o,e.commit("setToken",o))})});return function(t){return e.apply(this,arguments)}}(),T=e=>{e.subscribe((e,t)=>{let n=e.type,o=e.payload;switch(n){case"setToken":"credentials"===o.authType?x.setItem(k.token,o):x.removeItem(k.token);break;case"unsetToken":d.resetToken(),x.removeItem(k.token);break;default:}})},_=function(){var e=Object(o["a"])(function*(e){yield Promise.all([k.locale,k.columns].map(e=>x.getItem(e))).then(t=>{let n=Object(w["a"])(t,2),o=n[0],a=n[1];null!==o&&e.dispatch("changeLocale",o),Array.isArray(a)&&a.length>0?a.forEach(t=>e.commit("addColumn",t)):e.commit("addColumn")});const t=[];yield O.iterate((e,n,o)=>{t.push(e)}),t.length>0&&e.commit("addDocuments",t)});return function(t){return e.apply(this,arguments)}}(),j=e=>{e.subscribe(function(){var t=Object(o["a"])(function*(t,n){let o=t.type,a=t.payload;switch(o){case"setLocale":x.setItem(k.locale,a);break;case"addColumn":case"moveColumn":case"updateColumnParams":case"appendDocumentsIdsToCol":case"prependDocumentsIdsToCol":x.setItem(k.columns,n.columns);break;case"closeColumn":case"resetColumn":const t=[];t.concat.apply([],n.columns.map(e=>e.documentsIds));const s=yield O.keys();s.filter(e=>!t.includes(e)).forEach(e=>O.removeItem(e)),x.setItem(k.columns,n.columns);break;case"resetState":x.clear(),O.clear(),e.commit("addColumn");break;case"clearDocuments":O.clear(),x.setItem(k.columns,n.columns);break;case"addDocuments":Promise.all(a.map(e=>O.setItem(e.uno,e)));break;default:}});return function(e,n){return t.apply(this,arguments)}}())},P=e=>{e.subscribe(function(){var e=Object(o["a"])(function*(e,t){let n=e.type;switch(n){case"addColumn":yield a["default"].nextTick();const e=document.querySelector(".column:last-of-type");e&&e.scrollIntoView({behavior:"smooth",block:"center"});break;default:}});return function(t,n){return e.apply(this,arguments)}}())};n.d(t,"b",function(){return E}),a["default"].use(s["b"]);const $=new s["a"]({state:new r,getters:i,mutations:f,actions:C,modules:{},plugins:[T,j,P],strict:!1});var D=t["a"]=$;const E=function(){var e=Object(o["a"])(function*(){yield Promise.all([S($),_($)])});return function(){return e.apply(this,arguments)}}()},"0b22":function(e,t,n){"use strict";var o=n("bf8d"),a=n.n(o);a.a},"0e66":function(e,t,n){"use strict";var o=n("e094"),a=n.n(o);a.a},"13a5":function(e,t,n){"use strict";var o=n("1472"),a=n.n(o);a.a},1472:function(e,t,n){},"19cc":function(e,t,n){},"1f7d":function(e,t,n){},"2b28":function(e,t,n){"use strict";n.d(t,"a",function(){return a});n("55dd");function o(e){if(void 0===e)return;const t=new Date(e);return t instanceof Date&&!isNaN(t.valueOf())?t:void 0}class a{constructor(e){this.docSource=e}get headline(){const e=this.docSource.headline||this.docSource.title||this.docSource.news;return Array.isArray(e)?e.join(" - "):e}get embargoed(){return o(this.docSource.embargoed)}get published(){const e=o(this.docSource.published);if(!e)throw new Error(`Doc ${this.docSource.uno} doesn't contain a valid published date`);return e}get medias(){const e=this.docSource.bagItem;if(!e)return[];const t=this.docSource.entity_faces;let n;const o=e[0].medias.find(e=>"HighDef"===e.role);if(t&&t[0]&&o){const e=t[0].faces[0].offsetY;n=e/o.height}return e.map(e=>{return{sizes:e.medias.sort((e,t)=>e.width-t.width),creator:e.creator,provider:e.provider,caption:e.caption,source:e.source,uno:e.uno,faceYOffsetPercent:n}})}toObject(){return{uno:this.docSource.uno,headline:this.headline,published:this.published,embargoed:this.embargoed,lang:this.docSource.lang,product:this.docSource.product,urgency:this.docSource.urgency,news:this.docSource.news,slugs:this.docSource.slug,medias:this.medias,iptc:this.docSource.iptc,source:this.docSource.source,creator:this.docSource.creator,provider:this.docSource.provider,city:this.docSource.city,country:this.docSource.country,advisory:this.docSource.advisory,status:this.docSource.status,summary:this.docSource.summary}}}},"2e98":function(e,t,n){},"39c3":function(e,t,n){var o={"./en.json":["edd4"],"./fr.json":["f693"]};function a(e){var t=o[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n.t(e,3)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}a.keys=function(){return Object.keys(o)},a.id="39c3",e.exports=a},"449d":function(e,t,n){},5185:function(e,t,n){"use strict";var o=n("19cc"),a=n.n(o);a.a},"70cb":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n("2b0e"),a=n("5a0c"),s=n.n(a),r=n("4208"),i=n.n(r);n("e5b7");s.a.extend(i.a);const c={install(e){e.filter("fromNow",e=>{return s()(e).from(s()())})}};function l(e){s.a.locale(e)}o["default"].use(c)},"87fb":function(e,t,n){"use strict";var o=n("2e98"),a=n.n(o);a.a},aa90:function(e,t){(function(t){var n="Modernizr"in t,o=t.Modernizr;!function(e,t,n){function o(e,t){return typeof e===t}function a(e){var t=x.className,n=A._config.classPrefix||"";if(O&&(t=t.baseVal),A._config.enableJSClass){var o=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(o,"$1"+n+"js$2")}A._config.enableClasses&&(e.length>0&&(t+=" "+n+e.join(" "+n)),O?x.className.baseVal=t:x.className=t)}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):O?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function r(e,t){return!!~(""+e).indexOf(t)}function i(){var e=t.body;return e||(e=s(O?"svg":"body"),e.fake=!0),e}function c(e,n,o,a){var r,c,l,u,d="modernizr",m=s("div"),p=i();if(parseInt(o,10))for(;o--;)l=s("div"),l.id=a?a[o]:d+(o+1),m.appendChild(l);return r=s("style"),r.type="text/css",r.id="s"+d,(p.fake?p:m).appendChild(r),p.appendChild(m),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(t.createTextNode(e)),m.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",u=x.style.overflow,x.style.overflow="hidden",x.appendChild(p)),c=n(m,e),p.fake?(p.parentNode.removeChild(p),x.style.overflow=u,x.offsetHeight):m.parentNode.removeChild(m),!!c}function l(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function u(t,n,o){var a;if("getComputedStyle"in e){a=getComputedStyle.call(e,t,n);var s=e.console;if(null!==a)o&&(a=a.getPropertyValue(o));else if(s){var r=s.error?"error":"log";s[r].call(s,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else a=!n&&t.currentStyle&&t.currentStyle[o];return a}function d(t,o){var a=t.length;if("CSS"in e&&"supports"in e.CSS){for(;a--;)if(e.CSS.supports(l(t[a]),o))return!0;return!1}if("CSSSupportsRule"in e){for(var s=[];a--;)s.push("("+l(t[a])+":"+o+")");return s=s.join(" or "),c("@supports ("+s+") { #modernizr { position: absolute; } }",function(e){return"absolute"===u(e,null,"position")})}return n}function m(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function p(e,t,a,i){function c(){u&&(delete j.style,delete j.modElem)}if(i=!o(i,"undefined")&&i,!o(a,"undefined")){var l=d(e,a);if(!o(l,"undefined"))return l}for(var u,p,h,f,g,v=["modernizr","tspan","samp"];!j.style&&v.length;)u=!0,j.modElem=s(v.shift()),j.style=j.modElem.style;for(h=e.length,p=0;p<h;p++)if(f=e[p],g=j.style[f],r(f,"-")&&(f=m(f)),j.style[f]!==n){if(i||o(a,"undefined"))return c(),"pfx"!==t||f;try{j.style[f]=a}catch(e){}if(j.style[f]!==g)return c(),"pfx"!==t||f}return c(),!1}function h(e,t){return function(){return e.apply(t,arguments)}}function f(e,t,n){var a;for(var s in e)if(e[s]in t)return!1===n?e[s]:(a=t[e[s]],o(a,"function")?h(a,n||t):a);return!1}function g(e,t,n,a,s){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+T.join(r+" ")+r).split(" ");return o(t,"string")||o(t,"undefined")?p(i,t,a,s):(i=(e+" "+P.join(r+" ")+r).split(" "),f(i,t,n))}function v(e,t,o){return g(e,n,n,t,o)}function b(e,t){return e-1===t||e===t||e+1===t}function y(e,t){if("object"==typeof e)for(var n in e)L(e,n)&&y(n,e[n]);else{e=e.toLowerCase();var o=e.split("."),s=A[o[0]];if(2===o.length&&(s=s[o[1]]),void 0!==s)return A;t="function"==typeof t?t():t,1===o.length?A[o[0]]=t:(!A[o[0]]||A[o[0]]instanceof Boolean||(A[o[0]]=new Boolean(A[o[0]])),A[o[0]][o[1]]=t),a([(t&&!1!==t?"":"no-")+o.join("-")]),A._trigger(e,t)}return A}function C(e,t){var n=e.deleteDatabase(t);n.onsuccess=function(){y("indexeddb.deletedatabase",!0)},n.onerror=function(){y("indexeddb.deletedatabase",!1)}}var w=[],I={_version:"3.7.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){w.push({name:e,fn:t,options:n})},addAsyncTest:function(e){w.push({name:null,fn:e})}},A=function(){};A.prototype=I,A=new A;var k=[],x=t.documentElement,O="svg"===x.nodeName.toLowerCase();A.addTest("bgpositionshorthand",function(){var e=s("a"),t=e.style,n="right 10px bottom 10px";return t.cssText="background-position: "+n+";",t.backgroundPosition===n});var S="Moz O ms Webkit",T=I._config.usePrefixes?S.split(" "):[];I._cssomPrefixes=T;var _={elem:s("modernizr")};A._q.push(function(){delete _.elem});var j={style:_.elem.style};A._q.unshift(function(){delete j.style});var P=I._config.usePrefixes?S.toLowerCase().split(" "):[];I._domPrefixes=P,I.testAllProps=g,I.testAllProps=v,A.addTest("bgpositionxy",function(){return v("backgroundPositionX","3px",!0)&&v("backgroundPositionY","5px",!0)}),A.addTest("bgrepeatround",v("backgroundRepeat","round")),A.addTest("bgrepeatspace",v("backgroundRepeat","space")),A.addTest("backgroundsize",v("backgroundSize","100%",!0)),A.addTest("bgsizecover",v("backgroundSize","cover")),A.addTest("borderradius",v("borderRadius","0px",!0)),A.addTest("boxshadow",v("boxShadow","1px 1px",!0)),A.addTest("boxsizing",v("boxSizing","border-box",!0)&&(t.documentMode===n||t.documentMode>7)),A.addTest("flexbox",v("flexBasis","1px",!0));var $=I.testStyles=c;!function(){var e=navigator.userAgent,t=e.match(/w(eb)?osbrowser/gi),n=e.match(/windows phone/gi)&&e.match(/iemobile\/([0-9])+/gi)&&parseFloat(RegExp.$1)>=9;return t||n}()?$('@font-face {font-family:"font";src:url("https://")}',function(e,n){var o=t.getElementById("smodernizr"),a=o.sheet||o.styleSheet,s=a?a.cssRules&&a.cssRules[0]?a.cssRules[0].cssText:a.cssText||"":"",r=/src/i.test(s)&&0===s.indexOf(n.split(" ")[0]);A.addTest("fontface",r)}):A.addTest("fontface",!1);var D=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var n=t(e);return n&&n.matches||!1}:function(t){var n=!1;return c("@media "+t+" { #modernizr { position: absolute; } }",function(t){n="absolute"===(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position}),n}}();I.mq=D,A.addTest("mediaqueries",D("only all"));var E=I._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];I._prefixes=E,A.addTest("opacity",function(){var e=s("a").style;return e.cssText=E.join("opacity:.55;"),/^0.55$/.test(e.opacity)}),A.addTest("csspointerevents",function(){var e=s("a").style;return e.cssText="pointer-events:auto","auto"===e.pointerEvents}),A.addTest("rgba",function(){var e=s("a").style;return e.cssText="background-color:rgba(150,255,150,.5)",(""+e.backgroundColor).indexOf("rgba")>-1});var z=I.testProp=function(e,t,o){return p([e],n,t,o)};A.addTest("textshadow",z("textShadow","1px 1px")),A.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&v("transform","scale(1)",!0)});var L,B="CSS"in e&&"supports"in e.CSS,N="supportsCSS"in e;A.addTest("supports",B||N),A.addTest("csstransforms3d",function(){return!!v("perspective","1px",!0)}),A.addTest("csstransitions",v("transition","all",!0)),$("#modernizr { width: 50vw; }",function(t){var n=parseInt(e.innerWidth/2,10),o=parseInt(u(t,null,"width"),10);A.addTest("cssvwunit",b(o,n))}),A.addTest("willchange","willChange"in x.style),function(){var e={}.hasOwnProperty;L=o(e,"undefined")||o(e.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),I._l={},I.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),A.hasOwnProperty(e)&&setTimeout(function(){A._trigger(e,A[e])},0)},I._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)},0),delete this._l[e]}},A._q.push(function(){I.addTest=y}),A.addAsyncTest(function(){var e,t,n,o=s("img"),a="sizes"in o;!a&&"srcset"in o?(t="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=function(){y("sizes",2===o.width)},o.onload=n,o.onerror=n,o.setAttribute("sizes","9px"),o.srcset=e+" 1w,"+t+" 8w",o.src=e):y("sizes",a)}),A.addTest("srcset","srcset"in s("img"));var M=function(t){var o,a=E.length,s=e.CSSRule;if(void 0===s)return n;if(!t)return!1;if(t=t.replace(/^@/,""),(o=t.replace(/-/g,"_").toUpperCase()+"_RULE")in s)return"@"+t;for(var r=0;r<a;r++){var i=E[r];if(i.toUpperCase()+"_"+o in s)return"@-"+i.toLowerCase()+"-"+t}return!1};I.atRule=M;var U=I.prefixed=function(e,t,n){return 0===e.indexOf("@")?M(e):(-1!==e.indexOf("-")&&(e=m(e)),t?g(e,t,n):g(e,"pfx"))};A.addAsyncTest(function(){var t;try{t=U("indexedDB",e)}catch(e){}if(t){var n,o="modernizr-"+Math.random();try{n=t.open(o)}catch(e){return void y("indexeddb",!1)}n.onerror=function(e){!n.error||"InvalidStateError"!==n.error.name&&"UnknownError"!==n.error.name?(y("indexeddb",!0),C(t,o)):(y("indexeddb",!1),e.preventDefault())},n.onsuccess=function(){y("indexeddb",!0),C(t,o)}}else y("indexeddb",!1)}),A.addTest("pagevisibility",!!U("hidden",t,!1)),A.addTest("serviceworker","serviceWorker"in navigator),A.addTest("localstorage",function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}),function(){var e,t,n,a,s,r,i;for(var c in w)if(w.hasOwnProperty(c)){if(e=[],t=w[c],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(a=o(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)r=e[s],i=r.split("."),1===i.length?A[i[0]]=a:(!A[i[0]]||A[i[0]]instanceof Boolean||(A[i[0]]=new Boolean(A[i[0]])),A[i[0]][i[1]]=a),k.push((a?"":"no-")+i.join("-"))}}(),a(k),delete I.addTest,delete I.addAsyncTest;for(var q=0;q<A._q.length;q++)A._q[q]();e.Modernizr=A}(t,document),e.exports=t.Modernizr,n?t.Modernizr=o:delete t.Modernizr})(window)},ae8d:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.doc?n("router-link",{staticClass:"article",class:{flash:1===e.doc.urgency,alerte:"photo"!==e.doc.product&&2===e.doc.urgency,urgent:"photo"!==e.doc.product&&3===e.doc.urgency,photo:"photo"===e.doc.product,canceled:"Canceled"===e.doc.status},attrs:{lang:e.doc.lang,dir:"ar"===e.doc.lang?"rtl":"ltr",to:{name:"document",params:{indexCol:e.indexCol,docId:e.docId}}}},[e.doc.medias.length>0&&e.doc.medias[0].sizes.some(function(e){return"Preview"===e.role})?n("div",{staticClass:"img-container",style:{backgroundImage:"url("+e.doc.medias[0].sizes.find(function(e){return"Preview"===e.role}).href+")",backgroundPosition:e.doc.medias[0].faceYOffsetPercent?"0px "+100*e.doc.medias[0].faceYOffsetPercent+"%":null}},[["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product)?n("i",{staticClass:"UI-icon UI-play-video"}):e._e()]):e._e(),n("div",{staticClass:"cols"},[e.doc.embargoed&&e.doc.embargoed>new Date?n("p",{key:"date-"+e.locale,staticClass:"date embargo"},[e._v("\n      Embargo : "+e._s(e._f("fromNow")(e.doc.embargoed))+"\n    ")]):n("p",{key:"date-"+e.locale,staticClass:"date"},[e._v("\n      "+e._s(e._f("fromNow")(e.doc.published))+"\n    ")]),"photo"===e.doc.product&&1===e.doc.urgency?n("p",{staticClass:"topshot"},[e._v("\n      Topshot\n    ")]):e._e()]),"photo"!==e.doc.product?n("h2",[e._v("\n    "+e._s(e.doc.headline)+"\n  ")]):e._e(),["news","multimedia"].includes(e.doc.product)&&e.doc.urgency>2&&e.doc.news&&e.doc.news[0]&&"Usable"===e.doc.status?n("p",{staticClass:"lead"},[e._v("\n    "+e._s(e.doc.news[0].substr(0,100)+"...")+"\n  ")]):e._e()]):e._e()},a=[],s=n("be94"),r=n("2f62"),i={name:"Card",props:{docId:{type:String,required:!0},indexCol:{type:Number,required:!1,default:null}},computed:Object(s["a"])({},Object(r["f"])(["locale"]),Object(r["d"])(["getDocumentById"]),{doc(){return this.getDocumentById(this.docId)}})},c=i,l=(n("0b22"),n("2877")),u=Object(l["a"])(c,o,a,!1,null,"813b6e64",null);t["a"]=u.exports},b814:function(e,t,n){"use strict";var o=n("0613"),a=n("0284");let s;window.addEventListener("beforeinstallprompt",e=>{s=e,o["a"].commit("displayInstallApp",!0),s.userChoice.then(e=>{let t=e.outcome;"accepted"===t&&o["a"].commit("displayInstallApp",!1),Object(a["event"])("pwa","installation",t)})}),window.addEventListener("appinstalled",e=>{Object(a["event"])("pwa","installation","installed")}),t["a"]=(()=>{s.prompt()})},bf8d:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("a481");var o=n("1da1"),a=n("2b0e"),s=(n("4f1b"),n("0a89")),r=n.n(s);a["default"].use(r.a);var i=n("a65d"),c=n.n(i);a["default"].use(c.a),a["default"].toasted.register("error",e=>{return console.error(e),e.message?`Oops.. ${e.message}`:"Oops.. Something Went Wrong.."},{type:"error",position:"bottom-center",duration:1500}),a["default"].toasted.register("warn",e=>{return console.warn(e),`Oops.. ${e}`},{type:"error",position:"bottom-center",duration:1500});var l=n("0284"),u=n.n(l),d=(n("28a5"),n("6b54"),n("8c4f")),m=n("0613"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("transition-group",{attrs:{id:"columns",name:"list",tag:"div"}},[e._l(e.columns,function(e,t){return n("column",{key:"column-"+e.id,attrs:{"column-id":t}})}),n("add-column",{key:"add-column"})],2),n("side-bar"),n("router-view")],1)},h=[],f=n("be94"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"column"},[n("header",[e.paramsOpen?n("div",{staticClass:"actions"},[n("button",{staticClass:"btn btn-icon",attrs:{name:"move-left","aria-label":"Move column to left"},on:{click:function(t){return e.move("left")}}},[n("i",{staticClass:"UI-icon UI-navigate-left"})]),n("button",{staticClass:"btn btn-icon margin-right-auto",attrs:{name:"move-right","aria-label":"Move column to right"},on:{click:function(t){return e.move("right")}}},[n("i",{staticClass:"UI-icon UI-navigate-right"})]),n("button",{staticClass:"btn btn-icon",attrs:{name:"close-params","aria-label":"Close column params"},on:{click:function(t){e.paramsOpen=!1}}},[n("i",{staticClass:"UI-icon UI-collapse"})])]):e._e(),n("div",{staticClass:"form-group inpt-icon"},[n("input",{ref:"search",staticClass:"search inpt inpt-large",attrs:{placeholder:e.$t("column.search"),"aria-label":e.$t("column.search"),type:!0===e.paramsOpen?"search":"text",autocomplete:"off",name:"query"},on:{change:e.onQueryChange,focus:e.onQueryFocus}}),!1===e.paramsOpen?n("button",{staticClass:"btn btn-icon",attrs:{name:"expand","aria-label":"Open column params"},on:{click:e.openParams}},[n("i",{staticClass:"UI-icon UI-expand icon-small"})]):e._e()]),n("transition-group",{staticClass:"form",attrs:{name:"curtain",tabindex:"-1",tag:"div"}},[e.paramsOpen?n("select",{directives:[{name:"model",rawName:"v-model",value:e.product,expression:"product"}],key:"product",staticClass:"slct slct-large",attrs:{name:"product","aria-label":"Select a product"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.product=t.target.multiple?n:n[0]}}},e._l(e.products,function(t){var o=t.label,a=t.value,s=t.disabled;return n("option",{key:a.join("|"),attrs:{disabled:s},domProps:{value:a}},[e._v("\n          "+e._s(o)+"\n        ")])}),0):e._e(),e.paramsOpen?n("select",{directives:[{name:"show",rawName:"v-show",value:e.languages.length>1,expression:"languages.length > 1"},{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],key:"lang",staticClass:"slct slct-large",attrs:{name:"lang","aria-label":"Select a language"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.lang=t.target.multiple?n:n[0]}}},e._l(e.languages,function(t){var o=t.label,a=t.value,s=t.disabled;return n("option",{key:a.join("|"),attrs:{disabled:s},domProps:{value:a}},[e._v("\n          "+e._s(o)+"\n        ")])}),0):e._e(),e.paramsOpen?n("select",{directives:[{name:"show",rawName:"v-show",value:e.urgencies.length>1,expression:"urgencies.length > 1"},{name:"model",rawName:"v-model",value:e.urgency,expression:"urgency"}],key:"urgency",staticClass:"slct slct-large",attrs:{name:"urgency","aria-label":"Select an urgency"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.urgency=t.target.multiple?n:n[0]}}},e._l(e.urgencies,function(t){var o=t.label,a=t.value,s=t.disabled;return n("option",{key:a.join("|"),attrs:{disabled:s},domProps:{value:a}},[e._v("\n          "+e._s(o)+"\n        ")])}),0):e._e(),e.paramsOpen?n("input",{directives:[{name:"model",rawName:"v-model",value:e.dateTo,expression:"dateTo"}],key:"datepicker",staticClass:"inpt inpt-large",attrs:{placeholder:e.$t("column.until"),type:"date","aria-label":"Select a date",name:"date-picker"},domProps:{value:e.dateTo},on:{input:function(t){t.target.composing||(e.dateTo=t.target.value)}}}):e._e(),e.paramsOpen?n("button",{key:"close",staticClass:"btn btn-large danger",attrs:{name:"close","aria-label":"Delete the column"},on:{click:e.close}},[e._v("\n        "+e._s(e.$t("column.delete"))+"\n      ")]):e._e()])],1),n("recyclist",{ref:"recyclist",staticClass:"documents",attrs:{list:e.documents,size:10,offset:200,"is-loading":e.$wait.is("column.refreshing."+e.column.id),"no-more":e.noMore},on:{"load-top":e.loadAfter,"load-bottom":e.loadBefore},scopedSlots:e._u([{key:"tombstone",fn:function(){return[n("content-placeholders",{staticClass:"tombstone",attrs:{animated:!0,rounded:!0,centered:!1}},[n("content-placeholders-heading",{attrs:{img:!1}}),n("content-placeholders-img"),n("content-placeholders-text",{attrs:{lines:2}})],1)]},proxy:!0},{key:"item",fn:function(t){var o=t.data;return[o.includes("documents-gap")?n("div",{staticClass:"documents-gap"},[n("p",[e._v("\n          "+e._s(e.$t("column.documents-gap",{count:parseInt(o.split("|")[2])}))+"\n          "),n("router-link",{attrs:{to:"/"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v("\n            "+e._s(e.$t("column.refresh"))+"\n          ")])],1)]):n("card",{attrs:{"doc-id":o,"index-col":e.columnId}})]}},{key:"nomore",fn:function(){return[n("span",[e._v(e._s(e.$t("column.no-result")))])]},proxy:!0}])})],1)},v=[],b=(n("386d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-recyclist"},[n("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:e.height+"px"}},[e._l(e.visibleItems,function(t,o){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.height>0,expression:"height > 0"}],key:o,staticClass:"vue-recyclist-item",style:{transform:"translate3d(0,"+t.top+"px,0)"}},[t.data?e._t("item",null,{data:t.data}):e._t("tombstone")],2)}),n("div",{staticClass:"vue-recyclist-pool"},[e._l(e.poolItems,function(t,o){return n("div",{key:o,ref:t.data.type||t.data,refInFor:!0,staticClass:"vue-recyclist-item"},[e._t("item",null,{data:t.data})],2)}),0===e.tombHeight?n("div",{ref:"tomb",staticClass:"vue-recyclist-item"},[e._t("tombstone")],2):e._e()],2)],2),!e.isLoading&&e.noMore?n("div",{staticClass:"vue-recyclist-nomore"},[e._t("nomore",[n("div",[e._v("End of list")])])],2):e._e()])}),y=[],C=(n("ac6a"),n("0342")),w=n.n(C);const I=[new w.a("Poppins",{weight:400,style:"normal",stretch:"normal"}),new w.a("Poppins",{weight:600,style:"normal",stretch:"normal"})];var A=()=>Promise.all(I.map(e=>e.load())),k={name:"Recyclist",props:{list:{type:Array,required:!0},size:{type:Number,default:20},offset:{type:Number,default:200},isLoading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1}},data(){return{items:[],height:0,start:0,containerHeight:0,tombHeight:0}},computed:{visibleItems(){return this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},poolItems(){return this.items.filter(e=>e.data&&!1===e.gotHeight)}},watch:{start(e,t){0===e&&t>e&&this.$emit("loadTop")},list(){this.loadList()},noMore(e){!0===e&&(this.items=this.items.filter(e=>e.data),this.updateItemTop())}},mounted(){this.$el.addEventListener("scroll",this.onScroll,{capture:!0,passive:!0}),this.tombHeight=this.$refs.tomb&&this.$refs.tomb.offsetHeight,this.containerHeight=this.$el&&this.$el.offsetHeight||0,this.list.length>0?this.loadList():this.loadMoreItems()},destroyed(){this.$el.removeEventListener("scroll",this.onScroll)},methods:{reset(){var e=this;return Object(o["a"])(function*(){e.items=[],e.height=e.start=e.$el.scrollTop=0,yield e.$nextTick(),e.loadMoreItems()})()},loadList(){var e=this;return Object(o["a"])(function*(){e.items=e.list.map(e.renderItem),yield A(),yield e.$nextTick();for(let t=0;t<e.items.length;t++)e.updateItemHeight(t);e.updateItemTop()})()},loadMoreItems(){var e=this;return Object(o["a"])(function*(){if(e.noMore)return!1;const t=e.items.length+e.size;for(let n=e.items.length;n<t;n++)e.setItem(n,null);e.updateItemTop(),e.$emit("load-bottom")})()},setItem(e,t){this.$set(this.items,e,this.renderItem(t))},renderItem(e){return{data:e,top:0,height:this.tombHeight,gotHeight:!1}},updateItemTop(){this.height=0;for(let e=0;e<this.items.length;e++){const t=this.items[e-1];this.$set(this.items[e],"top",t?t.top+t.height:0),this.height+=this.items[e].height}this.updateIndex()},updateIndex(){const e=this.$el.scrollTop;for(let t=0;t<this.items.length;t++)if(this.items[t].top>e){this.start=Math.max(0,t-1);break}},updateItemHeight(e){const t=this.items[e];if(!t.data)return;const n=this.$refs[t.data&&t.data.type||t.data];n&&n[0]&&(this.$set(this.items[e],"height",n[0].offsetHeight),this.$set(this.items[e],"gotHeight",!0))},onScroll(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.loadMoreItems(),this.updateIndex()}}},x=k,O=(n("87fb"),n("2877")),S=Object(O["a"])(x,b,y,!1,null,"788a3866",null),T=S.exports,_=n("967d"),j=n("ae8d"),P=n("2f62"),$={name:"AutoRefreshTimer",data(){return{autoRefreshTimer:null,autoRefreshDelay:1e4}},mounted(){this.startAutoRefresh()},beforeDestroy(){this.stopAutoRefresh()},methods:{startAutoRefresh(){this.autoRefreshTimer=window.setInterval(()=>{!0!==document.hidden&&!1!==navigator.onLine&&this.refreshColumn({indexCol:this.columnId,more:"after"})},this.autoRefreshDelay)},stopAutoRefresh(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer)}}},D={name:"Column",components:{Card:j["a"],Recyclist:T,ContentPlaceholders:_["ContentPlaceholders"],ContentPlaceholdersHeading:_["ContentPlaceholdersHeading"],ContentPlaceholdersImg:_["ContentPlaceholdersImg"],ContentPlaceholdersText:_["ContentPlaceholdersText"]},mixins:[$],props:{columnId:{type:Number,required:!0}},data(){return{paramsOpen:!1,noMore:!1}},computed:Object(f["a"])({},Object(P["d"])(["getColumnByIndex","getDocumentsIdsByColumnId","isAuthenticated"]),{column(){return this.getColumnByIndex(this.columnId)},documents(){return this.getDocumentsIdsByColumnId(this.columnId)},params(){return this.column.params},product:{get(){return this.params.products},set(e){if(1===e.length){if("photo"===e[0])return this.updateParams({products:e,langs:["en"],urgencies:[]});if("news"===e[0])return this.updateParams({products:e,urgencies:[1,2,3,4]})}this.updateParams({products:e,urgencies:[]})}},lang:{get(){return this.params.langs},set(e){this.updateParams({langs:e})}},products(){return[{label:this.$t("products.all"),value:[],disabled:!this.isAuthenticated},{label:this.$t("products.news"),value:["news"],disabled:!this.isAuthenticated},{label:this.$t("products.multimedia"),value:["multimedia"],disabled:!1},{label:this.$t("products.photo"),value:["photo"],disabled:!this.isAuthenticated},{label:this.$t("products.video"),value:["sidtv","parismode","afptvweb","afptv1st"],disabled:!this.isAuthenticated},{label:this.$t("products.infographie"),value:["infographie"],disabled:!this.isAuthenticated},{label:this.$t("products.videographie"),value:["videographie"],disabled:!this.isAuthenticated}]},languages(){return 1===this.product.length&&"photo"===this.product[0]?[{label:this.$t("languages.en"),value:["en"],disabled:!1}]:[{label:this.$t("languages.all"),value:[],disabled:!1},{label:this.$t("languages.en"),value:["en"],disabled:!1},{label:this.$t("languages.fr"),value:["fr"],disabled:!1},{label:this.$t("languages.de"),value:["de"],disabled:!1},{label:this.$t("languages.es"),value:["es"],disabled:!1},{label:this.$t("languages.pt"),value:["pt"],disabled:!1},{label:this.$t("languages.ar"),value:["ar"],disabled:!1},{label:this.$t("languages.zh-tw"),value:["zh-tw"],disabled:!1},{label:this.$t("languages.zh-cn"),value:["zh-cn"],disabled:!1}]},urgencies(){return"photo"===this.product[0]?[{label:this.$t("urgencies.all-photos"),value:[],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.topshots",2),value:[1],disabled:!this.isAuthenticated}]:"news"===this.product[0]?[{label:this.$tc("urgencies.depeches",2),value:[1,2,3,4],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.flash",2),value:[1],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.alertes",2),value:[1,2],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.urgents",2),value:[1,2,3],disabled:!this.isAuthenticated}]:[{label:this.$t("urgencies.all"),value:[],disabled:!this.isAuthenticated}]},urgency:{get(){return this.params.urgencies},set(e){this.updateParams({urgencies:e})}},query(){return this.params.query},dateTo:{get(){return this.params.dateTo},set(e){this.updateParams({dateTo:e})}}}),mounted(){this.$refs.search.value=this.query},methods:Object(f["a"])({},Object(P["e"])(["updateColumnParams","resetColumn","moveColumn","closeColumn","openColumnSettings","closeColumnSettings"]),Object(P["c"])(["refreshColumn"]),{updateParams(e){const t=Object.assign({},this.params,e);this.updateColumnParams({indexCol:this.columnId,params:t}),this.reset()},reset(){this.noMore=!1,this.resetColumn({indexCol:this.columnId}),this.$refs.recyclist.reset()},loadBefore(){var e=this;return Object(o["a"])(function*(){const t=yield e.refreshColumn({indexCol:e.columnId,more:"before"});!1===t&&(e.noMore=!0)})()},loadAfter(){return this.refreshColumn({indexCol:this.columnId,more:"after"})},move(e){this.moveColumn({indexCol:this.columnId,dir:e})},close(){this.closeColumn({indexCol:this.columnId})},openParams(){var e=this;return Object(o["a"])(function*(){e.paramsOpen=!0,yield e.$nextTick(),e.$refs.search.focus()})()},onQueryChange(e){const t=e.target.value;this.$ga.event("search","set query",t),this.updateParams({query:t})},onQueryFocus(e){e.target.setSelectionRange(e.target.value.length,e.target.value.length)}})},E=D,z=(n("f286"),Object(O["a"])(E,g,v,!1,null,"734d6501",null)),L=z.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn-container"},[n("button",{staticClass:"btn",attrs:{id:"new-column",name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"}),e._v(" "+e._s(e.$t("deck.add-column"))+"\n  ")])])},N=[],M={name:"AddColumn",methods:Object(f["a"])({},Object(P["e"])(["addColumn"]),{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},U=M,q=(n("da65"),Object(O["a"])(U,B,N,!1,null,"1ca59738",null)),F=q.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{attrs:{id:"sidebar",name:"appear",tag:"nav",appear:""}},[n("button",{key:"new-column",staticClass:"btn btn-circle btn-icon",attrs:{name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"})]),e.isAuthenticated?e._e():n("router-link",{key:"authenticate",staticClass:"btn btn-icon btn-circle danger",attrs:{to:{name:"login"},name:"authenticate","aria-label":"Authenticate",tag:"button"}},[n("i",{staticClass:"UI-icon UI-user-male"})]),n("router-link",{key:"about",staticClass:"btn btn-circle btn-icon",attrs:{to:{name:"about"},name:"about","aria-label":"about",tag:"button"}},[n("i",{staticClass:"UI-icon UI-heart icon-small"})])],1)},H=[],V={name:"SideBar",computed:Object(f["a"])({},Object(P["d"])(["isAuthenticated"])),methods:Object(f["a"])({},Object(P["e"])(["addColumn"]),{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},W=V,Y=(n("ef09"),Object(O["a"])(W,R,H,!1,null,"57a60094",null)),J=Y.exports,Q={name:"AutoRefreshVisibility",mounted(){document.addEventListener("visibilitychange",this.visibilityChanged,!1)},beforeDestroy(){document.removeEventListener("visibilitychange",this.visibilityChanged,!1)},methods:Object(f["a"])({},Object(P["c"])(["refreshAllColumns"]),{visibilityChanged(){!0!==document.hidden&&!1!==navigator.onLine&&this.refreshAllColumns()}})},G=a["default"].extend({name:"Deck",metaInfo:{titleTemplate:e=>e?`${e} | AFP Deck`:"AFP Deck"},components:{Column:L,AddColumn:F,SideBar:J},mixins:[Q],computed:Object(f["a"])({},Object(P["f"])(["authType","columns"])),watch:{authType(e,t){"credentials"!==e&&"credentials"===t&&this.$router.push({name:"login",query:{redirect:this.$route.path}})}},mounted(){this.refreshAllColumns()},methods:Object(f["a"])({},Object(P["c"])(["refreshAllColumns"]))}),K=G,X=(n("5185"),Object(O["a"])(K,p,h,!1,null,"cb6b18f6",null)),Z=X.exports;a["default"].use(d["a"]);const ee=[{name:"deck",path:"/",component:Z,meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:m["a"].getters.isAuthenticated.toString()}}}},children:[{path:"doc",redirect:"/"},{name:"document",path:"doc/:docId",component:()=>n.e("viewer").then(n.bind(null,"f9ca")),props:!0,meta:{analytics:{pageviewTemplate(e){const t=m["a"].getters.getDocumentById(e.params.docId);if(t)return{title:t.headline,page:e.path,location:window.location.href,dimension1:t.product,dimension2:navigator.onLine.toString(),dimension3:m["a"].getters.isAuthenticated.toString()}}}}},{name:"slug",path:"slug/:slugs",beforeEnter:(e,t,n)=>{m["a"].commit("addColumn",{params:{query:e.params.slugs.split(",").map(e=>`slug:"${e}"`).join(" AND ")}}),n({name:"deck"})}},{name:"place",path:"place/:country/:city?",beforeEnter:(e,t,n)=>{m["a"].commit("addColumn",{params:{query:e.params.city?`country:"${e.params.country}" AND city:"${e.params.city}"`:`country:${e.params.country}`}}),n({name:"deck"})}},{name:"creator",path:"creator/:creator",beforeEnter:(e,t,n)=>{m["a"].commit("addColumn",{params:{query:`creator:"${e.params.creator}"`}}),n({name:"deck"})}},{name:"login",path:"login",component:()=>n.e("login").then(n.bind(null,"a55b")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - Login",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:m["a"].getters.isAuthenticated.toString()}}}}},{name:"about",path:"about",component:()=>n.e("about").then(n.bind(null,"f820")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - About",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:m["a"].getters.isAuthenticated.toString()}}}}}]}];var te=new d["a"]({routes:ee});a["default"].use(u.a,{id:"UA-127064867-1",disabled:!0,router:te,autoTracking:{pageviewOnLoad:!0,exception:!0},debug:{enabled:!1,sendHitTask:!0},anonymizeIp:!0,forceSSL:!0});var ne=n("fe0b"),oe=n("3835"),ae=n("aa90"),se=n.n(ae);const re=Object(f["a"])({supportAllFeatures:Object.values(se.a).every(e=>!0===e),unsupportedFeatures:Object.entries(se.a).filter(e=>{let t=Object(oe["a"])(e,2),n=(t[0],t[1]);return!n})},se.a),ie={install(e){e.prototype.$modernizr=re}};a["default"].use(ie);var ce=n("6591"),le=n("c8b5"),ue=n.n(le);delete ue.a.defaults.cssProps.userSelect,ue.a.defaults.touchAction="pan-y",a["default"].use(ce["VueHammer"]);n("b814"),n("70cb");var de=n("f2d6"),me=n.n(de);a["default"].use(me.a);var pe=new me.a({useVuex:!0}),he=n("9483");if(Object(he["a"])("sw.min.js",{ready(){console.log("Service worker is active.")},registered(e){console.log("Service worker has been registered.")},cached(e){console.log("version has been cached for offline use.")},updatefound(e){console.log("New version is downloading.")},updated(e){console.log("New version is available; Ask for refresh."),a["default"].toasted.show("New version available !",{action:[{text:"Update",onClick:()=>{e.waiting.postMessage({command:"skipWaiting"})}}],position:"bottom-right"})},offline(){a["default"].toasted.show("No internet connection found. App is running in offline mode.",{position:"bottom-center",duration:1500})},error(e){a["default"].toasted.global.error(e)}}),"serviceWorker"in navigator){let e;navigator.serviceWorker.addEventListener("controllerchange",Object(o["a"])(function*(){e||(m["a"].commit("clearDocuments"),Object(l["event"])("service-worker","controllerchange"),window.location.reload(),e=!0)}))}function fe(){return"serviceWorker"in navigator?navigator.serviceWorker.controller?"controlled":"supported":"unsupported"}Object(l["event"])("service-worker","support",fe());var ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},ve=[];const be=navigator.connection||navigator.mozConnection||navigator.webkitConnection;var ye={name:"CheckConnection",computed:Object(f["a"])({},Object(P["f"])(["isOnline"])),watch:{isOnline(e,t){!1===e?(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOff"),{duration:2e3,type:"info",position:"bottom-center"})):!1===t&&(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOn"),{duration:2e3,type:"info",position:"bottom-center"}))}},mounted(){if(!be)return!1;this.checkConnection(),be.addEventListener("change",this.checkConnection)},methods:Object(f["a"])({},Object(P["e"])(["setConnectivityStatus"]),{checkConnection(){const e=!0===navigator.onLine;this.setConnectivityStatus(e)}})},Ce={name:"App",mixins:[ye]},we=Ce,Ie=(n("13a5"),n("0e66"),Object(O["a"])(we,ge,ve,!1,null,"febe781a",null)),Ae=Ie.exports;function ke(){new a["default"]({router:te,store:m["a"],i18n:ne["a"],wait:pe,render:e=>e(Ae)}).$mount("#app"),"deck"!==te.currentRoute.name||m["a"].getters.isAuthenticated||te.replace({name:"login"}),m["a"].getters.isAuthenticated&&a["default"].$ga.enable()}a["default"].config.productionTip=!1,a["default"].config.errorHandler=(e=>{a["default"].toasted.global.error(e)}),a["default"].config.warnHandler=(e=>{a["default"].toasted.global.warn(e)}),te.beforeEach(function(){var e=Object(o["a"])(function*(e,t,n){if("document"===e.name&&!m["a"].getters.getDocumentById(e.params.docId))try{yield m["a"].dispatch("getDocument",e.params.docId)}catch(o){return"credentials"!==m["a"].state.authType?n({name:"login",query:{redirect:`doc/${e.params.docId}`}}):n({name:"deck"})}n()});return function(t,n,o){return e.apply(this,arguments)}}()),m["a"].dispatch("changeLocale",ne["a"].locale),Object(m["b"])().then(ke)},da65:function(e,t,n){"use strict";var o=n("449d"),a=n.n(o);a.a},e094:function(e,t,n){},edd4:function(e){e.exports={"back-to-home":"Back to home",submit:"Submit",loading:"Loading...","install-app":"Add to home screen",deck:{"add-column":"Add a new column"},column:{search:"Search...",product:"Select content",lang:"Document language",urgency:"Category of news story",until:"Until","no-result":"No result",delete:"Delete the column",refresh:"Refresh ?","documents-gap":"Since your last visit, you missed {count} documents."},about:{title:"About AFP Deck",description:["AFP News Deck is a reader for AFP feeds. It allows you to find and read stories, multimedia articles and photos directly in your browser.","Made with love by the AFP Dataviz team, based on an original idea from the Medialab. Data is provided by the AFP Content API."],version:"Version"},auth:{success:{title:"You're logged in correctly.",description:"Enjoy AFP Deck !"},logout:"Logout",clientId:"Client ID",clientSecret:"Client Secret",username:"Username",password:"Password","not-authenticated":{title:"Log in to see the latest news",toast:"Good bye :)"},cookies:"By continuing your navigation on this site, you consent to the use of anonymous cookies for statistical purposes.","warning-email":"Please use your username instead of your email address"},products:{all:"in all products",news:"in the news",multimedia:"in multimedia articles",photo:"in photos",infographie:"in graphics",videographie:"in videographics",video:"in videos"},languages:{all:"in all languages",en:"in english",fr:"in french",de:"in german",es:"in spanish",pt:"in portuguese",ar:"in arabic","zh-tw":"in traditionnal Chinese","zh-cn":"in simplified Chinese"},urgencies:{all:"All news stories","all-photos":"All photos",flash:"Only flashes",alertes:"include alerts",urgents:"include urgents",depeches:"All news stories",topshots:"Only topshots"},connectivity:{messageOff:"Your device is offline",messageOn:"You device is online again"},dateTimeFormats:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"}},document:{share:"Share","related-articles":"Related articles",copied:"Copied in clipboard","read-more":"Full article:"}}},ef09:function(e,t,n){"use strict";var o=n("01f1"),a=n.n(o);a.a},f286:function(e,t,n){"use strict";var o=n("1f7d"),a=n.n(o);a.a},f693:function(e){e.exports={"back-to-home":"Retour à l'accueil",submit:"Valider",loading:"Chargement...","install-app":"Installer sur l'écran d'accueil",deck:{"add-column":"Ajouter une colonne"},column:{search:"Rechercher...",product:"Sélectionnez un produit",lang:"Sélectionnez une langue",urgency:"Sélectionnez une urgence",until:"Jusqu'au","no-result":"Pas de résultats",delete:"Supprimer la colonne",refresh:"Rafraîchir ?","documents-gap":"Depuis votre dernière visite, vous avez manqué {count} documents."},about:{title:"À propos d'AFP Deck",description:["AFP News Deck permet de lire les dépêches, photos et vidéos diffusées par l'AFP, directement dans votre navigateur.","Conçu par l'équipe Dataviz de l'AFP, sur une idée originale du Médialab. Les données proviennent de l'API AFP."],version:"Version"},auth:{success:{title:"Vous êtes authentifié",description:"Profitez d'AFP Deck !"},logout:"Se déconnecter",clientId:"ID Client",clientSecret:"Secret Client",username:"Nom d'utilisateur",password:"Mot de passe","not-authenticated":{title:"Connectez-vous pour bénéficier des dernières nouvelles",toast:"À bientôt :)"},cookies:"En poursuivant la navigation sur ce site, vous consentez à l'utilisation de cookies anonymes à des fins statistiques.","warning-email":"SVP, utilisez votre nom d'utilisateur et non votre adresse email"},products:{all:"dans tous les produits",news:"dans les dépêches",multimedia:"dans le fil multimédia",photo:"dans les photos",infographie:"dans les infographies",videographie:"dans les vidéographies",video:"dans les vidéos"},languages:{all:"dans toutes les langues",en:"en anglais",fr:"en français",de:"en allemand",es:"en espagnol",pt:"en portugais",ar:"en arabe","zh-tw":"en chinois traditionnel","zh-cn":"en chinois simplifié"},urgencies:{all:"Tout le contenu","all-photos":"Toutes les photos",flash:"Uniquement les flashs",alertes:"inclure les alertes",urgents:"inclure les urgents",depeches:"Tout le contenu",topshots:"Uniquement les topshots"},connectivity:{messageOff:"Votre appareil a perdu la connexion",messageOn:"Votre appareil a retrouvé une connexion"},dateTimeFormats:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"}},document:{share:"Partager","related-articles":"Sur la même thématique",copied:"Copié dans le presse-papier","read-more":"Article complet :"}}},fca5:function(e,t,n){var o={"./en":"edd4","./en.json":"edd4","./fr":"f693","./fr.json":"f693"};function a(e){var t=s(e);return n(t)}function s(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(o)},a.resolve=s,e.exports=a,a.id="fca5"},fe0b:function(e,t,n){"use strict";n.d(t,"b",function(){return h});var o=n("15fd"),a=n("1da1"),s=n("2b0e"),r=n("a925");s["default"].use(r["a"]);const i=["en","fr"],c=i[0],l={[c]:n("fca5")(`./${c}`)},u={[c]:l[c].dateTimeFormats};function d(){const e=navigator.language&&navigator.language.substring(0,2);return!(!e||!i.includes(e))&&e}const m=new r["a"]({locale:d()||c,fallbackLocale:c,messages:l,dateTimeFormats:u});function p(e){m.locale=e;const t=document.querySelector("html");return t&&t.setAttribute("lang",e),e}function h(e){return f.apply(this,arguments)}function f(){return f=Object(a["a"])(function*(e){if(m.locale!==e||!m.messages[e]){const t=yield n("39c3")(`./${e}.json`),a=t.default,s=a.dateTimeFormats,r=Object(o["a"])(a,["dateTimeFormats"]);return m.setLocaleMessage(e,r),m.setDateTimeFormat(e,s),p(e)}return p(e)}),f.apply(this,arguments)}t["a"]=m}});
//# sourceMappingURL=app.a81f7de3.js.map