(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0e51":function(t,e,a){"use strict";a("ce79")},"0f3e":function(t,e,a){},a55b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{staticClass:"on-left header-out",scopedSlots:t._u([{key:"header",fn:function(){return[n("img",{attrs:{src:a("5365")}})]},proxy:!0},{key:"body",fn:function(){return[n("form",{class:{danger:t.authError},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.login(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}}],staticClass:"inpt inpt-large inpt-bg",attrs:{id:"username",placeholder:t.$t("auth.username"),"aria-label":t.$t("auth.username"),type:"text",name:"username",autocomplete:"username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],staticClass:"inpt inpt-large inpt-bg",attrs:{id:"password",placeholder:t.$t("auth.password"),"aria-label":t.$t("auth.password"),type:"password",name:"password",autocomplete:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("select",{directives:[{name:"model",rawName:"v-model",value:t.lang,expression:"lang"}],staticClass:"inpt inpt-large inpt-bg select",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.lang=e.target.multiple?a:a[0]}}},[n("option",{attrs:{value:"none",selected:"",disabled:""}},[t._v("Langue des articles")]),n("option",{attrs:{value:"fr"}},[t._v("Français")]),n("option",{attrs:{value:"en"}},[t._v("Anglais")])]),n("button",{staticClass:"btn btn-large",attrs:{"aria-label":"Submit",type:"submit"}},[t._v(" "+t._s(t.$t("submit"))+" ")])])]},proxy:!0}])})},s=[],i=(a("ddb0"),a("5530")),r=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.close,expression:"close"}],staticClass:"modal-container"},[a("div",{staticClass:"actions"},[t._t("actions")],2),a("div",{staticClass:"modal-header"},[t._t("header")],2),a("div",{staticClass:"modal-body"},[t._t("body")],2),a("div",{staticClass:"modal-footer"},[t._t("footer")],2)])])])])},c=[],u=a("c7db"),l=r["default"].extend({name:"Modal",mixins:[u["mixin"]],methods:{close(){this.$emit("close")}}}),d=l,m=(a("0e51"),a("2877")),p=Object(m["a"])(d,o,c,!1,null,"00598445",null),f=p.exports,v=a("2f62"),h=a("049b"),b=a("ec26"),g=a("5593"),w=r["default"].extend({name:"Login",metaInfo:{title:"Login"},components:{Modal:f},data(){return{username:"",password:"",lang:"none",authError:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(v["f"])(["credentials"])),Object(v["d"])(["isAuthenticated"])),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(v["c"])(["authenticate"])),Object(v["e"])(["resetAllColumns","addColumn"])),{},{async login(){if(this.username.includes("@afp.com"))return this.$toasted.show(this.$t("auth.warning-email").toString(),{position:"bottom-center",duration:1500,type:"error"}),this.authError=!0,!1;try{if(await this.authenticate({username:this.username,password:this.password}),this.$toasted.show(this.$t("auth.success.title").toString(),{position:"bottom-center",duration:1500,type:"success"}),this.authError=!1,this.$ga.enable(),"none"!==this.lang){const t=g[this.lang];for(const e of t){const t={id:Object(b["a"])(),params:Object.assign({},h["a"].defaultSearchParams,{products:["multimedia"],topics:e.value,langs:[this.lang],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]};this.addColumn(t)}}this.$router.push({name:"deck"})}catch(t){this.authError=!0}}})}),y=w,_=(a("f8e3"),Object(m["a"])(y,n,s,!1,null,"5c02e610",null));e["default"]=_.exports},c7db:function(t,e,a){"use strict";var n=a("2b0e");n="default"in n?n["default"]:n;var s="2.2.2",i=/^2\./.test(n.version);i||n.util.warn("VueClickaway "+s+" only supports Vue 2.x, and does not support Vue "+n.version);var r="_vue_clickaway_handler";function o(t,e,a){c(t);var n=a.context,s=e.value;if("function"===typeof s){var i=!1;setTimeout((function(){i=!0}),0),t[r]=function(e){var a=e.path||(e.composedPath?e.composedPath():void 0);if(i&&(a?a.indexOf(t)<0:!t.contains(e.target)))return s.call(n,e)},document.documentElement.addEventListener("click",t[r],!1)}}function c(t){document.documentElement.removeEventListener("click",t[r],!1),delete t[r]}var u={bind:o,update:function(t,e){e.value!==e.oldValue&&o(t,e)},unbind:c},l={directives:{onClickaway:u}};e.version=s,e.directive=u,e.mixin=l},ce79:function(t,e,a){},f8e3:function(t,e,a){"use strict";a("0f3e")}}]);
//# sourceMappingURL=login.18188e6a.js.map