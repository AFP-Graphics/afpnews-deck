(function(e){function t(t){for(var r,a,c=t[0],l=t[1],u=t[2],d=t[3]||[],m=0,h=[];m<c.length;m++)a=c[m],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);p&&p(t),i.push.apply(i,d);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(s.splice(t--,1),e=l(l.s=n[0]))}return 0===s.length&&(i.forEach((function(e){if(void 0===o[e]){o[e]=null;var t=document.createElement("link");l.nc&&t.setAttribute("nonce",l.nc),t.rel="prefetch",t.as="script",t.href=c(e),document.head.appendChild(t)}})),i.length=0),e}var r={},a={app:0},o={app:0},s=[],i=[];function c(e){return l.p+"js/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"."+{about:"397e2b02",login:"06862506",viewer:"32be3ad6"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={about:1,login:1,viewer:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"."+{about:"2032cdf9",login:"5b7b25fa",viewer:"86364f3f"}[e]+".css",o=l.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],u=c.getAttribute("data-href");if(u===r||u===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[e],m.parentNode.removeChild(m),n(s)},m.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=s);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=c(e);var d=new Error;i=function(t){u.onerror=u.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var m=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var m=0;m<u.length;m++)t(u[m]);var p=d,h=function(){return s.push([0,"chunk-vendors"]),n()}();t([[],{},0,["about","login","viewer"]])})({0:function(e,t,n){e.exports=n("cd49")},"0613":function(e,t,n){"use strict";n("e260"),n("e6cf"),n("ddb0");var r=n("1da1"),a=n("2b0e"),o=n("2f62");class s{constructor(){this.columns=[],this.documents=new Map,this.authType="unknown",this.isOnline=!0,this.displayInstallApp=!1,this.locale="fr"===Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_I18N_LOCALE?"fr":"en"}}n("2532");var i=n("ade3");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={getDocumentById:e=>t=>{return e.documents.get(t)},getColumnByIndex:e=>t=>{return e.columns[t]},getDocumentsIdsByColumnId:(e,t)=>(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.getColumnByIndex(e).documentsIds.filter(e=>n||!e.includes("documents-gap"))}),getDocumentsByColumnId:(e,t)=>(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.getDocumentsIdsByColumnId(e,n).map(e=>t.getDocumentById(e))}),isAnonymous(e){return"anonymous"===e.authType},isAuthenticated(e){return"credentials"===e.authType},getPreviousDocumentIdInColById:(e,t)=>(e,n)=>{var r=t.getDocumentsByColumnId(e,!1),a=r.findIndex(e=>e.uno===n),o=r[a+1];return o&&o.uno||!1},getNextDocumentIdInColById:(e,t)=>(e,n)=>{var r=t.getDocumentsByColumnId(e,!1),a=r.findIndex(e=>e.uno===n),o=r[a-1];return o&&o.uno||!1},getFirstDocumentInCol:(e,t)=>e=>{var n=t.getDocumentsIdsByColumnId(e,!1)[0];return t.getDocumentById(n)},getLastDocumentInCol:(e,t)=>e=>{var n=t.getDocumentsIdsByColumnId(e,!1).pop();return t.getDocumentById(n)},getRefreshParamsByMode:(e,t)=>(e,n)=>{switch(n){case"reset":return t.getColumnByIndex(e).params;case"before":var r=t.getLastDocumentInCol(e),a=new Date(r.published);return a.setSeconds(a.getSeconds()-1),l({},t.getColumnByIndex(e).params,{dateTo:a.toISOString()});case"after":var o=t.getFirstDocumentInCol(e),s=new Date(o.published);return s.setSeconds(s.getSeconds()+1),l({},t.getColumnByIndex(e).params,{dateFrom:s.toISOString()});default:throw new Error("Invalid mode")}}},d=(n("4e82"),n("cca6"),n("90a2")),m=n.n(d),p=new m.a({customAuthUrl:"https://3o3qoiah2e.execute-api.eu-central-1.amazonaws.com/afpdeck",saveToken:e=>{e&&B.commit("setToken",e)}}),h=p,f=n("c64e"),g=n.n(f);n("1276");function b(e){if(void 0!==e){var t=new Date(e);return t instanceof Date&&!isNaN(t.valueOf())?t:void 0}}class v{constructor(e){this.docSource=e}get headline(){var e=this.docSource.headline||this.docSource.title||this.docSource.news;return Array.isArray(e)?e.join(" - "):e}get embargoed(){return b(this.docSource.embargoed)}get published(){var e=b(this.docSource.published);if(!e)throw new Error("Doc ".concat(this.docSource.uno," doesn't contain a valid published date"));return e}get medias(){var e=this.docSource.bagItem;if(!e)return[];var t,n=this.docSource.entity_faces,r=e[0].medias.find(e=>"HighDef"===e.role);if(n&&n[0]&&r){var a=n[0].faces[0].offsetY;t=a/r.height}return e.map(e=>{return{sizes:e.medias.sort((e,t)=>e.width-t.width),creator:e.creator,provider:e.provider,caption:e.caption,source:e.source,uno:e.uno,faceYOffsetPercent:t}})}get genre(){if(this.docSource.genre)return!1===Array.isArray(this.docSource.genre)?this.docSource.genre:this.docSource.genre[0]}get event(){if(this.docSource.event&&!1!==Array.isArray(this.docSource.event))return{id:this.docSource.event[0].split(":")[1],name:this.docSource.afpentity.event[0].keyword.split(" : ")[1]}}toObject(){return{uno:this.docSource.uno,headline:this.headline,published:this.published,embargoed:this.embargoed,lang:this.docSource.lang,product:this.docSource.product,urgency:this.docSource.urgency,news:this.docSource.news,slugs:this.docSource.slug,medias:this.medias,iptc:this.docSource.iptc,source:this.docSource.source,creator:this.docSource.creator,provider:this.docSource.provider,city:this.docSource.city,country:this.docSource.country,advisory:this.docSource.advisory,status:this.docSource.status,summary:this.docSource.summary,genre:this.genre,event:this.event}}}var y={addColumn(e,t){var n={id:g()(),params:Object.assign({},h.defaultSearchParams,{products:[],size:10}),documentsIds:[]};t&&t.params&&(t.params=Object.assign(n.params,t.params));var r=Object.assign({},n,t);e.columns.find(e=>e.id===r.id)||e.columns.push(r)},moveColumn(e,t){var{indexCol:n,dir:r}=t,a=e.columns.map(e=>e.id),o="left"===r?n-1:n+1,s=a[n];a.splice(n,1),a.splice(o,0,s),e.columns.sort((e,t)=>a.indexOf(e.id)-a.indexOf(t.id))},closeColumn(e,t){var{indexCol:n}=t;e.columns=e.columns.filter((e,t)=>t!==n)},resetColumn(e,t){var{indexCol:n}=t;e.columns[n].documentsIds=[]},updateColumnParams(e,t){var{indexCol:n,params:r}=t;e.columns[n].params=r},setToken(e,t){e.authType=t.authType},unsetToken(e){e.authType="unknown"},addDocuments(e,t){t.map(e=>new v(e).toObject()).forEach(t=>e.documents.set(t.uno,t))},clearDocuments(e){e.columns.forEach(e=>{e.documentsIds=[]}),e.documents.clear()},prependDocumentsIdsToCol(e,t){var{indexCol:n,documentsIds:r}=t,a=e.columns[n].documentsIds,o=a.findIndex(e=>!e.includes("documents-gap"));o>0&&a.splice(0,o),e.columns[n].documentsIds=[...new Set(r.concat(a))]},appendDocumentsIdsToCol(e,t){var{indexCol:n,documentsIds:r}=t,a=e.columns[n].documentsIds;e.columns[n].documentsIds=[...new Set(a.concat(r))]},setConnectivityStatus(e,t){e.isOnline=t},setLocale(e,t){e.locale=t},resetState(e){Object.assign(e,new s)},displayInstallApp(e,t){e.displayInstallApp=t}},O=(n("841c"),n("fe0b")),w=n("70cb"),C={changeLocale(e,t){return Object(r["a"])((function*(){var{commit:n}=e;yield Object(O["b"])(t),Object(w["a"])(t),n("setLocale",t)}))()},logout(e){var{commit:t,dispatch:n}=e;return t("unsetToken"),t("clearDocuments"),n("refreshAllColumns")},authenticate(e){var t=arguments;return Object(r["a"])((function*(){var{commit:n,dispatch:r}=e,{username:o,password:s}=t.length>1&&void 0!==t[1]?t[1]:{};try{yield h.authenticate({username:o,password:s}),n("clearDocuments"),r("refreshAllColumns",{mode:"reset"})}catch(i){return a["default"].toasted.global.apiError(i),Promise.reject(i)}}))()},searchDocuments(e,t){return Object(r["a"])((function*(){var{commit:n,dispatch:r}=e;try{r("wait/start","documents.search",{root:!0});var{documents:a}=yield h.search(t);return a?(n("addDocuments",a),a.map(e=>new v(e).toObject())):[]}finally{r("wait/end","documents.search",{root:!0})}}))()},refreshColumn(e,t){return Object(r["a"])((function*(){var{state:n,commit:r,dispatch:a,getters:o,rootGetters:s}=e,{indexCol:i,mode:c}=t;if(!s["wait/is"]("column.refreshing.".concat(n.columns[i].id)))try{"reset"===c?r("resetColumn",{indexCol:i}):0===o.getDocumentsIdsByColumnId(i,!1).length&&(c="reset");var l=o.getRefreshParamsByMode(i,c);a("wait/start","column.refreshing.".concat(n.columns[i].id),{root:!0});var{documents:u,count:d}=yield h.search(l);if(!u||0===u.length)return!1;r("addDocuments",u);var m=u.map(e=>e.uno);switch(c){case"reset":case"before":r("appendDocumentsIdsToCol",{indexCol:i,documentsIds:m});break;case"after":d>u.length&&m.push("documents-gap|".concat(+new Date,"|").concat(d-u.length)),r("prependDocumentsIdsToCol",{indexCol:i,documentsIds:m});break;default:}return!0}finally{a("wait/end","column.refreshing.".concat(n.columns[i].id),{root:!0})}}))()},refreshAllColumns(e){var t=arguments;return Object(r["a"])((function*(){var{state:n,dispatch:r,rootGetters:o}=e,{mode:s="after"}=t.length>1&&void 0!==t[1]?t[1]:{};if(!o["wait/is"]("column.refreshing.all"))try{r("wait/start","column.refreshing.all",{root:!0}),yield Promise.all(n.columns.map((e,t)=>r("refreshColumn",{indexCol:t,mode:s})))}catch(i){a["default"].toasted.global.apiError(i)}finally{r("wait/end","column.refreshing.all",{root:!0})}}))()},getDocument(e,t){return Object(r["a"])((function*(){var{commit:n}=e;try{var{document:r}=yield h.get(t);n("addDocuments",[r])}catch(o){return a["default"].toasted.global.apiError(o),Promise.reject(o)}}))()}},j=C,I=n("a002"),k=n.n(I),P=(n("f79f"),n("a98c"),{columns:"afpnews-deck-columns",token:"afpnews-deck-token",client:"afpnews-deck-client",clientId:"afpnews-deck-client-id",clientSecret:"afpnews-deck-client-secret",autoRefresh:"afpnews-deck-auto-refresh",locale:"afpnews-deck-locale"}),D=k.a.createInstance({name:"userStore"}),S=k.a.createInstance({name:"documentsStore"}),A=function(){var e=Object(r["a"])((function*(e){var t=yield D.getItem(P.token);t&&(h.token=t,e.commit("setToken",t))}));return function(t){return e.apply(this,arguments)}}(),_=e=>{e.subscribe((e,t)=>{var{type:n,payload:r}=e;switch(n){case"setToken":"credentials"===r.authType?D.setItem(P.token,r):D.removeItem(P.token);break;case"unsetToken":h.resetToken(),D.removeItem(P.token);break;default:}})};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(){var e=Object(r["a"])((function*(e){var[t,n]=yield Promise.all([P.locale,P.columns].map(e=>D.getItem(e)));null!==t&&e.state.locale!==t&&(yield e.dispatch("changeLocale",t));var r=yield S.getItems();e.commit("addDocuments",Object.values(r)),Array.isArray(n)&&n.length>0?n.forEach(t=>e.commit("addColumn",x({},t,{documentsIds:t.documentsIds.filter(e=>e.includes("documents-gap")||r[e])}))):e.commit("addColumn")}));return function(t){return e.apply(this,arguments)}}(),E=e=>{e.subscribe(function(){var t=Object(r["a"])((function*(t,n){var{type:r,payload:a}=t;switch(r){case"setLocale":D.setItem(P.locale,a);break;case"addColumn":case"moveColumn":case"updateColumnParams":case"appendDocumentsIdsToCol":case"prependDocumentsIdsToCol":D.setItem(P.columns,n.columns);break;case"closeColumn":case"resetColumn":var o=[];o.concat.apply([],n.columns.map(e=>e.documentsIds));var s=yield S.keys();s.filter(e=>!o.includes(e)).forEach(e=>S.removeItem(e)),D.setItem(P.columns,n.columns);break;case"resetState":D.clear(),S.clear(),e.commit("addColumn");break;case"clearDocuments":S.clear(),D.setItem(P.columns,n.columns);break;case"addDocuments":S.setItems(a.map(e=>({key:e.uno,value:e})));break;default:}}));return function(e,n){return t.apply(this,arguments)}}())},L=e=>{e.subscribe(function(){var e=Object(r["a"])((function*(e,t){var{type:n}=e;switch(n){case"addColumn":yield a["default"].nextTick();var r=document.querySelector(".column:last-of-type");r&&r.scrollIntoView({behavior:"smooth",block:"center"});break;default:}}));return function(t,n){return e.apply(this,arguments)}}())};n.d(t,"b",(function(){return F})),a["default"].use(o["b"]);var N=new o["a"]({state:new s,getters:u,mutations:y,actions:j,modules:{},plugins:[_,E,L],strict:!1}),B=t["a"]=N,F=function(){var e=Object(r["a"])((function*(){yield Promise.all([A(N),T(N)])}));return function(){return e.apply(this,arguments)}}()},"0a3e":function(e,t,n){},"13a5":function(e,t,n){"use strict";var r=n("a13f"),a=n.n(r);a.a},"199e":function(e,t,n){},"362b":function(e,t,n){},3839:function(e,t,n){"use strict";var r=n("f498"),a=n.n(r);a.a},"39c3":function(e,t,n){var r={"./en.json":"edd4","./fr.json":"f693"};function a(e){return Promise.resolve().then((function(){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var a=r[e];return n.t(a,3)}))}a.keys=function(){return Object.keys(r)},a.id="39c3",e.exports=a},"52b8":function(e,t,n){},"561b":function(e,t,n){},"6d95":function(e,t,n){"use strict";var r=n("199e"),a=n.n(r);a.a},"70cb":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("2b0e"),a=n("5a0c"),o=n.n(a),s=n("4208"),i=n.n(s);n("e5b7");o.a.extend(i.a);var c={install(e){e.filter("fromNow",(e,t)=>{return o()(e).from(o()(t))})}};function l(e){o.a.locale(e)}r["default"].use(c)},"941a":function(e,t,n){},a13f:function(e,t,n){},a187:function(e,t,n){"use strict";var r=n("362b"),a=n.n(r);a.a},a90f:function(e,t,n){"use strict";var r=n("0a3e"),a=n.n(r);a.a},ae8d:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.doc?n("router-link",{staticClass:"article",class:{flash:1===e.doc.urgency,alerte:"photo"!==e.doc.product&&2===e.doc.urgency,urgent:"photo"!==e.doc.product&&3===e.doc.urgency,photo:"photo"===e.doc.product,multimedia:"multimedia"===e.doc.product,news:"news"===e.doc.product,video:["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product),canceled:"Canceled"===e.doc.status},attrs:{lang:e.doc.lang,dir:"ar"===e.doc.lang?"rtl":"ltr",to:{name:"document",params:{indexCol:e.indexCol,docId:e.docId}}}},[e.doc.medias.length>0&&e.doc.medias[0].sizes.some((function(e){return"Preview"===e.role}))?n("div",{staticClass:"img-container",style:{backgroundImage:"url("+e.doc.medias[0].sizes.find((function(e){return"Preview"===e.role})).href+")",backgroundPosition:e.doc.medias[0].faceYOffsetPercent?"0px "+100*e.doc.medias[0].faceYOffsetPercent+"%":null}},[["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product)?n("i",{staticClass:"UI-icon UI-play-video"}):e._e()]):e._e(),n("div",{staticClass:"cols"},[e.doc.embargoed&&e.doc.embargoed>new Date?n("p",{key:"date-"+e.locale,staticClass:"date embargo"},[e._v(" Embargo : "+e._s(e._f("fromNow")(e.doc.embargoed,e.$root.$now))+" ")]):n("p",{key:"date-"+e.locale,staticClass:"date"},[e._v(" "+e._s(e._f("fromNow")(e.doc.published,e.$root.$now))+" ")]),"photo"===e.doc.product&&1===e.doc.urgency?n("p",{staticClass:"genre"},[e._v(" Topshot ")]):e.doc.genre?n("p",{staticClass:"genre"},[n("span",[e._v(" "+e._s(e.doc.genre)+" ")])]):e._e()]),"photo"!==e.doc.product?n("h2",[e._v(" "+e._s(e.doc.headline)+" ")]):e._e(),["news","multimedia"].includes(e.doc.product)&&e.doc.urgency>2&&e.doc.news&&e.doc.news[0]&&"Usable"===e.doc.status?n("p",{staticClass:"lead"},[e._v(" "+e._s(e.doc.news[0].substr(0,100)+"...")+" ")]):e._e()]):e._e()},a=[],o=n("ade3"),s=n("2f62");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={name:"Card",props:{docId:{type:String,required:!0},indexCol:{type:Number,required:!1,default:null}},computed:c({},Object(s["f"])(["locale"]),{},Object(s["d"])(["getDocumentById"]),{doc(){return this.getDocumentById(this.docId)}})},u=l,d=(n("a187"),n("2877")),m=Object(d["a"])(u,r,a,!1,null,"64136345",null);t["a"]=m.exports},b814:function(e,t,n){"use strict";var r,a=n("0613"),o=n("0284");window.addEventListener("beforeinstallprompt",e=>{r=e,a["a"].commit("displayInstallApp",!0),r.userChoice.then(e=>{var{outcome:t}=e;"accepted"===t&&a["a"].commit("displayInstallApp",!1),Object(o["event"])("pwa","installation",t)})}),window.addEventListener("appinstalled",e=>{Object(o["event"])("pwa","installation","installed")}),t["a"]=()=>{r.prompt()}},c008:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("5319");var r=n("1da1"),a=n("2b0e"),o=(n("eb2f"),n("58ca"));a["default"].use(o["a"]);var s=n("a65d"),i=n.n(s),c=n("0613");a["default"].use(i.a),a["default"].toasted.register("error",e=>{return console.error(e),e.message?"Oops.. ".concat(e.message):"Oops.. Something went wrong.."},{type:"error",position:"bottom-center",duration:1500,singleton:!0}),a["default"].toasted.register("warn",e=>{return console.warn(e),"Oops.. ".concat(e)},{type:"error",position:"bottom-center",duration:1500,singleton:!0}),a["default"].toasted.register("apiError",e=>{return 401===e.code?c["a"].dispatch("logout"):console.error(e),e.message?"Oops.. ".concat(e.message):"Oops.. Something went wrong with the API.."},{type:"error",position:"bottom-center",duration:1e3,singleton:!0});var l=n("0284"),u=n.n(l),d=(n("e6cf"),n("25f0"),n("2532"),n("1276"),n("8c4f")),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("transition-group",{attrs:{id:"columns",name:"list",tag:"div"}},[e._l(e.columns,(function(e,t){return n("column",{key:"column-"+e.id,attrs:{"column-id":t}})})),n("add-column",{key:"add-column"})],2),n("side-bar"),n("router-view")],1)},p=[],h=n("ade3"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"column"},[n("header",[e.paramsOpen?n("div",{staticClass:"actions"},[n("button",{staticClass:"btn btn-icon",attrs:{name:"move-left","aria-label":"Move column to left"},on:{click:function(t){return e.move("left")}}},[n("i",{staticClass:"UI-icon UI-navigate-left"})]),n("button",{staticClass:"btn btn-icon margin-right-auto",attrs:{name:"move-right","aria-label":"Move column to right"},on:{click:function(t){return e.move("right")}}},[n("i",{staticClass:"UI-icon UI-navigate-right"})]),n("button",{staticClass:"btn btn-icon",attrs:{name:"close-params","aria-label":"Close column params"},on:{click:function(t){e.paramsOpen=!1}}},[n("i",{staticClass:"UI-icon UI-collapse"})])]):e._e(),n("div",{staticClass:"form-group inpt-icon"},[n("input",{ref:"search",staticClass:"search inpt inpt-large",attrs:{placeholder:e.$t("column.search"),"aria-label":e.$t("column.search"),type:!0===e.paramsOpen?"search":"text",autocomplete:"off",name:"query"},on:{change:e.onQueryChange,focus:e.onQueryFocus}}),!1===e.paramsOpen?n("button",{staticClass:"btn btn-icon",attrs:{name:"expand","aria-label":"Open column params"},on:{click:e.openParams}},[n("i",{staticClass:"UI-icon UI-expand icon-small"})]):e._e()]),n("transition-group",{staticClass:"form",attrs:{name:"curtain",tabindex:"-1",tag:"div"}},[e.paramsOpen?n("select",{directives:[{name:"model",rawName:"v-model",value:e.product,expression:"product"}],key:"product",staticClass:"slct slct-large",attrs:{name:"product","aria-label":"Select a product"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.product=t.target.multiple?n:n[0]}}},e._l(e.products,(function(t){var r=t.label,a=t.value,o=t.disabled;return n("option",{key:a.join("|"),attrs:{disabled:o},domProps:{value:a}},[e._v(" "+e._s(r)+" ")])})),0):e._e(),e.paramsOpen?n("select",{directives:[{name:"show",rawName:"v-show",value:e.languages.length>1,expression:"languages.length > 1"},{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],key:"lang",staticClass:"slct slct-large",attrs:{name:"lang","aria-label":"Select a language"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.lang=t.target.multiple?n:n[0]}}},e._l(e.languages,(function(t){var r=t.label,a=t.value,o=t.disabled;return n("option",{key:a.join("|"),attrs:{disabled:o},domProps:{value:a}},[e._v(" "+e._s(r)+" ")])})),0):e._e(),e.paramsOpen?n("select",{directives:[{name:"show",rawName:"v-show",value:e.urgencies.length>1,expression:"urgencies.length > 1"},{name:"model",rawName:"v-model",value:e.urgency,expression:"urgency"}],key:"urgency",staticClass:"slct slct-large",attrs:{name:"urgency","aria-label":"Select an urgency"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.urgency=t.target.multiple?n:n[0]}}},e._l(e.urgencies,(function(t){var r=t.label,a=t.value,o=t.disabled;return n("option",{key:a.join("|"),attrs:{disabled:o},domProps:{value:a}},[e._v(" "+e._s(r)+" ")])})),0):e._e(),e.paramsOpen?n("input",{directives:[{name:"model",rawName:"v-model",value:e.dateTo,expression:"dateTo"}],key:"datepicker",staticClass:"inpt inpt-large",attrs:{placeholder:e.$t("column.until"),type:"date","aria-label":"Select a date",name:"date-picker"},domProps:{value:e.dateTo},on:{input:function(t){t.target.composing||(e.dateTo=t.target.value)}}}):e._e(),e.paramsOpen?n("button",{key:"close",staticClass:"btn btn-large danger",attrs:{name:"close","aria-label":"Delete the column"},on:{click:e.close}},[e._v(" "+e._s(e.$t("column.delete"))+" ")]):e._e()])],1),n("recyclist",{ref:"recyclist",staticClass:"documents",attrs:{list:e.documents,size:10,offset:200,"is-loading":e.$wait.is("column.refreshing."+e.column.id),"no-more":e.noMore},on:{"load-top":e.loadAfter,"load-bottom":e.loadBefore},scopedSlots:e._u([{key:"tombstone",fn:function(){return[n("content-placeholders",{staticClass:"tombstone",attrs:{animated:!0,rounded:!0,centered:!1}},[n("content-placeholders-heading",{attrs:{img:!1}}),n("content-placeholders-img"),n("content-placeholders-text",{attrs:{lines:2}})],1)]},proxy:!0},{key:"item",fn:function(t){var r=t.data;return[r.includes("documents-gap")?n("div",{staticClass:"documents-gap"},[n("p",[e._v(" "+e._s(e.$tc("column.documents-gap",parseInt(r.split("|")[2]),{count:parseInt(r.split("|")[2])}))+" "),n("router-link",{attrs:{to:"/"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(" "+e._s(e.$t("column.refresh"))+" ")])],1)]):n("card",{attrs:{"doc-id":r,"index-col":e.columnId}})]}},{key:"nomore",fn:function(){return[n("span",[e._v(e._s(e.$t("column.no-result")))])]},proxy:!0}])})],1)},g=[],b=(n("841c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-recyclist"},[n("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:e.height+"px"}},[e._l(e.visibleItems,(function(t,r){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.height>0,expression:"height > 0"}],key:r,staticClass:"vue-recyclist-item",style:{transform:"translate3d(0,"+t.top+"px,0)"}},[t.data?e._t("item",null,{data:t.data}):e._t("tombstone")],2)})),n("div",{staticClass:"vue-recyclist-pool"},[e._l(e.poolItems,(function(t,r){return n("div",{key:r,ref:t.data,refInFor:!0,staticClass:"vue-recyclist-item"},[e._t("item",null,{data:t.data})],2)})),0===e.tombHeight?n("div",{ref:"tomb",staticClass:"vue-recyclist-item"},[e._t("tombstone")],2):e._e()],2)],2),!e.isLoading&&e.noMore?n("div",{staticClass:"vue-recyclist-nomore"},[e._t("nomore",[n("div",[e._v("End of list")])])],2):e._e()])}),v=[],y=(n("e260"),n("ddb0"),n("0342")),O=n.n(y),w=[new O.a("Poppins",{weight:400,style:"normal",stretch:"normal"}),new O.a("Poppins",{weight:600,style:"normal",stretch:"normal"})],C=()=>Promise.all(w.map(e=>e.load())),j={name:"Recyclist",props:{list:{type:Array,required:!0},size:{type:Number,default:20},offset:{type:Number,default:200},isLoading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1}},data(){return{items:[],height:0,start:0,containerHeight:0,tombHeight:0}},computed:{visibleItems(){return this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},poolItems(){return this.items.filter(e=>e.data&&!1===e.gotHeight)}},watch:{start(e,t){0===e&&t>e&&this.$emit("loadTop")},list(){this.loadList()},noMore(e){!0===e&&(this.items=this.items.filter(e=>e.data),this.updateItemTop())}},mounted(){this.$el.addEventListener("scroll",this.onScroll,{capture:!0,passive:!0}),this.tombHeight=this.$refs.tomb&&this.$refs.tomb.offsetHeight,this.containerHeight=this.$el&&this.$el.offsetHeight,this.list.length>0?(this.loadList(),this.list.length<this.size&&this.loadMoreItems()):this.loadMoreItems()},destroyed(){this.$el.removeEventListener("scroll",this.onScroll)},methods:{reset(){var e=this;return Object(r["a"])((function*(){e.items=[],e.height=e.start=e.$el.scrollTop=0,yield e.$nextTick(),e.loadMoreItems()}))()},loadList(){var e=this;return Object(r["a"])((function*(){e.items=e.list.map(e.renderItem),yield C(),yield e.$nextTick();for(var t=0;t<e.items.length;t++)e.updateItemHeight(t);e.updateItemTop()}))()},loadMoreItems(){var e=this;return Object(r["a"])((function*(){if(e.noMore)return!1;for(var t=e.items.length+e.size,n=e.items.length;n<t;n++)e.setItem(n,null);e.updateItemTop(),e.$emit("load-bottom")}))()},setItem(e,t){this.$set(this.items,e,this.renderItem(t))},renderItem(e){return{data:e,top:0,height:this.tombHeight,gotHeight:!1}},updateItemTop(){this.height=0;for(var e=0;e<this.items.length;e++){var t=this.items[e-1];this.$set(this.items[e],"top",t?t.top+t.height:0),this.height+=this.items[e].height}this.updateIndex()},updateIndex(){for(var e=this.$el.scrollTop,t=0;t<this.items.length;t++)if(this.items[t].top>e){this.start=Math.max(0,t-1);break}},updateItemHeight(e){var t=this.items[e];if(t.data){var[n]=this.$refs[t.data];n&&(this.$set(this.items[e],"height",n.offsetHeight),this.$set(this.items[e],"gotHeight",n.offsetHeight>0))}},onScroll(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.loadMoreItems(),this.updateIndex()}}},I=j,k=(n("a90f"),n("2877")),P=Object(k["a"])(I,b,v,!1,null,"47f9749e",null),D=P.exports,S=n("967d"),A=n("ae8d"),_=n("2f62");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={name:"Column",components:{Card:A["a"],Recyclist:D,ContentPlaceholders:S["ContentPlaceholders"],ContentPlaceholdersHeading:S["ContentPlaceholdersHeading"],ContentPlaceholdersImg:S["ContentPlaceholdersImg"],ContentPlaceholdersText:S["ContentPlaceholdersText"]},props:{columnId:{type:Number,required:!0}},data(){return{paramsOpen:!1,noMore:!1}},computed:x({},Object(_["d"])(["getColumnByIndex","getDocumentsIdsByColumnId","isAuthenticated"]),{column(){return this.getColumnByIndex(this.columnId)},documents(){return this.getDocumentsIdsByColumnId(this.columnId)},params(){return this.column.params},product:{get(){return this.params.products},set(e){if(1===e.length){if("photo"===e[0])return this.updateParams({products:e,langs:["en"],urgencies:[]});if("news"===e[0])return this.updateParams({products:e,urgencies:[1,2,3,4]})}this.updateParams({products:e,urgencies:[]})}},lang:{get(){return this.params.langs},set(e){this.updateParams({langs:e})}},products(){return[{label:this.$t("products.all"),value:[],disabled:!this.isAuthenticated},{label:this.$t("products.news"),value:["news"],disabled:!this.isAuthenticated},{label:this.$t("products.multimedia"),value:["multimedia"],disabled:!1},{label:this.$t("products.photo"),value:["photo"],disabled:!this.isAuthenticated},{label:this.$t("products.video"),value:["sidtv","parismode","afptvweb","afptv1st"],disabled:!this.isAuthenticated},{label:this.$t("products.infographie"),value:["infographie"],disabled:!this.isAuthenticated},{label:this.$t("products.videographie"),value:["videographie"],disabled:!this.isAuthenticated}]},languages(){return 1===this.product.length&&"photo"===this.product[0]?[{label:this.$t("languages.en"),value:["en"],disabled:!1}]:[{label:this.$t("languages.all"),value:[],disabled:!1},{label:this.$t("languages.en"),value:["en"],disabled:!1},{label:this.$t("languages.fr"),value:["fr"],disabled:!1},{label:this.$t("languages.de"),value:["de"],disabled:!1},{label:this.$t("languages.es"),value:["es"],disabled:!1},{label:this.$t("languages.pt"),value:["pt"],disabled:!1},{label:this.$t("languages.ar"),value:["ar"],disabled:!1},{label:this.$t("languages.zh-tw"),value:["zh-tw"],disabled:!1},{label:this.$t("languages.zh-cn"),value:["zh-cn"],disabled:!1}]},urgencies(){return"photo"===this.product[0]?[{label:this.$t("urgencies.all-photos"),value:[],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.topshots",2),value:[1],disabled:!this.isAuthenticated}]:"news"===this.product[0]?[{label:this.$tc("urgencies.depeches",2),value:[1,2,3,4],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.flash",2),value:[1],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.alertes",2),value:[1,2],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.urgents",2),value:[1,2,3],disabled:!this.isAuthenticated}]:[{label:this.$t("urgencies.all"),value:[],disabled:!this.isAuthenticated}]},urgency:{get(){return this.params.urgencies},set(e){this.updateParams({urgencies:e})}},query(){return this.params.query},dateTo:{get(){return this.params.dateTo},set(e){this.updateParams({dateTo:e})}}}),mounted(){this.$refs.search.value=this.query},methods:x({},Object(_["e"])(["updateColumnParams","resetColumn","moveColumn","closeColumn","openColumnSettings","closeColumnSettings"]),{},Object(_["c"])(["refreshColumn"]),{updateParams(e){1===this.params.products.length&&"photo"===this.params.products[0]&&(""===this.params.query&&e.urgencies&&e.urgencies[0]&&1===e.urgencies[0]&&(this.$refs.search.value=e.query="source:AFP"),"source:AFP"===this.params.query&&e.urgencies&&0===e.urgencies.length&&(this.$refs.search.value=e.query=""));var t=x({},this.params,{},e);this.updateColumnParams({indexCol:this.columnId,params:t}),this.reset()},reset(){this.noMore=!1,this.resetColumn({indexCol:this.columnId}),this.$refs.recyclist.reset()},loadBefore(){var e=this;return Object(r["a"])((function*(){try{var t=yield e.refreshColumn({indexCol:e.columnId,mode:"before"});!1===t&&(e.noMore=!0)}catch(n){e.$toasted.global.apiError(n)}}))()},loadAfter(){try{return this.refreshColumn({indexCol:this.columnId,mode:"after"})}catch(e){this.$toasted.global.apiError(e)}},move(e){this.moveColumn({indexCol:this.columnId,dir:e})},close(){this.closeColumn({indexCol:this.columnId})},openParams(){var e=this;return Object(r["a"])((function*(){e.paramsOpen=!0,yield e.$nextTick(),e.$refs.search.focus()}))()},onQueryChange(e){var t=e.target.value;this.$ga.event("search","set query",t),this.updateParams({query:t})},onQueryFocus(e){e.target.setSelectionRange(e.target.value.length,e.target.value.length)}})},E=T,L=(n("3839"),n("6d95"),Object(k["a"])(E,f,g,!1,null,"729ef52e",null)),N=L.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn-container"},[n("button",{staticClass:"btn",attrs:{id:"new-column",name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"}),e._v(" "+e._s(e.$t("deck.add-column"))+" ")])])},F=[];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={name:"AddColumn",methods:q({},Object(_["e"])(["addColumn"]),{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},z=U,H=(n("da65"),Object(k["a"])(z,B,F,!1,null,"1ca59738",null)),R=H.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{attrs:{id:"sidebar",name:"appear",tag:"nav",appear:""}},[n("button",{key:"new-column",staticClass:"btn btn-circle btn-icon",attrs:{name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"})]),e.isAuthenticated?e._e():n("router-link",{key:"authenticate",staticClass:"btn btn-icon btn-circle danger",attrs:{to:{name:"login"},name:"authenticate","aria-label":"Authenticate",tag:"button"}},[n("i",{staticClass:"UI-icon UI-user-male"})]),n("router-link",{key:"about",staticClass:"btn btn-circle btn-icon",attrs:{to:{name:"about"},name:"about","aria-label":"about",tag:"button"}},[n("i",{staticClass:"UI-icon UI-heart icon-small"})])],1)},Y=[];function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q={name:"SideBar",computed:W({},Object(_["d"])(["isAuthenticated"])),methods:W({},Object(_["e"])(["addColumn"]),{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},G=Q,K=(n("ef09"),Object(k["a"])(G,V,Y,!1,null,"57a60094",null)),X=K.exports;function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te={name:"AutoRefreshVisibility",mounted(){this.visibilityChanged(),document.addEventListener("visibilitychange",this.visibilityChanged,!1)},beforeDestroy(){document.removeEventListener("visibilitychange",this.visibilityChanged,!1)},methods:ee({},Object(_["c"])(["refreshAllColumns"]),{visibilityChanged(){!0!==document.hidden&&(this.$root.$now=new Date,!1!==navigator.onLine&&this.refreshAllColumns())}})},ne={name:"AutoRefreshTimer",data(){return{autoRefreshTimer:null,autoRefreshDelay:1e4}},mounted(){this.startAutoRefresh()},beforeDestroy(){this.stopAutoRefresh()},methods:{startAutoRefresh(){var e=this;this.autoRefreshTimer=window.setInterval(Object(r["a"])((function*(){!0!==document.hidden&&(e.$root.$now=new Date,!1!==navigator.onLine&&(yield e.refreshAllColumns()))})),this.autoRefreshDelay)},stopAutoRefresh(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer)}}};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=a["default"].extend({name:"Deck",metaInfo:{titleTemplate:e=>e?"".concat(e," | AFP Deck"):"AFP Deck"},components:{Column:N,AddColumn:R,SideBar:X},mixins:[te,ne],computed:ae({},Object(_["f"])(["authType","columns"])),watch:{authType(e,t){"credentials"!==e&&"credentials"===t&&this.$router.push({name:"login",query:{redirect:this.$route.path}})}}}),se=oe,ie=(n("f9a6"),Object(k["a"])(se,m,p,!1,null,"6ebb6eac",null)),ce=ie.exports;function le(e){return e.includes(" ")?'"'.concat(e,'"'):e}a["default"].use(d["a"]);var ue=[{name:"deck",path:"/",component:ce,meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:c["a"].getters.isAuthenticated.toString()}}}},children:[{path:"doc",redirect:"/"},{name:"document",path:"doc/:docId",component:()=>n.e("viewer").then(n.bind(null,"f9ca")),props:!0,meta:{analytics:{pageviewTemplate(e){var t=c["a"].getters.getDocumentById(e.params.docId);if(t)return{title:t.headline,page:e.path,location:window.location.href,dimension1:t.product,dimension2:navigator.onLine.toString(),dimension3:c["a"].getters.isAuthenticated.toString()}}}}},{name:"slug",path:"slug/:slugs",beforeEnter:(e,t,n)=>{c["a"].commit("addColumn",{params:{query:e.params.slugs.split(",").map(e=>"slug:".concat(le(e))).join(" AND ")}}),n({name:"deck"})}},{name:"place",path:"place/:country/:city?",beforeEnter:(e,t,n)=>{c["a"].commit("addColumn",{params:{query:e.params.city?"country:".concat(le(e.params.country)," AND city:").concat(le(e.params.city)):"country:".concat(le(e.params.country))}}),n({name:"deck"})}},{name:"genre",path:"genre/:genre",beforeEnter:(e,t,n)=>{c["a"].commit("addColumn",{params:{query:"genre:".concat(le(e.params.genre))}}),n({name:"deck"})}},{name:"event",path:"event/:event",beforeEnter:(e,t,n)=>{c["a"].commit("addColumn",{params:{query:'event:"afpevent:'.concat(e.params.event,'"')}}),n({name:"deck"})}},{name:"creator",path:"creator/:creator",beforeEnter:(e,t,n)=>{c["a"].commit("addColumn",{params:{query:"creator:".concat(le(e.params.creator))}}),n({name:"deck"})}},{name:"login",path:"login",component:()=>n.e("login").then(n.bind(null,"a55b")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - Login",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:c["a"].getters.isAuthenticated.toString()}}}}},{name:"about",path:"about",component:()=>n.e("about").then(n.bind(null,"f820")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - About",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:c["a"].getters.isAuthenticated.toString()}}}}}]}],de=new d["a"]({routes:ue});a["default"].use(u.a,{id:"UA-127064867-1",disabled:!0,router:de,autoTracking:{pageviewOnLoad:!0,exception:!0},debug:{enabled:!1,sendHitTask:!0},anonymizeIp:!0,forceSSL:!0});var me=n("fe0b"),pe=n("6591"),he=n("c8b5"),fe=n.n(he);delete fe.a.defaults.cssProps.userSelect,fe.a.defaults.touchAction="pan-y",a["default"].use(pe["VueHammer"]);n("b814"),n("70cb");var ge=n("f2d6"),be=n.n(ge);a["default"].use(be.a);var ve,ye=new be.a({useVuex:!0}),Oe=n("9483");(Object(Oe["a"])("".concat("","sw.min.js"),{ready(){console.log("Service worker is active.")},registered(e){console.log("Service worker has been registered.")},cached(e){console.log("version has been cached for offline use.")},updatefound(e){console.log("New version is downloading.")},updated(e){console.log("New version is available; Ask for refresh."),a["default"].toasted.show("New version available !",{action:[{text:"Update",onClick:()=>{e.waiting.postMessage({command:"skipWaiting"})}}],position:"bottom-right"})},offline(){a["default"].toasted.show("No internet connection found. App is running in offline mode.",{position:"bottom-center",duration:1500})},error(e){a["default"].toasted.global.error(e)}}),"serviceWorker"in navigator)&&navigator.serviceWorker.addEventListener("controllerchange",Object(r["a"])((function*(){ve||(c["a"].commit("clearDocuments"),Object(l["event"])("service-worker","controllerchange"),window.location.reload(),ve=!0)})));function we(){return"serviceWorker"in navigator?navigator.serviceWorker.controller?"controlled":"supported":"unsupported"}Object(l["event"])("service-worker","support",we());var Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"night-mode":!e.useLightTheme},attrs:{id:"app"}},[n("router-view")],1)},je=[];function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Object(h["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=navigator.connection||navigator.mozConnection||navigator.webkitConnection,De={name:"CheckConnection",computed:ke({},Object(_["f"])(["isOnline"])),watch:{isOnline(e,t){!1===e?(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOff"),{duration:null,type:"info",position:"bottom-center"})):!1===t&&(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOn"),{duration:2e3,type:"info",position:"bottom-center"}))}},mounted(){if(!Pe)return!1;this.checkConnection(),Pe.addEventListener("change",this.checkConnection)},methods:ke({},Object(_["e"])(["setConnectivityStatus"]),{checkConnection(){var e=!0===navigator.onLine;this.setConnectivityStatus(e)}})},Se=n("e2b7"),Ae={name:"NightMode",data(){return{useLightTheme:!0}},mounted(){this.checkDayNight(),document.addEventListener("visibilitychange",this.checkDayNight,!1)},beforeDestroy(){document.removeEventListener("visibilitychange",this.checkDayNight,!1)},methods:{checkDayNight(){try{var e=Object(Se["a"])();if(e.error)throw new Error(e.error);this.useLightTheme=e.light}catch(n){console.error(n);var t=(new Date).getHours();this.useLightTheme=t>6&&t<20}}}},_e={name:"App",mixins:[De,Ae]},$e=_e,xe=(n("13a5"),n("fd80"),Object(k["a"])($e,Ce,je,!1,null,"56e4e561",null)),Te=xe.exports;function Ee(){new a["default"]({router:de,store:c["a"],i18n:me["a"],wait:ye,render:e=>e(Te)}).$mount("#app"),"deck"!==de.currentRoute.name||c["a"].getters.isAuthenticated||de.replace({name:"login"}),c["a"].getters.isAuthenticated&&a["default"].$ga.enable()}a["default"].config.productionTip=!1,a["default"].config.errorHandler=e=>{a["default"].toasted.global.error(e)},a["default"].config.warnHandler=e=>{a["default"].toasted.global.warn(e)},de.beforeEach(function(){var e=Object(r["a"])((function*(e,t,n){if("document"===e.name&&!c["a"].getters.getDocumentById(e.params.docId))try{yield c["a"].dispatch("getDocument",e.params.docId)}catch(r){return"credentials"!==c["a"].state.authType?n({name:"login",query:{redirect:"doc/".concat(e.params.docId)}}):n({name:"deck"})}n()}));return function(t,n,r){return e.apply(this,arguments)}}()),c["a"].dispatch("changeLocale",me["a"].locale),Object(c["b"])().then(Ee)},da65:function(e,t,n){"use strict";var r=n("52b8"),a=n.n(r);a.a},edd4:function(e){e.exports=JSON.parse('{"back-to-home":"Back to home","submit":"Submit","loading":"Loading...","install-app":"Add to home screen","deck":{"add-column":"Add a new column"},"column":{"search":"Search...","product":"Select content","lang":"Document language","urgency":"Category of news story","until":"Until","no-result":"No result","delete":"Delete the column","refresh":"Refresh ?","documents-gap":"Since your last visit, you missed 1 document. | Since your last visit, you missed {count} documents."},"about":{"title":"About AFP Deck","description":["AFP News Deck is a reader for AFP feeds. It allows you to find and read stories, multimedia articles and photos directly in your browser.","Made with love by the AFP Dataviz team, based on an original idea from the Medialab. Data is provided by the AFP Content API."],"version":"Version"},"auth":{"success":{"title":"You\'re logged in correctly.","description":"Enjoy AFP Deck !"},"logout":"Logout","clientId":"Client ID","clientSecret":"Client Secret","username":"Username","password":"Password","not-authenticated":{"title":"Log in to see the latest news","toast":"Good bye :)"},"cookies":"By continuing your navigation on this site, you consent to the use of anonymous cookies for statistical purposes.","warning-email":"Please use your username instead of your email address"},"products":{"all":"in all products","news":"in the news","multimedia":"in multimedia articles","photo":"in photos","infographie":"in graphics","videographie":"in videographics","video":"in videos"},"languages":{"all":"in all languages","en":"in english","fr":"in french","de":"in german","es":"in spanish","pt":"in portuguese","ar":"in arabic","zh-tw":"in traditionnal Chinese","zh-cn":"in simplified Chinese"},"urgencies":{"all":"All news stories","all-photos":"All photos","flash":"Only flashes","alertes":"include alerts","urgents":"include urgents","depeches":"All news stories","topshots":"Only topshots"},"connectivity":{"messageOff":"Your device is offline","messageOn":"You device is online again"},"dateTimeFormats":{"short":{"year":"numeric","month":"short","day":"numeric"},"long":{"year":"numeric","month":"short","day":"numeric","weekday":"short","hour":"numeric","minute":"numeric"}},"document":{"share":"Share","copied":"Copied in clipboard","read-more":"Full article:"}}')},ef09:function(e,t,n){"use strict";var r=n("561b"),a=n.n(r);a.a},f498:function(e,t,n){},f693:function(e){e.exports=JSON.parse('{"back-to-home":"Retour à l\'accueil","submit":"Valider","loading":"Chargement...","install-app":"Installer sur l\'écran d\'accueil","deck":{"add-column":"Ajouter une colonne"},"column":{"search":"Rechercher...","product":"Sélectionnez un produit","lang":"Sélectionnez une langue","urgency":"Sélectionnez une urgence","until":"Jusqu\'au","no-result":"Pas de résultats","delete":"Supprimer la colonne","refresh":"Rafraîchir ?","documents-gap":"Depuis votre dernière visite, vous avez manqué 1 document. | Depuis votre dernière visite, vous avez manqué {count} documents."},"about":{"title":"À propos d\'AFP Deck","description":["AFP News Deck permet de lire les dépêches, photos et vidéos diffusées par l\'AFP, directement dans votre navigateur.","Conçu par l\'équipe Dataviz de l\'AFP, sur une idée originale du Médialab. Les données proviennent de l\'API AFP."],"version":"Version"},"auth":{"success":{"title":"Vous êtes authentifié","description":"Profitez d\'AFP Deck !"},"logout":"Se déconnecter","clientId":"ID Client","clientSecret":"Secret Client","username":"Nom d\'utilisateur","password":"Mot de passe","not-authenticated":{"title":"Connectez-vous pour bénéficier des dernières nouvelles","toast":"À bientôt :)"},"cookies":"En poursuivant la navigation sur ce site, vous consentez à l\'utilisation de cookies anonymes à des fins statistiques.","warning-email":"SVP, utilisez votre nom d\'utilisateur et non votre adresse email"},"products":{"all":"dans tous les produits","news":"dans les dépêches","multimedia":"dans le fil multimédia","photo":"dans les photos","infographie":"dans les infographies","videographie":"dans les vidéographies","video":"dans les vidéos"},"languages":{"all":"dans toutes les langues","en":"en anglais","fr":"en français","de":"en allemand","es":"en espagnol","pt":"en portugais","ar":"en arabe","zh-tw":"en chinois traditionnel","zh-cn":"en chinois simplifié"},"urgencies":{"all":"Tout le contenu","all-photos":"Toutes les photos","flash":"Uniquement les flashs","alertes":"inclure les alertes","urgents":"inclure les urgents","depeches":"Tout le contenu","topshots":"Uniquement les topshots"},"connectivity":{"messageOff":"Votre appareil est hors connexion","messageOn":"Votre appareil est de nouveau connecté"},"dateTimeFormats":{"short":{"year":"numeric","month":"short","day":"numeric"},"long":{"year":"numeric","month":"short","day":"numeric","weekday":"short","hour":"numeric","minute":"numeric"}},"document":{"share":"Partager","copied":"Copié dans le presse-papier","read-more":"Article complet :"}}')},f9a6:function(e,t,n){"use strict";var r=n("c008"),a=n.n(r);a.a},fca5:function(e,t,n){var r={"./en":"edd4","./en.json":"edd4","./fr":"f693","./fr.json":"f693"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="fca5"},fd80:function(e,t,n){"use strict";var r=n("941a"),a=n.n(r);a.a},fe0b:function(e,t,n){"use strict";n.d(t,"b",(function(){return h}));n("e6cf");var r=n("15fd"),a=n("1da1"),o=n("2b0e"),s=n("a925");o["default"].use(s["a"]);var i=["en","fr"],c=i[0],l={[c]:n("fca5")("./".concat(c))},u={[c]:l[c].dateTimeFormats};function d(){var e=navigator.language&&navigator.language.substring(0,2);return!(!e||!i.includes(e))&&e}var m=new s["a"]({locale:d()||c,fallbackLocale:c,messages:l,dateTimeFormats:u});function p(e){m.locale=e;var t=document.querySelector("html");return t&&t.setAttribute("lang",e),e}function h(e){return f.apply(this,arguments)}function f(){return f=Object(a["a"])((function*(e){if(m.locale!==e||!m.messages[e]){var t=yield n("39c3")("./".concat(e,".json")),a=t.default,{dateTimeFormats:o}=a,s=Object(r["a"])(a,["dateTimeFormats"]);return m.setLocaleMessage(e,s),m.setDateTimeFormat(e,o),p(e)}return p(e)})),f.apply(this,arguments)}t["a"]=m}});
//# sourceMappingURL=app.e21d0197.js.map