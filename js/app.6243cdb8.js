(function(e){function t(t){for(var a,o,c=t[0],l=t[1],u=t[2],d=t[3]||[],m=0,p=[];m<c.length;m++)o=c[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);h&&h(t),r.push.apply(r,d);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==s[u]&&(a=!1)}a&&(i.splice(t--,1),e=l(l.s=n[0]))}return 0===i.length&&(r.forEach((function(e){if(void 0===s[e]){s[e]=null;var t=document.createElement("link");l.nc&&t.setAttribute("nonce",l.nc),t.rel="prefetch",t.as="script",t.href=c(e),document.head.appendChild(t)}})),r.length=0),e}var a={},o={app:0},s={app:0},i=[],r=[];function c(e){return l.p+"js/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"."+{about:"54c1dd70",login:"a3b8f629",viewer:"6071804e"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={about:1,login:1,viewer:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var a="css/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"."+{about:"9185636c",login:"be9cb64d",viewer:"da087b82"}[e]+".css",s=l.p+a,i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var c=i[r],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===s))return t()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){c=d[r],u=c.getAttribute("data-href");if(u===a||u===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete o[e],m.parentNode.removeChild(m),n(i)},m.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(m)})).then((function(){o[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=i);var r,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=c(e);var d=new Error;r=function(t){u.onerror=u.onload=null,clearTimeout(m);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,n[1](d)}s[e]=void 0}};var m=setTimeout((function(){r({type:"timeout",target:u})}),12e4);u.onerror=u.onload=r,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var m=0;m<u.length;m++)t(u[m]);var h=d,p=function(){return i.push([0,"chunk-vendors"]),n()}();t([[],{},0,["about","login","viewer"]])})({0:function(e,t,n){e.exports=n("cd49")},"049b":function(e,t,n){"use strict";var a=n("90a2"),o=n.n(a),s=n("0613");const i=new o.a({baseUrl:"https://afp-apicore-prod.afp.com",customAuthUrl:"https://3o3qoiah2e.execute-api.eu-central-1.amazonaws.com/ondeck",saveToken:e=>{e&&s["a"].commit("setToken",e)}});t["a"]=i},"0613":function(e,t,n){"use strict";n.d(t,"b",(function(){return P}));n("ddb0");var a=n("2b0e"),o=n("2f62");class s{constructor(){this.columns=[],this.documents=new Map,this.authType="unknown",this.isOnline=!0,this.displayInstallApp=!1,this.locale="fr"===Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_I18N_LOCALE?"fr":"en"}}var i=n("5530"),r={getDocumentById:e=>t=>e.documents.get(t),getColumnByIndex:e=>t=>e.columns[t],getDocumentsIdsByColumnId:(e,t)=>(e,n=!0)=>t.getColumnByIndex(e).documentsIds.filter(e=>n||!e.includes("documents-gap")),getDocumentsByColumnId:(e,t)=>(e,n=!0)=>t.getDocumentsIdsByColumnId(e,n).map(e=>t.getDocumentById(e)),isAnonymous(e){return"anonymous"===e.authType},isAuthenticated(e){return"credentials"===e.authType},getPreviousDocumentIdInColById:(e,t)=>(e,n)=>{const a=t.getDocumentsByColumnId(e,!1),o=a.findIndex(e=>e.uno===n),s=a[o+1];return s&&s.uno||!1},getNextDocumentIdInColById:(e,t)=>(e,n)=>{const a=t.getDocumentsByColumnId(e,!1),o=a.findIndex(e=>e.uno===n),s=a[o-1];return s&&s.uno||!1},getFirstDocumentInCol:(e,t)=>e=>{const n=t.getDocumentsIdsByColumnId(e,!1)[0];return t.getDocumentById(n)},getLastDocumentInCol:(e,t)=>e=>{const n=t.getDocumentsIdsByColumnId(e,!1).pop();return t.getDocumentById(n)},getRefreshParamsByMode:(e,t)=>(e,n)=>{switch(n){case"reset":return t.getColumnByIndex(e).params;case"before":const n=t.getLastDocumentInCol(e),a=new Date(n.published);return a.setSeconds(a.getSeconds()-1),Object(i["a"])(Object(i["a"])({},t.getColumnByIndex(e).params),{},{dateTo:a.toISOString()});case"after":const o=t.getFirstDocumentInCol(e),s=new Date(o.published);return s.setSeconds(s.getSeconds()+1),Object(i["a"])(Object(i["a"])({},t.getColumnByIndex(e).params),{},{dateFrom:s.toISOString()});default:throw new Error("Invalid mode")}}},c=(n("c975"),n("4e82"),n("a434"),n("049b")),l=n("ec26");function u(e){if(void 0===e)return;const t=new Date(e);return t instanceof Date&&!isNaN(t.valueOf())?t:void 0}class d{constructor(e){this.docSource=e}get headline(){const e=this.docSource.headline||this.docSource.title||this.docSource.news;return Array.isArray(e)?e.join(" - "):e}get embargoed(){return u(this.docSource.embargoed)}get published(){const e=u(this.docSource.published);if(!e)throw new Error(`Doc ${this.docSource.uno} doesn't contain a valid published date`);return e}get medias(){const e=this.docSource.bagItem;if(!e)return[];const t=this.docSource.entity_faces;let n;const a=e[0].medias.find(e=>"HighDef"===e.role);if(t&&t[0]&&a){const e=t[0].faces[0].offsetY;n=e/a.height}return e.map(e=>({sizes:e.medias.sort((e,t)=>e.width-t.width),creator:e.creator,provider:e.provider,caption:e.caption,source:e.source,uno:e.uno,faceYOffsetPercent:n}))}get genre(){if(this.docSource.genre)return!1===Array.isArray(this.docSource.genre)?this.docSource.genre:this.docSource.genre[0]}get event(){if(this.docSource.afpentity&&this.docSource.afpentity.event&&!1!==Array.isArray(this.docSource.afpentity.event)&&this.docSource.afpentity.event[0]&&this.docSource.afpentity.event[0].qcode&&this.docSource.afpentity.event[0].keyword)return{id:this.docSource.afpentity.event[0].qcode.split(":")[1],name:this.docSource.afpentity.event[0].keyword.split(" : ")[1]}}toObject(){return{uno:this.docSource.uno,headline:this.headline,published:this.published,embargoed:this.embargoed,lang:this.docSource.lang,product:this.docSource.product,urgency:this.docSource.urgency,news:this.docSource.news,slugs:this.docSource.slug,medias:this.medias,iptc:this.docSource.iptc,source:this.docSource.source,creator:this.docSource.creator,provider:this.docSource.provider,city:this.docSource.city,country:this.docSource.country,advisory:this.docSource.advisory,status:this.docSource.status,summary:this.docSource.summary,genre:this.genre,event:this.event}}}var m={addColumn(e,t){const n={id:Object(l["a"])(),params:Object.assign({},c["a"].defaultSearchParams,{products:["multimedia"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]};t&&t.params&&(t.params=Object.assign(n.params,t.params));const a=Object.assign({},n,t);e.columns.find(e=>e.id===a.id)||e.columns.push(a)},moveColumn(e,{indexCol:t,dir:n}){const a=e.columns.map(e=>e.id),o="left"===n?t-1:t+1,s=a[t];a.splice(t,1),a.splice(o,0,s),e.columns.sort((e,t)=>a.indexOf(e.id)-a.indexOf(t.id))},closeColumn(e,{indexCol:t}){e.columns=e.columns.filter((e,n)=>n!==t)},resetColumn(e,{indexCol:t}){e.columns[t].documentsIds=[]},updateColumnParams(e,{indexCol:t,params:n}){e.columns[t].params=n},setToken(e,t){e.authType=t.authType},unsetToken(e){e.authType="unknown"},addDocuments(e,t){t.map(e=>new d(e).toObject()).forEach(t=>e.documents.set(t.uno,t))},clearDocuments(e){e.columns.forEach(e=>{e.documentsIds=[]}),e.documents.clear()},prependDocumentsIdsToCol(e,{indexCol:t,documentsIds:n}){const a=e.columns[t].documentsIds,o=a.findIndex(e=>!e.includes("documents-gap"));o>0&&a.splice(0,o),e.columns[t].documentsIds=[...new Set(n.concat(a))]},appendDocumentsIdsToCol(e,{indexCol:t,documentsIds:n}){const a=e.columns[t].documentsIds;e.columns[t].documentsIds=[...new Set(a.concat(n))]},setConnectivityStatus(e,t){e.isOnline=t},setLocale(e,t){e.locale=t},resetState(e){Object.assign(e,new s)},displayInstallApp(e,t){e.displayInstallApp=t}},h=n("fe0b"),p=n("70cb");const f={async changeLocale({commit:e},t){await Object(h["b"])(t),Object(p["a"])(t),e("setLocale",t)},logout({commit:e,dispatch:t}){return e("unsetToken"),e("clearDocuments"),t("refreshAllColumns")},async authenticate({commit:e,dispatch:t},{username:n,password:o}={}){try{await c["a"].authenticate({username:n,password:o}),e("clearDocuments"),t("refreshAllColumns",{mode:"reset"})}catch(s){return a["default"].toasted.global.apiError(s),Promise.reject(s)}},async searchDocuments({commit:e,dispatch:t},n){try{t("wait/start","documents.search",{root:!0});const{documents:a}=await c["a"].search(n);return a?(e("addDocuments",a),a.map(e=>new d(e).toObject())):[]}finally{t("wait/end","documents.search",{root:!0})}},async refreshColumn({state:e,commit:t,dispatch:n,getters:a,rootGetters:o},{indexCol:s,mode:i}){if(!o["wait/is"]("column.refreshing."+e.columns[s].id))try{"reset"===i?t("resetColumn",{indexCol:s}):0===a.getDocumentsIdsByColumnId(s,!1).length&&(i="reset");const o=a.getRefreshParamsByMode(s,i);n("wait/start","column.refreshing."+e.columns[s].id,{root:!0});const{documents:r,count:l}=await c["a"].search(o);if(!r||0===r.length)return!1;t("addDocuments",r);const u=r.map(e=>e.uno);switch(i){case"reset":case"before":t("appendDocumentsIdsToCol",{indexCol:s,documentsIds:u});break;case"after":l>r.length&&u.push(`documents-gap|${+new Date}|${l-r.length}`),t("prependDocumentsIdsToCol",{indexCol:s,documentsIds:u});break;default:}return!0}finally{n("wait/end","column.refreshing."+e.columns[s].id,{root:!0})}},async refreshAllColumns({state:e,dispatch:t,rootGetters:n},{mode:o="after"}={}){if(!n["wait/is"]("column.refreshing.all"))try{t("wait/start","column.refreshing.all",{root:!0}),await Promise.all(e.columns.map((e,n)=>t("refreshColumn",{indexCol:n,mode:o})))}catch(s){a["default"].toasted.global.apiError(s)}finally{t("wait/end","column.refreshing.all",{root:!0})}},async getDocument({commit:e},t){try{const n=await c["a"].get(t);e("addDocuments",[n])}catch(n){return a["default"].toasted.global.apiError(n),Promise.reject(n)}}};var g=f,b=n("a002"),v=n.n(b);n("f79f"),n("a98c");const y={columns:"afpnews-deck-columns",token:"afpnews-deck-token",client:"afpnews-deck-client",clientId:"afpnews-deck-client-id",clientSecret:"afpnews-deck-client-secret",autoRefresh:"afpnews-deck-auto-refresh",locale:"afpnews-deck-locale"},w=v.a.createInstance({name:"userStore"}),C=v.a.createInstance({name:"documentsStore"}),I=async e=>{const t=await w.getItem(y.token);t&&(c["a"].token=t,e.commit("setToken",t))},k=e=>{e.subscribe(({type:e,payload:t},n)=>{switch(e){case"setToken":"credentials"===t.authType?w.setItem(y.token,t):w.removeItem(y.token);break;case"unsetToken":c["a"].resetToken(),w.removeItem(y.token);break;default:}})},O=async e=>{const[t,n]=await Promise.all([y.locale,y.columns].map(e=>w.getItem(e)));null!==t&&e.state.locale!==t&&await e.dispatch("changeLocale",t);const a=await C.getItems();e.commit("addDocuments",Object.values(a)),Array.isArray(n)&&n.length>0?n.forEach(t=>e.commit("addColumn",Object(i["a"])(Object(i["a"])({},t),{},{documentsIds:t.documentsIds.filter(e=>e.includes("documents-gap")||a[e])}))):(e.commit("addColumn",{id:Object(l["a"])(),params:Object.assign({},c["a"].defaultSearchParams,{products:["multimedia"],topics:["Monde"],langs:["fr"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]}),e.commit("addColumn",{id:Object(l["a"])(),params:Object.assign({},c["a"].defaultSearchParams,{products:["multimedia"],topics:["Politique"],langs:["fr"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]}),e.commit("addColumn",{id:Object(l["a"])(),params:Object.assign({},c["a"].defaultSearchParams,{products:["multimedia"],topics:["Economie/Finances","service-eco-fr"],langs:["fr"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]}))},S=e=>{e.subscribe(async({type:t,payload:n},a)=>{switch(t){case"setLocale":w.setItem(y.locale,n);break;case"addColumn":case"moveColumn":case"updateColumnParams":case"appendDocumentsIdsToCol":case"prependDocumentsIdsToCol":w.setItem(y.columns,a.columns);break;case"closeColumn":case"resetColumn":const t=[];t.concat.apply([],a.columns.map(e=>e.documentsIds));const o=await C.keys();o.filter(e=>!t.includes(e)).forEach(e=>C.removeItem(e)),w.setItem(y.columns,a.columns);break;case"resetState":w.clear(),C.clear(),e.commit("addColumn");break;case"clearDocuments":C.clear(),w.setItem(y.columns,a.columns);break;case"addDocuments":C.setItems(n.map(e=>({key:e.uno,value:e})));break;default:}})},$=e=>{e.subscribe(async({type:e},t)=>{switch(e){case"addColumn":await a["default"].nextTick();const e=document.querySelector(".column:last-of-type");e&&e.scrollIntoView({behavior:"smooth",block:"center"});break;default:}})};a["default"].use(o["b"]);const A=new o["a"]({state:new s,getters:r,mutations:m,actions:g,modules:{},plugins:[k,S,$],strict:!1});t["a"]=A;const P=async()=>{await Promise.all([I(A),O(A)])}},"0a3e":function(e,t,n){},"0acc":function(e,t,n){"use strict";n("66e3")},"13a5":function(e,t,n){"use strict";n("a13f")},"18e3":function(e,t,n){},"199e":function(e,t,n){},"39c3":function(e,t,n){var a={"./en.json":"edd4","./fr.json":"f693"};function o(e){return Promise.resolve().then((function(){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var o=a[e];return n.t(o,3)}))}o.keys=function(){return Object.keys(a)},o.id="39c3",e.exports=o},"3c4b":function(e,t,n){"use strict";n("7497")},"52b8":function(e,t,n){},"66e3":function(e,t,n){},"6d30":function(e,t,n){"use strict";n("dc4a")},"6d95":function(e,t,n){"use strict";n("199e")},"70cb":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("2b0e"),o=n("5a0c"),s=n.n(o),i=n("4208"),r=n.n(i);n("e5b7");s.a.extend(r.a);const c={install(e){e.filter("fromNow",(e,t)=>s()(e).from(s()(t)))}};function l(e){s.a.locale(e)}a["default"].use(c)},7497:function(e,t,n){},"7f9a0":function(e,t,n){"use strict";n("18e3")},"859f":function(e,t,n){},"941a":function(e,t,n){},a13f:function(e,t,n){},a798:function(e,t,n){"use strict";n("859f")},a90f:function(e,t,n){"use strict";n("0a3e")},ae8d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.doc?n("router-link",{staticClass:"article",class:{flash:1===e.doc.urgency,alerte:"photo"!==e.doc.product&&2===e.doc.urgency,urgent:"photo"!==e.doc.product&&3===e.doc.urgency,photo:"photo"===e.doc.product,multimedia:"multimedia"===e.doc.product,news:"news"===e.doc.product,video:["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product),canceled:"Canceled"===e.doc.status},attrs:{lang:e.doc.lang,dir:"ar"===e.doc.lang?"rtl":"ltr",to:{name:"document",params:{indexCol:e.indexCol,docId:e.docId}}}},[e.doc.medias.length>0&&e.doc.medias[0].sizes.some((function(e){return"Preview"===e.role||"HighDef"===e.role}))?n("div",{staticClass:"img-container",style:{backgroundImage:"url("+e.selectPreview(e.doc.medias[0].sizes).href+")",backgroundPosition:e.doc.medias[0].faceYOffsetPercent?"0px "+100*e.doc.medias[0].faceYOffsetPercent+"%":null}},[["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product)?n("i",{staticClass:"UI-icon UI-play-video"}):e._e()]):e._e(),n("div",{staticClass:"cols"},[e.doc.embargoed&&e.doc.embargoed>new Date?n("p",{key:"date-"+e.locale,staticClass:"date embargo"},[e._v(" Embargo : "+e._s(e._f("fromNow")(e.doc.embargoed,e.$root.$now))+" ")]):n("p",{key:"date-"+e.locale,staticClass:"date"},[e._v(" "+e._s(e._f("fromNow")(e.doc.published,e.$root.$now))+" ")]),"photo"===e.doc.product&&1===e.doc.urgency?n("p",{staticClass:"genre"},[e._v(" Topshot ")]):e.doc.genre?n("p",{staticClass:"genre"},[n("span",[e._v(" "+e._s(e.doc.genre)+" ")])]):e._e()]),"photo"!==e.doc.product?n("h2",[e._v(" "+e._s(e.doc.headline)+" ")]):e._e(),["news","multimedia"].includes(e.doc.product)&&e.doc.urgency>2&&e.doc.news&&e.doc.news[0]&&"Usable"===e.doc.status?n("p",{staticClass:"lead"},[e._v(" "+e._s(e.doc.news[0].substr(0,100)+"...")+" ")]):e._e()]):e._e()},o=[],s=n("5530"),i=n("2f62"),r={name:"Card",props:{docId:{type:String,required:!0},indexCol:{type:Number,required:!1,default:null}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["f"])(["locale"])),Object(i["d"])(["getDocumentById"])),{},{doc(){return this.getDocumentById(this.docId)}}),methods:{selectPreview(e){return e.find(e=>"Preview"===e.role)||e.find(e=>"HighDef"===e.role)}}},c=r,l=(n("7f9a0"),n("2877")),u=Object(l["a"])(c,a,o,!1,null,"fd7f99a2",null);t["a"]=u.exports},b814:function(e,t,n){"use strict";var a=n("0613"),o=n("0284");let s;window.addEventListener("beforeinstallprompt",e=>{s=e,a["a"].commit("displayInstallApp",!0),s.userChoice.then(({outcome:e})=>{"accepted"===e&&a["a"].commit("displayInstallApp",!1),Object(o["event"])("pwa","installation",e)})}),window.addEventListener("appinstalled",e=>{Object(o["event"])("pwa","installation","installed")}),t["a"]=()=>{s.prompt()}},c008:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("5319"),n("e6cf"),n("a79d");var a=n("2b0e"),o=(n("eb2f"),n("58ca"));a["default"].use(o["a"]);var s=n("a65d"),i=n.n(s),r=n("0613");a["default"].use(i.a),a["default"].toasted.register("error",e=>(console.error(e),e.message?"Oops.. "+e.message:"Oops.. Something went wrong.."),{type:"error",position:"bottom-center",duration:1500,singleton:!0}),a["default"].toasted.register("warn",e=>(console.warn(e),"Oops.. "+e),{type:"error",position:"bottom-center",duration:1500,singleton:!0}),a["default"].toasted.register("apiError",e=>(401===e.code?r["a"].dispatch("logout"):console.error(e),e.message?"Oops.. "+e.message:"Oops.. Something went wrong with the API.."),{type:"error",position:"bottom-center",duration:1e3,singleton:!0});var c=n("0284"),l=n.n(c),u=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("transition-group",{attrs:{id:"columns",name:"list",tag:"div"}},[e._l(e.columns,(function(e,t){return n("column",{key:"column-"+e.id,attrs:{"column-id":t}})})),n("add-column",{key:"add-column"})],2),n("side-bar"),n("router-view")],1)},m=[],h=n("5530"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"column"},[n("search-params",{attrs:{"column-id":e.columnId},on:{reset:e.reset,close:e.close,move:function(t){return e.move(t)}}}),n("recyclist",{ref:"recyclist",staticClass:"documents",attrs:{list:e.documents,size:10,offset:200,"is-loading":e.$wait.is("column.refreshing."+e.column.id),"no-more":e.noMore},on:{"load-top":e.loadAfter,"load-bottom":e.loadBefore},scopedSlots:e._u([{key:"tombstone",fn:function(){return[n("content-placeholders",{staticClass:"tombstone",attrs:{animated:!0,rounded:!0,centered:!1}},[n("content-placeholders-heading",{attrs:{img:!1}}),n("content-placeholders-img"),n("content-placeholders-text",{attrs:{lines:2}})],1)]},proxy:!0},{key:"item",fn:function(t){var a=t.data;return[a.includes("documents-gap")?n("div",{staticClass:"documents-gap"},[n("p",[e._v(" "+e._s(e.$tc("column.documents-gap",parseInt(a.split("|")[2]),{count:parseInt(a.split("|")[2])}))+" "),n("router-link",{attrs:{to:"/"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(" "+e._s(e.$t("column.refresh"))+" ")])],1)]):n("card",{attrs:{"doc-id":a,"index-col":e.columnId}})]}},{key:"nomore",fn:function(){return[n("span",[e._v(e._s(e.$t("column.no-result")))])]},proxy:!0}])})],1)},f=[],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[e.paramsOpen?n("div",{staticClass:"actions"},[n("button",{staticClass:"btn btn-icon",attrs:{name:"move-left","aria-label":"Move column to left"},on:{click:function(t){return e.$emit("move","left")}}},[n("i",{staticClass:"UI-icon UI-navigate-left"})]),n("button",{staticClass:"btn btn-icon margin-right-auto",attrs:{name:"move-right","aria-label":"Move column to right"},on:{click:function(t){return e.$emit("move","right")}}},[n("i",{staticClass:"UI-icon UI-navigate-right"})]),n("button",{staticClass:"btn btn-icon",attrs:{name:"close-params","aria-label":"Close column params"},on:{click:function(t){e.paramsOpen=!1}}},[n("i",{staticClass:"UI-icon UI-collapse"})])]):e._e(),n("div",{staticClass:"form-group inpt-icon"},[n("search-input",{attrs:{type:!0===e.paramsOpen?"search":"text","initial-query":e.params.query},on:{submit:e.onQueryChange}}),!1===e.paramsOpen?n("button",{staticClass:"btn btn-icon",attrs:{name:"expand","aria-label":"Open column params"},on:{click:function(t){e.paramsOpen=!0}}},[n("i",{staticClass:"UI-icon UI-expand icon-small"})]):e._e()],1),n("transition-group",{staticClass:"form",attrs:{name:"curtain",tabindex:"-1",tag:"div"}},[e.paramsOpen?n("select",{directives:[{name:"show",rawName:"v-show",value:e.languages.length>1,expression:"languages.length > 1"},{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],key:"lang",staticClass:"slct slct-large",attrs:{name:"lang","aria-label":"Select a language"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.lang=t.target.multiple?n:n[0]}}},e._l(e.languages,(function(t){var a=t.label,o=t.value,s=t.disabled;return n("option",{key:o.join("|"),attrs:{disabled:s},domProps:{value:o}},[e._v(" "+e._s(a)+" ")])})),0):e._e(),e.paramsOpen?n("select",{directives:[{name:"show",rawName:"v-show",value:e.topics.length>1,expression:"topics.length > 1"},{name:"model",rawName:"v-model",value:e.topic,expression:"topic"}],key:"topic",staticClass:"slct slct-large",attrs:{name:"topic","aria-label":"Select a topic"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.topic=t.target.multiple?n:n[0]}}},e._l(e.topics.filter((function(e){return!e.disabled})),(function(t){var a=t.label,o=t.value;return n("option",{key:o.join("|"),domProps:{value:o}},[e._v(" "+e._s(a)+" ")])})),0):e._e(),e.paramsOpen?n("button",{key:"close",staticClass:"btn btn-large danger",attrs:{name:"close","aria-label":"Delete the column"},on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("column.delete"))+" ")]):e._e()])],1)},b=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{ref:"search",staticClass:"search inpt inpt-large",attrs:{placeholder:e.$t("column.search"),"aria-label":e.$t("column.search"),type:e.type,autocomplete:"off",name:"query"},domProps:{value:e.initialQuery},on:{change:e.onQueryChange,focus:e.onQueryFocus}})},y=[],w=(n("049b"),{name:"SearchInput",components:{},props:{type:{type:String,required:!1,default:"search"},initialQuery:{type:String,required:!1,default:""}},data(){return{input:""}},computed:{},methods:{onQueryChange(e){const t=e.target.value;this.$emit("submit",t)},onQueryFocus(e){e.target.setSelectionRange(e.target.value.length,e.target.value.length)}}}),C=w,I=(n("3c4b"),n("2877")),k=Object(I["a"])(C,v,y,!1,null,null,null),O=k.exports,S=n("2f62"),$={name:"SearchParams",components:{SearchInput:O},props:{columnId:{type:Number,required:!0}},data(){return{paramsOpen:!1}},computed:Object(h["a"])(Object(h["a"])({},Object(S["d"])(["getColumnByIndex","isAuthenticated"])),{},{column(){return this.getColumnByIndex(this.columnId)},params(){return this.column.params},languages(){return[{label:this.$t("languages.all"),value:[],disabled:!1},{label:this.$t("languages.en"),value:["en"],disabled:!1},{label:this.$t("languages.fr"),value:["fr"],disabled:!1},{label:this.$t("languages.de"),value:["de"],disabled:!1},{label:this.$t("languages.es"),value:["es"],disabled:!1},{label:this.$t("languages.pt"),value:["pt"],disabled:!1},{label:this.$t("languages.ar"),value:["ar"],disabled:!1},{label:this.$t("languages.zh-tw"),value:["zh-tw"],disabled:!1},{label:this.$t("languages.zh-cn"),value:["zh-cn"],disabled:!1}]},lang:{get(){return this.params.langs},set(e){this.updateParams({langs:e,topics:[]})}},topics(){return"fr"===this.lang[0]?[{label:this.$t("topics.all","fr"),value:[]},{label:this.$t("topics.a-la-une","fr"),value:["La une"]},{label:this.$t("topics.derniere-minute","fr"),value:["Dernière Minute"]},{label:this.$t("topics.documentation","fr"),value:["Documentation"]},{label:this.$t("topics.monde","fr"),value:["Monde"]},{label:this.$t("topics.afrique","fr"),value:["Afrique"]},{label:this.$t("topics.politique","fr"),value:["Politique"]},{label:this.$t("topics.elections","fr"),value:["Elections"]},{label:this.$t("topics.faits-divers","fr"),value:["Faits-divers"]},{label:this.$t("topics.environnement","fr"),value:["Environnement/Météo","Environnement"]},{label:this.$t("topics.sport","fr"),value:["Sport"]},{label:this.$t("topics.football","fr"),value:["Football"]},{label:this.$t("topics.people","fr"),value:["People"]},{label:this.$t("topics.tech","fr"),value:["High Tech"]},{label:this.$t("topics.sciences","fr"),value:["Sciences"]},{label:this.$t("topics.insolite","fr"),value:["Insolite"]},{label:this.$t("topics.medias","fr"),value:["Médias"]},{label:this.$t("topics.sante","fr"),value:["Médecine/Santé"]},{label:this.$t("topics.mode-de-vie","fr"),value:["Société/Modes de vie"]},{label:this.$t("topics.art-de-vivre","fr"),value:["Culture/Art de vivre"]},{label:this.$t("topics.galerie-photos","fr"),value:["Galerie Photos"]},{label:this.$t("topics.galerie-photos-insolites","fr"),value:["Galerie Photos Insolites"]},{label:this.$t("topics.videographies","fr"),value:["Vidéographies"]},{label:this.$t("topics.videos-monde","fr"),value:["Vidéos Monde"]}]:"en"===this.lang[0]?[{label:this.$t("topics.all","en"),value:[]},{label:this.$t("topics.a-la-une","en"),value:["Top Stories"]},{label:this.$t("topics.derniere-minute","en"),value:["Breaking News"]},{label:this.$t("topics.documentation","en"),value:["Doc"]},{label:this.$t("topics.monde","en"),value:["International News"]},{label:this.$t("topics.us-news","en"),value:["US News"]},{label:this.$t("topics.us-politics"),value:["US Politics"]},{label:this.$t("topics.us-sports"),value:["US Sports"]},{label:this.$t("topics.uk-news"),value:["UK News"]},{label:this.$t("topics.middle-east","en"),value:["Middle East"]},{label:this.$t("topics.south-asia-news","en"),value:["South Asia News"]},{label:this.$t("topics.asia-business","en"),value:["Asia Business"]},{label:this.$t("topics.business-tech","en"),value:["Business and Tech"]},{label:this.$t("topics.science-environment","en"),value:["Science-Environment"]},{label:this.$t("topics.offbeat","en"),value:["Offbeat"]},{label:this.$t("topics.health-lifestyle","en"),value:["Health and Lifestyle"]},{label:this.$t("topics.sport","en"),value:["Sports"]},{label:this.$t("topics.cricket","en"),value:["Cricket"]},{label:this.$t("topics.football","en"),value:["Football"]},{label:this.$t("topics.olympics","en"),value:["Olympics"]},{label:this.$t("topics.people","en"),value:["People and Entertainment"]},{label:this.$t("topics.lifestyle","en"),value:["Lifestyle"]},{label:this.$t("topics.photo-gallery","en"),value:["Photo Gallery"]},{label:this.$t("topics.videographics","en"),value:["Videographics"]},{label:this.$t("topics.video-gallery","en"),value:["Video Gallery Complete"]}]:[{label:this.$t("topics.all"),value:[]}]},topic:{get(){return this.params.topics},set(e){this.updateParams({topics:e})}},query(){return this.params.query},dateTo:{get(){return this.params.dateTo},set(e){this.updateParams({dateTo:e})}}}),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(S["e"])(["updateColumnParams","openColumnSettings","closeColumnSettings"])),Object(S["c"])(["refreshColumn"])),{},{updateParams(e){const t=Object(h["a"])(Object(h["a"])({},this.params),e);this.updateColumnParams({indexCol:this.columnId,params:t}),this.$emit("reset")},onQueryChange(e){this.$ga.event("search","set query",e),this.updateParams({query:e})}})},A=$,P=(n("0acc"),Object(I["a"])(A,g,b,!1,null,"6ef1547f",null)),j=P.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-recyclist"},[n("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:e.height+"px"}},[e._l(e.visibleItems,(function(t,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.height>0,expression:"height > 0"}],key:a,staticClass:"vue-recyclist-item",style:{transform:"translate3d(0,"+t.top+"px,0)"}},[t.data?e._t("item",null,{data:t.data}):e._t("tombstone")],2)})),n("div",{staticClass:"vue-recyclist-pool"},[e._l(e.poolItems,(function(t,a){return n("div",{key:a,ref:t.data,refInFor:!0,staticClass:"vue-recyclist-item"},[e._t("item",null,{data:t.data})],2)})),0===e.tombHeight?n("div",{ref:"tomb",staticClass:"vue-recyclist-item"},[e._t("tombstone")],2):e._e()],2)],2),!e.isLoading&&e.noMore?n("div",{staticClass:"vue-recyclist-nomore"},[e._t("nomore",[n("div",[e._v("End of list")])])],2):e._e()])},T=[],_=(n("fb6a"),n("ddb0"),n("0342")),x=n.n(_);const E=[new x.a("Poppins",{weight:400,style:"normal",stretch:"normal"}),new x.a("Poppins",{weight:600,style:"normal",stretch:"normal"})];var F=()=>Promise.all(E.map(e=>e.load())),L={name:"Recyclist",props:{list:{type:Array,required:!0},size:{type:Number,default:20},offset:{type:Number,default:200},isLoading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1}},data(){return{items:[],height:0,start:0,containerHeight:0,tombHeight:0}},computed:{visibleItems(){return this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},poolItems(){return this.items.filter(e=>e.data&&!1===e.gotHeight)}},watch:{start(e,t){0===e&&t>e&&this.$emit("loadTop")},list(){this.loadList()},noMore(e){!0===e&&(this.items=this.items.filter(e=>e.data),this.updateItemTop())}},mounted(){this.$el.addEventListener("scroll",this.onScroll,{capture:!0,passive:!0}),this.tombHeight=this.$refs.tomb&&this.$refs.tomb.offsetHeight,this.containerHeight=this.$el&&this.$el.offsetHeight,this.list.length>0?(this.loadList(),this.list.length<this.size&&this.loadMoreItems()):this.loadMoreItems()},destroyed(){this.$el.removeEventListener("scroll",this.onScroll)},methods:{async reset(){this.items=[],this.height=this.start=this.$el.scrollTop=0,await this.$nextTick(),this.loadMoreItems()},async loadList(){this.items=this.list.map(this.renderItem),await F(),await this.$nextTick();for(let e=0;e<this.items.length;e++)this.updateItemHeight(e);this.updateItemTop()},async loadMoreItems(){if(this.noMore)return!1;const e=this.items.length+this.size;for(let t=this.items.length;t<e;t++)this.setItem(t,null);this.updateItemTop(),this.$emit("load-bottom")},setItem(e,t){this.$set(this.items,e,this.renderItem(t))},renderItem(e){return{data:e,top:0,height:this.tombHeight,gotHeight:!1}},updateItemTop(){this.height=0;for(let e=0;e<this.items.length;e++){const t=this.items[e-1];this.$set(this.items[e],"top",t?t.top+t.height:0),this.height+=this.items[e].height}this.updateIndex()},updateIndex(){const e=this.$el.scrollTop;for(let t=0;t<this.items.length;t++)if(this.items[t].top>e){this.start=Math.max(0,t-1);break}},updateItemHeight(e){const t=this.items[e];if(!t.data)return;const[n]=this.$refs[t.data];n&&(this.$set(this.items[e],"height",n.offsetHeight),this.$set(this.items[e],"gotHeight",n.offsetHeight>0))},onScroll(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.loadMoreItems(),this.updateIndex()}}},N=L,B=(n("a90f"),Object(I["a"])(N,D,T,!1,null,"47f9749e",null)),M=B.exports,V=n("967d"),q=n("ae8d"),U={name:"Column",components:{Card:q["a"],Recyclist:M,ContentPlaceholders:V["ContentPlaceholders"],ContentPlaceholdersHeading:V["ContentPlaceholdersHeading"],ContentPlaceholdersImg:V["ContentPlaceholdersImg"],ContentPlaceholdersText:V["ContentPlaceholdersText"],SearchParams:j},props:{columnId:{type:Number,required:!0}},data(){return{noMore:!1}},computed:Object(h["a"])(Object(h["a"])({},Object(S["d"])(["getColumnByIndex","getDocumentsIdsByColumnId","isAuthenticated"])),{},{column(){return this.getColumnByIndex(this.columnId)},documents(){return this.getDocumentsIdsByColumnId(this.columnId)},params(){return this.column.params}}),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(S["e"])(["resetColumn","moveColumn","closeColumn"])),Object(S["c"])(["refreshColumn"])),{},{reset(){this.noMore=!1,this.resetColumn({indexCol:this.columnId}),this.$refs.recyclist.reset()},async loadBefore(){try{const e=await this.refreshColumn({indexCol:this.columnId,mode:"before"});!1===e&&(this.noMore=!0)}catch(e){this.$toasted.global.apiError(e)}},loadAfter(){try{return this.refreshColumn({indexCol:this.columnId,mode:"after"})}catch(e){this.$toasted.global.apiError(e)}},move(e){this.moveColumn({indexCol:this.columnId,dir:e})},close(){this.closeColumn({indexCol:this.columnId})}})},z=U,H=(n("a798"),n("6d95"),Object(I["a"])(z,p,f,!1,null,"26739aaf",null)),R=H.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn-container"},[n("button",{staticClass:"btn",attrs:{id:"new-column",name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"}),e._v(" "+e._s(e.$t("deck.add-column"))+" ")])])},Q=[],Y={name:"AddColumn",methods:Object(h["a"])(Object(h["a"])({},Object(S["e"])(["addColumn"])),{},{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},J=Y,W=(n("da65"),Object(I["a"])(J,G,Q,!1,null,"1ca59738",null)),K=W.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{attrs:{id:"sidebar",name:"appear",tag:"nav",appear:""}},[n("button",{key:"new-column",staticClass:"btn btn-circle btn-icon",attrs:{name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"})]),e.isAuthenticated?e._e():n("router-link",{key:"authenticate",staticClass:"btn btn-icon btn-circle danger",attrs:{to:{name:"login"},name:"authenticate","aria-label":"Authenticate",tag:"button"}},[n("i",{staticClass:"UI-icon UI-user-male"})]),n("router-link",{key:"about",staticClass:"btn btn-circle btn-icon",attrs:{to:{name:"about"},name:"about","aria-label":"about",tag:"button"}},[n("i",{staticClass:"UI-icon UI-heart icon-small"})]),n("button",{key:"language",staticClass:"btn btn-circle btn-icon",attrs:{name:"language","aria-label":"Change language"},on:{click:e.changeLanguage}},[n("i",{staticClass:"UI-icon UI-flag icon-small info"})])],1)},Z=[],ee={name:"SideBar",computed:Object(h["a"])({},Object(S["d"])(["isAuthenticated"])),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(S["e"])(["addColumn"])),Object(S["c"])(["changeLocale"])),{},{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()},changeLanguage(){"en"==this.$store.state.locale?this.changeLocale("fr"):this.changeLocale("en")}})},te=ee,ne=(n("6d30"),Object(I["a"])(te,X,Z,!1,null,"58f9af7e",null)),ae=ne.exports,oe={name:"AutoRefreshVisibility",mounted(){this.visibilityChanged(),document.addEventListener("visibilitychange",this.visibilityChanged,!1)},beforeDestroy(){document.removeEventListener("visibilitychange",this.visibilityChanged,!1)},methods:Object(h["a"])(Object(h["a"])({},Object(S["c"])(["refreshAllColumns"])),{},{visibilityChanged(){!0!==document.hidden&&(this.$root.$now=new Date,!1!==navigator.onLine&&this.refreshAllColumns())}})},se={name:"AutoRefreshTimer",data(){return{autoRefreshTimer:null,autoRefreshDelay:1e4}},mounted(){this.startAutoRefresh()},beforeDestroy(){this.stopAutoRefresh()},methods:{startAutoRefresh(){this.autoRefreshTimer=window.setInterval(async()=>{!0!==document.hidden&&(this.$root.$now=new Date,!1!==navigator.onLine&&await this.refreshAllColumns())},this.autoRefreshDelay)},stopAutoRefresh(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer)}}},ie=a["default"].extend({name:"Deck",metaInfo:{titleTemplate:e=>e?e+" | AFP Deck":"AFP Deck"},components:{Column:R,AddColumn:K,SideBar:ae},mixins:[oe,se],computed:Object(h["a"])({},Object(S["f"])(["authType","columns"])),watch:{authType(e,t){"credentials"!==e&&"credentials"===t&&this.$router.push({name:"login",query:{redirect:this.$route.path}})}}}),re=ie,ce=(n("f9a6"),Object(I["a"])(re,d,m,!1,null,"6ebb6eac",null)),le=ce.exports;function ue(e){return e.includes(" ")?`"${e}"`:e}a["default"].use(u["a"]);const de=[{name:"deck",path:"/",component:le,meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}},children:[{path:"doc",redirect:"/"},{name:"document",path:"doc/:docId",component:()=>n.e("viewer").then(n.bind(null,"f9ca")),props:!0,meta:{analytics:{pageviewTemplate(e){const t=r["a"].getters.getDocumentById(e.params.docId);if(t)return{title:t.headline,page:e.path,location:window.location.href,dimension1:t.product,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}},{name:"slug",path:"slug/:slugs",beforeEnter:(e,t,n)=>{r["a"].commit("addColumn",{params:{query:e.params.slugs.split(",").map(e=>"slug:"+ue(e)).join(" AND ")}}),n({name:"deck"})}},{name:"place",path:"place/:country/:city?",beforeEnter:(e,t,n)=>{r["a"].commit("addColumn",{params:{query:e.params.city?`country:${ue(e.params.country)} AND city:${ue(e.params.city)}`:"country:"+ue(e.params.country)}}),n({name:"deck"})}},{name:"genre",path:"genre/:genre",beforeEnter:(e,t,n)=>{r["a"].commit("addColumn",{params:{query:"genre:"+ue(e.params.genre)}}),n({name:"deck"})}},{name:"event",path:"event/:event",beforeEnter:(e,t,n)=>{r["a"].commit("addColumn",{params:{query:`event:"afpevent:${e.params.event}"`}}),n({name:"deck"})}},{name:"creator",path:"creator/:creator",beforeEnter:(e,t,n)=>{r["a"].commit("addColumn",{params:{query:"creator:"+ue(e.params.creator)}}),n({name:"deck"})}},{name:"login",path:"login",component:()=>n.e("login").then(n.bind(null,"a55b")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - Login",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}},{name:"about",path:"about",component:()=>n.e("about").then(n.bind(null,"f820")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - About",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}}]}];var me=new u["a"]({routes:de});a["default"].use(l.a,{id:"UA-127064867-1",disabled:!0,router:me,autoTracking:{pageviewOnLoad:!0,exception:!0},debug:{enabled:!1,sendHitTask:!0},anonymizeIp:!0,forceSSL:!0});var he=n("fe0b"),pe=n("6591"),fe=n("c8b5"),ge=n.n(fe);delete ge.a.defaults.cssProps.userSelect,ge.a.defaults.touchAction="pan-y",a["default"].use(pe["VueHammer"]);n("b814"),n("70cb");var be=n("f2d6"),ve=n.n(be);a["default"].use(ve.a);var ye=new ve.a({useVuex:!0}),we=n("9483");if(Object(we["a"])("sw.min.js",{ready(){console.log("Service worker is active.")},registered(e){console.log("Service worker has been registered.")},cached(e){console.log("version has been cached for offline use.")},updatefound(e){console.log("New version is downloading.")},updated(e){console.log("New version is available; Ask for refresh."),a["default"].toasted.show("New version available !",{action:[{text:"Update",onClick:()=>{e.waiting.postMessage({command:"skipWaiting"})}}],position:"bottom-right"})},offline(){a["default"].toasted.show("No internet connection found. App is running in offline mode.",{position:"bottom-center",duration:1500})},error(e){a["default"].toasted.global.error(e)}}),"serviceWorker"in navigator){let e;navigator.serviceWorker.addEventListener("controllerchange",async()=>{e||(r["a"].commit("clearDocuments"),Object(c["event"])("service-worker","controllerchange"),window.location.reload(),e=!0)})}function Ce(){return"serviceWorker"in navigator?navigator.serviceWorker.controller?"controlled":"supported":"unsupported"}Object(c["event"])("service-worker","support",Ce());var Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"night-mode":!e.useLightTheme},attrs:{id:"app"}},[n("router-view")],1)},ke=[];const Oe=navigator.connection||navigator.mozConnection||navigator.webkitConnection;var Se={name:"CheckConnection",computed:Object(h["a"])({},Object(S["f"])(["isOnline"])),watch:{isOnline(e,t){!1===e?(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOff"),{duration:null,type:"info",position:"bottom-center"})):!1===t&&(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOn"),{duration:2e3,type:"info",position:"bottom-center"}))}},mounted(){if(!Oe)return!1;this.checkConnection(),Oe.addEventListener("change",this.checkConnection)},methods:Object(h["a"])(Object(h["a"])({},Object(S["e"])(["setConnectivityStatus"])),{},{checkConnection(){const e=!0===navigator.onLine;this.setConnectivityStatus(e)}})},$e=n("e2b7"),Ae={name:"NightMode",data(){return{useLightTheme:!0}},mounted(){this.checkDayNight(),document.addEventListener("visibilitychange",this.checkDayNight,!1)},beforeDestroy(){document.removeEventListener("visibilitychange",this.checkDayNight,!1)},methods:{checkDayNight(){try{const e=Object($e["a"])();if(e.error)throw new Error(e.error);this.useLightTheme=e.light}catch(e){console.error(e);const t=(new Date).getHours();this.useLightTheme=t>6&&t<20}}}},Pe={name:"App",mixins:[Se,Ae]},je=Pe,De=(n("13a5"),n("fd80"),Object(I["a"])(je,Ie,ke,!1,null,"56e4e561",null)),Te=De.exports;function _e(){new a["default"]({router:me,store:r["a"],i18n:he["a"],wait:ye,render:e=>e(Te)}).$mount("#app"),"deck"!==me.currentRoute.name||r["a"].getters.isAuthenticated||me.replace({name:"login"}),r["a"].getters.isAuthenticated&&a["default"].$ga.enable()}a["default"].config.productionTip=!1,a["default"].config.errorHandler=e=>{a["default"].toasted.global.error(e)},a["default"].config.warnHandler=e=>{a["default"].toasted.global.warn(e)},me.beforeEach(async(e,t,n)=>{if("document"===e.name&&!r["a"].getters.getDocumentById(e.params.docId))try{await r["a"].dispatch("getDocument",e.params.docId)}catch(a){return"credentials"!==r["a"].state.authType?n({name:"login",query:{redirect:"doc/"+e.params.docId}}):n({name:"deck"})}n()}),r["a"].dispatch("changeLocale",he["a"].locale),Object(r["b"])().then(_e)},da65:function(e,t,n){"use strict";n("52b8")},dc4a:function(e,t,n){},edd4:function(e){e.exports=JSON.parse('{"back-to-home":"Back to home","submit":"Submit","loading":"Loading...","install-app":"Add to home screen","deck":{"add-column":"Add a new column"},"column":{"search":"Search...","product":"Select content","lang":"Document language","urgency":"Category of news story","until":"Until","no-result":"No result","delete":"Delete the column","refresh":"Refresh ?","documents-gap":"Since your last visit, you missed 1 document. | Since your last visit, you missed {count} documents."},"about":{"title":"About AFP Deck","description":["AFP News Deck is a reader for AFP feeds. It allows you to find and read stories, multimedia articles and photos directly in your browser.","Made with love by the AFP Dataviz team, based on an original idea from the Medialab. Data is provided by the AFP Content API."],"version":"Version"},"auth":{"success":{"title":"You\'re logged in correctly.","description":"Enjoy AFP Deck !"},"logout":"Logout","clientId":"Client ID","clientSecret":"Client Secret","username":"Username","password":"Password","not-authenticated":{"title":"Log in to see the latest news","toast":"Good bye :)"},"cookies":"By continuing your navigation on this site, you consent to the use of anonymous cookies for statistical purposes.","warning-email":"Please use your username instead of your email address"},"products":{"all":"in all products","news":"in the news","multimedia":"in multimedia articles","photo":"in photos","infographie":"in graphics","videographie":"in videographics","video":"in videos"},"languages":{"all":"in all languages","en":"in english","fr":"in french","de":"in german","es":"in spanish","pt":"in portuguese","ar":"in arabic","zh-tw":"in traditionnal Chinese","zh-cn":"in simplified Chinese"},"urgencies":{"all":"All news stories","all-photos":"All photos","flash":"Only flashes","alertes":"include alerts","urgents":"include urgents","depeches":"All news stories","topshots":"Only topshots"},"topics":{"all":"All topics","a-la-une":"Top Stories","derniere-minute":"Breaking news","monde":"International news","us-news":"US News","us-politics":"US Politics","middle-east":"Middle East","asia-business":"Asia Business","business-tech":"Business and Tech","science-environment":"Science and Environment","health-lifestyle":"Health and Lifestyle","sport":"Sports","football":"Football","people":"People and Entertainment","documentation":"File","us-sports":"US Sports","uk-news":"UK News","south-asia-news":"South Asia News","offbeat":"Offbeat","cricket":"Cricket","olympics":"Olympics","lifestyle":"Lifestyle","photo-gallery":"Photo Gallery","videographics":"Videographics","video-gallery":"Video Gallery"},"connectivity":{"messageOff":"Your device is offline","messageOn":"You device is online again"},"dateTimeFormats":{"short":{"year":"numeric","month":"short","day":"numeric"},"long":{"year":"numeric","month":"short","day":"numeric","weekday":"short","hour":"numeric","minute":"numeric"}},"document":{"share":"Share","copied":"Copied in clipboard","read-more":"Full article:"}}')},f693:function(e){e.exports=JSON.parse('{"back-to-home":"Retour à l\'accueil","submit":"Valider","loading":"Chargement...","install-app":"Installer sur l\'écran d\'accueil","deck":{"add-column":"Ajouter une colonne"},"column":{"search":"Rechercher...","product":"Sélectionnez un produit","lang":"Sélectionnez une langue","urgency":"Sélectionnez une urgence","until":"Jusqu\'au","no-result":"Pas de résultats","delete":"Supprimer la colonne","refresh":"Rafraîchir ?","documents-gap":"Depuis votre dernière visite, vous avez manqué 1 document. | Depuis votre dernière visite, vous avez manqué {count} documents."},"about":{"title":"À propos d\'AFP Deck","description":["AFP News Deck permet de lire les dépêches, photos et vidéos diffusées par l\'AFP, directement dans votre navigateur.","Conçu par l\'équipe Dataviz de l\'AFP, sur une idée originale du Médialab. Les données proviennent de l\'API AFP."],"version":"Version"},"auth":{"success":{"title":"Vous êtes authentifié","description":"Profitez d\'AFP Deck !"},"logout":"Se déconnecter","clientId":"ID Client","clientSecret":"Secret Client","username":"Nom d\'utilisateur","password":"Mot de passe","not-authenticated":{"title":"Connectez-vous pour bénéficier des dernières nouvelles","toast":"À bientôt :)"},"cookies":"En poursuivant la navigation sur ce site, vous consentez à l\'utilisation de cookies anonymes à des fins statistiques.","warning-email":"SVP, utilisez votre nom d\'utilisateur et non votre adresse email"},"products":{"all":"dans tous les produits","news":"dans les dépêches","multimedia":"dans le fil multimédia","photo":"dans les photos","infographie":"dans les infographies","videographie":"dans les vidéographies","video":"dans les vidéos"},"languages":{"all":"dans toutes les langues","en":"en anglais","fr":"en français","de":"en allemand","es":"en espagnol","pt":"en portugais","ar":"en arabe","zh-tw":"en chinois traditionnel","zh-cn":"en chinois simplifié"},"urgencies":{"all":"Tout le contenu","all-photos":"Toutes les photos","flash":"Uniquement les flashs","alertes":"inclure les alertes","urgents":"inclure les urgents","depeches":"Tout le contenu","topshots":"Uniquement les topshots"},"topics":{"all":"Tous les sujets","a-la-une":"A la une","derniere-minute":"Dernière minute","monde":"Monde","afrique":"Afrique","politique":"Politique","faits-divers":"Faits divers","economie":"Economie","environnement":"Environnement","sport":"Sport","football":"Football","people":"People","insolite":"Insolite","medias":"Médias","sante":"Santé","mode-de-vie":"Modes de vie","art-de-vivre":"Art de vivre","documentation":"Documentation","galerie-photos":"Galerie photo","galerie-photos-insolites":"Photos insolites","videographies":"Vidéographies","videos-monde":"Vidéos monde","elections":"Elections","sciences":"Sciences","tech":"Technologies"},"connectivity":{"messageOff":"Votre appareil est hors connexion","messageOn":"Votre appareil est de nouveau connecté"},"dateTimeFormats":{"short":{"year":"numeric","month":"short","day":"numeric"},"long":{"year":"numeric","month":"short","day":"numeric","weekday":"short","hour":"numeric","minute":"numeric"}},"document":{"share":"Partager","copied":"Copié dans le presse-papier","read-more":"Article complet :"}}')},f9a6:function(e,t,n){"use strict";n("c008")},fca5:function(e,t,n){var a={"./en":"edd4","./en.json":"edd4","./fr":"f693","./fr.json":"f693"};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=s,e.exports=o,o.id="fca5"},fd80:function(e,t,n){"use strict";n("941a")},fe0b:function(e,t,n){"use strict";n.d(t,"b",(function(){return h}));var a=n("15fd"),o=n("2b0e"),s=n("a925");o["default"].use(s["a"]);const i=["en","fr"],r=i[0],c={[r]:n("fca5")("./"+r)},l={[r]:c[r].dateTimeFormats};function u(){const e=navigator.language&&navigator.language.substring(0,2);return!(!e||!i.includes(e))&&e}const d=new s["a"]({locale:u()||r,fallbackLocale:r,messages:c,dateTimeFormats:l});function m(e){d.locale=e;const t=document.querySelector("html");return t&&t.setAttribute("lang",e),e}async function h(e){if(d.locale!==e||!d.messages[e]){const t=await n("39c3")(`./${e}.json`),o=t.default,{dateTimeFormats:s}=o,i=Object(a["a"])(o,["dateTimeFormats"]);return d.setLocaleMessage(e,i),d.setDateTimeFormat(e,s),m(e)}return m(e)}t["a"]=d}});
//# sourceMappingURL=app.6243cdb8.js.map