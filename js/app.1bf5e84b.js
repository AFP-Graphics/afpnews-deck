(function(e){function t(t){for(var n,s,l=t[0],c=t[1],u=t[2],d=t[3]||[],m=0,p=[];m<l.length;m++)s=l[m],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);h&&h(t),r.push.apply(r,d);while(p.length)p.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var u=a[s];0!==o[u]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=a[0]))}return 0===i.length&&(r.forEach((function(e){if(void 0===o[e]){o[e]=null;var t=document.createElement("link");c.nc&&t.setAttribute("nonce",c.nc),t.rel="prefetch",t.as="script",t.href=l(e),document.head.appendChild(t)}})),r.length=0),e}var n={},s={app:0},o={app:0},i=[],r=[];function l(e){return c.p+"js/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"."+{about:"347bae11",login:"97e8a66d",viewer:"b9e0c41b"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={about:1,login:1,viewer:1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var n="css/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"."+{about:"7a05a70a",login:"e5fa26fb",viewer:"86ed01af"}[e]+".css",o=c.p+n,i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var l=i[r],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===o))return t()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){l=d[r],u=l.getAttribute("data-href");if(u===n||u===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete s[e],m.parentNode.removeChild(m),a(i)},m.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(m)})).then((function(){s[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,a){n=o[e]=[t,a]}));t.push(n[2]=i);var r,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=l(e);var d=new Error;r=function(t){u.onerror=u.onload=null,clearTimeout(m);var a=o[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",d.name="ChunkLoadError",d.type=n,d.request=s,a[1](d)}o[e]=void 0}};var m=setTimeout((function(){r({type:"timeout",target:u})}),12e4);u.onerror=u.onload=r,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var m=0;m<u.length;m++)t(u[m]);var h=d,p=function(){return i.push([0,"chunk-vendors"]),a()}();t([[],{},0,["about","login","viewer"]])})({0:function(e,t,a){e.exports=a("cd49")},"049b":function(e,t,a){"use strict";var n=a("90a2"),s=a.n(n),o=a("0613");const i=new s.a({baseUrl:"https://afp-apicore-prod.afp.com",customAuthUrl:"https://3o3qoiah2e.execute-api.eu-central-1.amazonaws.com/ondeck",saveToken:e=>{e&&o["a"].commit("setToken",e)}});t["a"]=i},"0613":function(e,t,a){"use strict";a.d(t,"b",(function(){return P}));a("ddb0");var n=a("2b0e"),s=a("2f62");class o{constructor(){this.columns=[],this.documents=new Map,this.authType="unknown",this.isOnline=!0,this.displayInstallApp=!1,this.locale="fr"===Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_I18N_LOCALE?"fr":"en"}}var i=a("5530"),r={getDocumentById:e=>t=>e.documents.get(t),getColumnByIndex:e=>t=>e.columns[t],getDocumentsIdsByColumnId:(e,t)=>(e,a=!0)=>t.getColumnByIndex(e).documentsIds.filter(e=>a||!e.includes("documents-gap")),getDocumentsByColumnId:(e,t)=>(e,a=!0)=>t.getDocumentsIdsByColumnId(e,a).map(e=>t.getDocumentById(e)),isAnonymous(e){return"anonymous"===e.authType},isAuthenticated(e){return"credentials"===e.authType},getPreviousDocumentIdInColById:(e,t)=>(e,a)=>{const n=t.getDocumentsByColumnId(e,!1),s=n.findIndex(e=>e.uno===a),o=n[s+1];return o&&o.uno||!1},getNextDocumentIdInColById:(e,t)=>(e,a)=>{const n=t.getDocumentsByColumnId(e,!1),s=n.findIndex(e=>e.uno===a),o=n[s-1];return o&&o.uno||!1},getFirstDocumentInCol:(e,t)=>e=>{const a=t.getDocumentsIdsByColumnId(e,!1)[0];return t.getDocumentById(a)},getLastDocumentInCol:(e,t)=>e=>{const a=t.getDocumentsIdsByColumnId(e,!1).pop();return t.getDocumentById(a)},getRefreshParamsByMode:(e,t)=>(e,a)=>{switch(a){case"reset":return t.getColumnByIndex(e).params;case"before":const a=t.getLastDocumentInCol(e),n=new Date(a.published);return n.setSeconds(n.getSeconds()-1),Object(i["a"])(Object(i["a"])({},t.getColumnByIndex(e).params),{},{dateTo:n.toISOString()});case"after":const s=t.getFirstDocumentInCol(e),o=new Date(s.published);return o.setSeconds(o.getSeconds()+1),Object(i["a"])(Object(i["a"])({},t.getColumnByIndex(e).params),{},{dateFrom:o.toISOString()});default:throw new Error("Invalid mode")}}},l=(a("c975"),a("4e82"),a("a434"),a("049b")),c=a("ec26");function u(e){if(void 0===e)return;const t=new Date(e);return t instanceof Date&&!isNaN(t.valueOf())?t:void 0}class d{constructor(e){this.docSource=e}get headline(){const e=this.docSource.headline||this.docSource.title||this.docSource.news;return Array.isArray(e)?e.join(" - "):e}get embargoed(){return u(this.docSource.embargoed)}get published(){const e=u(this.docSource.published);if(!e)throw new Error(`Doc ${this.docSource.uno} doesn't contain a valid published date`);return e}get medias(){const e=this.docSource.bagItem;if(!e)return[];const t=this.docSource.entity_faces;let a;const n=e[0].medias.find(e=>"HighDef"===e.role);if(t&&t[0]&&n){const e=t[0].faces[0].offsetY;a=e/n.height}return e.map(e=>({sizes:e.medias.sort((e,t)=>e.width-t.width),creator:e.creator,provider:e.provider,caption:e.caption,source:e.source,uno:e.uno,faceYOffsetPercent:a}))}get genre(){if(this.docSource.genre)return!1===Array.isArray(this.docSource.genre)?this.docSource.genre:this.docSource.genre[0]}get event(){if(this.docSource.afpentity&&this.docSource.afpentity.event&&!1!==Array.isArray(this.docSource.afpentity.event)&&this.docSource.afpentity.event[0]&&this.docSource.afpentity.event[0].qcode&&this.docSource.afpentity.event[0].keyword)return{id:this.docSource.afpentity.event[0].qcode.split(":")[1],name:this.docSource.afpentity.event[0].keyword.split(" : ")[1]}}toObject(){return{uno:this.docSource.uno,headline:this.headline,published:this.published,embargoed:this.embargoed,lang:this.docSource.lang,product:this.docSource.product,urgency:this.docSource.urgency,news:this.docSource.news,slugs:this.docSource.slug,medias:this.medias,iptc:this.docSource.iptc,source:this.docSource.source,creator:this.docSource.creator,provider:this.docSource.provider,city:this.docSource.city,country:this.docSource.country,advisory:this.docSource.advisory,status:this.docSource.status,summary:this.docSource.summary,genre:this.genre,event:this.event}}}var m={addColumn(e,t){const a={id:Object(c["a"])(),params:Object.assign({},l["a"].defaultSearchParams,{products:["multimedia"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]};t&&t.params&&(t.params=Object.assign(a.params,t.params));const n=Object.assign({},a,t);e.columns.find(e=>e.id===n.id)||e.columns.push(n)},moveColumn(e,{indexCol:t,dir:a}){const n=e.columns.map(e=>e.id),s="left"===a?t-1:t+1,o=n[t];n.splice(t,1),n.splice(s,0,o),e.columns.sort((e,t)=>n.indexOf(e.id)-n.indexOf(t.id))},closeColumn(e,{indexCol:t}){e.columns=e.columns.filter((e,a)=>a!==t)},resetColumn(e,{indexCol:t}){e.columns[t].documentsIds=[]},updateColumnParams(e,{indexCol:t,params:a}){e.columns[t].params=a},setToken(e,t){e.authType=t.authType},unsetToken(e){e.authType="unknown"},addDocuments(e,t){t.map(e=>new d(e).toObject()).forEach(t=>e.documents.set(t.uno,t))},clearDocuments(e){e.columns.forEach(e=>{e.documentsIds=[]}),e.documents.clear()},prependDocumentsIdsToCol(e,{indexCol:t,documentsIds:a}){const n=e.columns[t].documentsIds,s=n.findIndex(e=>!e.includes("documents-gap"));s>0&&n.splice(0,s),e.columns[t].documentsIds=[...new Set(a.concat(n))]},appendDocumentsIdsToCol(e,{indexCol:t,documentsIds:a}){const n=e.columns[t].documentsIds;e.columns[t].documentsIds=[...new Set(n.concat(a))]},setConnectivityStatus(e,t){e.isOnline=t},setLocale(e,t){e.locale=t},resetState(e){Object.assign(e,new o)},displayInstallApp(e,t){e.displayInstallApp=t},resetAllColumns(e){e.columns=[]}},h=a("fe0b"),p=a("70cb");const g={async changeLocale({commit:e},t){await Object(h["b"])(t),Object(p["a"])(t),e("setLocale",t)},logout({commit:e,dispatch:t}){return e("unsetToken"),e("clearDocuments"),t("refreshAllColumns")},async authenticate({commit:e,dispatch:t},{username:a,password:s}={}){try{await l["a"].authenticate({username:a,password:s}),e("clearDocuments"),t("refreshAllColumns",{mode:"reset"})}catch(o){return n["default"].toasted.global.apiError(o),Promise.reject(o)}},async searchDocuments({commit:e,dispatch:t},a){try{t("wait/start","documents.search",{root:!0});const{documents:n}=await l["a"].search(a);return n?(e("addDocuments",n),n.map(e=>new d(e).toObject())):[]}finally{t("wait/end","documents.search",{root:!0})}},async refreshColumn({state:e,commit:t,dispatch:a,getters:n,rootGetters:s},{indexCol:o,mode:i}){if(!s["wait/is"]("column.refreshing."+e.columns[o].id))try{"reset"===i?t("resetColumn",{indexCol:o}):0===n.getDocumentsIdsByColumnId(o,!1).length&&(i="reset");const s=n.getRefreshParamsByMode(o,i);a("wait/start","column.refreshing."+e.columns[o].id,{root:!0});const{documents:r,count:c}=await l["a"].search(s);if(!r||0===r.length)return!1;t("addDocuments",r);const u=r.map(e=>e.uno);switch(i){case"reset":case"before":t("appendDocumentsIdsToCol",{indexCol:o,documentsIds:u});break;case"after":c>r.length&&u.push(`documents-gap|${+new Date}|${c-r.length}`),t("prependDocumentsIdsToCol",{indexCol:o,documentsIds:u});break;default:}return!0}finally{a("wait/end","column.refreshing."+e.columns[o].id,{root:!0})}},async refreshAllColumns({state:e,dispatch:t,rootGetters:a},{mode:s="after"}={}){if(!a["wait/is"]("column.refreshing.all"))try{t("wait/start","column.refreshing.all",{root:!0}),await Promise.all(e.columns.map((e,a)=>t("refreshColumn",{indexCol:a,mode:s})))}catch(o){n["default"].toasted.global.apiError(o)}finally{t("wait/end","column.refreshing.all",{root:!0})}},async getDocument({commit:e},t){try{const a=await l["a"].get(t);e("addDocuments",[a])}catch(a){return n["default"].toasted.global.apiError(a),Promise.reject(a)}}};var f=g,b=a("a002"),v=a.n(b);a("f79f"),a("a98c");const y={columns:"afpnews-deck-columns",token:"afpnews-deck-token",client:"afpnews-deck-client",clientId:"afpnews-deck-client-id",clientSecret:"afpnews-deck-client-secret",autoRefresh:"afpnews-deck-auto-refresh",locale:"afpnews-deck-locale"},w=v.a.createInstance({name:"userStore"}),C=v.a.createInstance({name:"documentsStore"}),I=async e=>{const t=await w.getItem(y.token);t&&(l["a"].token=t,e.commit("setToken",t))},k=e=>{e.subscribe(({type:e,payload:t},a)=>{switch(e){case"setToken":"credentials"===t.authType?w.setItem(y.token,t):w.removeItem(y.token);break;case"unsetToken":l["a"].resetToken(),w.removeItem(y.token);break;default:}})},O=async e=>{const[t,a]=await Promise.all([y.locale,y.columns].map(e=>w.getItem(e)));null!==t&&e.state.locale!==t&&await e.dispatch("changeLocale",t);const n=await C.getItems();e.commit("addDocuments",Object.values(n)),Array.isArray(a)&&a.length>0?a.forEach(t=>e.commit("addColumn",Object(i["a"])(Object(i["a"])({},t),{},{documentsIds:t.documentsIds.filter(e=>e.includes("documents-gap")||n[e])}))):(e.commit("addColumn",{id:Object(c["a"])(),params:Object.assign({},l["a"].defaultSearchParams,{products:["multimedia"],topics:["Monde"],langs:["fr"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]}),e.commit("addColumn",{id:Object(c["a"])(),params:Object.assign({},l["a"].defaultSearchParams,{products:["multimedia"],topics:["Politique"],langs:["fr"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]}),e.commit("addColumn",{id:Object(c["a"])(),params:Object.assign({},l["a"].defaultSearchParams,{products:["multimedia"],topics:["Economie/Finances","service-eco-fr"],langs:["fr"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]}))},S=e=>{e.subscribe(async({type:t,payload:a},n)=>{switch(t){case"setLocale":w.setItem(y.locale,a);break;case"addColumn":case"moveColumn":case"updateColumnParams":case"appendDocumentsIdsToCol":case"prependDocumentsIdsToCol":w.setItem(y.columns,n.columns);break;case"closeColumn":case"resetColumn":const t=[];t.concat.apply([],n.columns.map(e=>e.documentsIds));const s=await C.keys();s.filter(e=>!t.includes(e)).forEach(e=>C.removeItem(e)),w.setItem(y.columns,n.columns);break;case"resetState":w.clear(),C.clear(),e.commit("addColumn");break;case"clearDocuments":C.clear(),w.setItem(y.columns,n.columns);break;case"addDocuments":C.setItems(a.map(e=>({key:e.uno,value:e})));break;default:}})},$=e=>{e.subscribe(async({type:e},t)=>{switch(e){case"addColumn":await n["default"].nextTick();const e=document.querySelector(".column:last-of-type");e&&e.scrollIntoView({behavior:"smooth",block:"end"});break;default:}})};n["default"].use(s["b"]);const A=new s["a"]({state:new o,getters:r,mutations:m,actions:f,modules:{},plugins:[k,S,$],strict:!1});t["a"]=A;const P=async()=>{await Promise.all([I(A),O(A)])}},"0a3e":function(e,t,a){},"0acc":function(e,t,a){"use strict";a("66e3")},"13a5":function(e,t,a){"use strict";a("a13f")},"151d":function(e,t,a){},"18e3":function(e,t,a){},"199e":function(e,t,a){},2476:function(e,t,a){},"2d16":function(e,t,a){"use strict";a("8c35")},"39c3":function(e,t,a){var n={"./en.json":"edd4","./fr.json":"f693"};function s(e){return Promise.resolve().then((function(){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var s=n[e];return a.t(s,3)}))}s.keys=function(){return Object.keys(n)},s.id="39c3",e.exports=s},"3c4b":function(e,t,a){"use strict";a("7497")},4820:function(e,t,a){"use strict";a("151d")},"52b8":function(e,t,a){},"52c7":function(e,t,a){},5365:function(e,t,a){e.exports=a.p+"img/afp_logo.346ca232.png"},5593:function(e){e.exports=JSON.parse('{"fr":[{"label":"Tous les sujets","value":[]},{"label":"A la une","value":["La une"]},{"label":"Dernière minute","value":["Dernière Minute"]}],"en":[{"label":"All topics","value":[]},{"label":"Top Stories","value":["Top Stories"]},{"label":"Breaking news","value":["Breaking News"]}]}')},"66e3":function(e,t,a){},"6d95":function(e,t,a){"use strict";a("199e")},"70cb":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("2b0e"),s=a("5a0c"),o=a.n(s),i=a("4208"),r=a.n(i);a("e5b7");o.a.extend(r.a);const l={install(e){e.filter("fromNow",(e,t)=>o()(e).from(o()(t)))}};function c(e){o.a.locale(e)}n["default"].use(l)},7497:function(e,t,a){},"7f9a0":function(e,t,a){"use strict";a("18e3")},"859f":function(e,t,a){},"8a50":function(e,t,a){},"8c35":function(e,t,a){},"8d01":function(e,t,a){"use strict";a("52c7")},a13f:function(e,t,a){},a798:function(e,t,a){"use strict";a("859f")},a8eb:function(e,t,a){"use strict";a("8a50")},a90f:function(e,t,a){"use strict";a("0a3e")},ada6:function(e,t,a){"use strict";a("2476")},ae8d:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.doc?a("router-link",{staticClass:"article",class:{flash:1===e.doc.urgency,alerte:"photo"!==e.doc.product&&2===e.doc.urgency,urgent:"photo"!==e.doc.product&&3===e.doc.urgency,photo:"photo"===e.doc.product,multimedia:"multimedia"===e.doc.product,news:"news"===e.doc.product,video:["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product),canceled:"Canceled"===e.doc.status},attrs:{lang:e.doc.lang,dir:"ar"===e.doc.lang?"rtl":"ltr",to:{name:"document",params:{indexCol:e.indexCol,docId:e.docId}}}},[e.doc.medias.length>0&&e.doc.medias[0].sizes.some((function(e){return"Preview"===e.role||"HighDef"===e.role}))?a("div",{staticClass:"img-container",style:{backgroundImage:"url("+e.selectPreview(e.doc.medias[0].sizes).href+")",backgroundPosition:e.doc.medias[0].faceYOffsetPercent?"0px "+100*e.doc.medias[0].faceYOffsetPercent+"%":null}},[["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product)?a("i",{staticClass:"UI-icon UI-play-video"}):e._e()]):e._e(),a("div",{staticClass:"cols"},[e.doc.embargoed&&e.doc.embargoed>new Date?a("p",{key:"date-"+e.locale,staticClass:"date embargo"},[e._v(" Embargo : "+e._s(e._f("fromNow")(e.doc.embargoed,e.$root.$now))+" ")]):a("p",{key:"date-"+e.locale,staticClass:"date"},[e._v(" "+e._s(e._f("fromNow")(e.doc.published,e.$root.$now))+" ")]),"photo"===e.doc.product&&1===e.doc.urgency?a("p",{staticClass:"genre"},[e._v(" Topshot ")]):e.doc.genre?a("p",{staticClass:"genre"},[a("span",[e._v(" "+e._s(e.doc.genre)+" ")])]):e._e()]),"photo"!==e.doc.product?a("h2",[e._v(" "+e._s(e.doc.headline)+" ")]):e._e(),["news","multimedia"].includes(e.doc.product)&&e.doc.urgency>2&&e.doc.news&&e.doc.news[0]&&"Usable"===e.doc.status?a("p",{staticClass:"lead"},[e._v(" "+e._s(e.doc.news[0].substr(0,100)+"...")+" ")]):e._e()]):e._e()},s=[],o=a("5530"),i=a("2f62"),r={name:"Card",props:{docId:{type:String,required:!0},indexCol:{type:Number,required:!1,default:null}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["f"])(["locale"])),Object(i["d"])(["getDocumentById"])),{},{doc(){return this.getDocumentById(this.docId)}}),methods:{selectPreview(e){return e.find(e=>"Preview"===e.role)||e.find(e=>"HighDef"===e.role)}}},l=r,c=(a("7f9a0"),a("2877")),u=Object(c["a"])(l,n,s,!1,null,"fd7f99a2",null);t["a"]=u.exports},b814:function(e,t,a){"use strict";var n=a("0613"),s=a("0284");let o;window.addEventListener("beforeinstallprompt",e=>{o=e,n["a"].commit("displayInstallApp",!0),o.userChoice.then(({outcome:e})=>{"accepted"===e&&n["a"].commit("displayInstallApp",!1),Object(s["event"])("pwa","installation",e)})}),window.addEventListener("appinstalled",e=>{Object(s["event"])("pwa","installation","installed")}),t["a"]=()=>{o.prompt()}},cd49:function(e,t,a){"use strict";a.r(t);a("5319"),a("e6cf"),a("a79d");var n=a("2b0e"),s=(a("eb2f"),a("58ca"));n["default"].use(s["a"]);var o=a("a65d"),i=a.n(o),r=a("0613");n["default"].use(i.a),n["default"].toasted.register("error",e=>(console.error(e),e.message?"Oops.. "+e.message:"Oops.. Something went wrong.."),{type:"error",position:"bottom-center",duration:1500,singleton:!0}),n["default"].toasted.register("warn",e=>(console.warn(e),"Oops.. "+e),{type:"error",position:"bottom-center",duration:1500,singleton:!0}),n["default"].toasted.register("apiError",e=>(401===e.code?r["a"].dispatch("logout"):console.error(e),e.message?"Oops.. "+e.message:"Oops.. Something went wrong with the API.."),{type:"error",position:"bottom-center",duration:1e3,singleton:!0});var l=a("0284"),c=a.n(l),u=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("navbar"),a("shortcuts"),e.isAuthenticated?a("transition-group",{attrs:{id:"columns",name:"list",tag:"div"}},[e._l(e.columns,(function(e,t){return a("column",{key:"column-"+e.id,attrs:{"column-id":t}})})),a("add-column",{key:"add-column"})],2):e._e(),a("side-bar"),a("router-view")],1)},m=[],h=a("5530"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"column"},[a("search-params",{attrs:{"column-id":e.columnId},on:{reset:e.reset,close:e.close,move:function(t){return e.move(t)}}}),a("recyclist",{ref:"recyclist",staticClass:"documents",attrs:{list:e.documents,size:10,offset:200,"is-loading":e.$wait.is("column.refreshing."+e.column.id),"no-more":e.noMore},on:{"load-top":e.loadAfter,"load-bottom":e.loadBefore},scopedSlots:e._u([{key:"tombstone",fn:function(){return[a("content-placeholders",{staticClass:"tombstone",attrs:{animated:!0,rounded:!0,centered:!1}},[a("content-placeholders-heading",{attrs:{img:!1}}),a("content-placeholders-img"),a("content-placeholders-text",{attrs:{lines:2}})],1)]},proxy:!0},{key:"item",fn:function(t){var n=t.data;return[n.includes("documents-gap")?a("div",{staticClass:"documents-gap"},[a("p",[e._v(" "+e._s(e.$tc("column.documents-gap",parseInt(n.split("|")[2]),{count:parseInt(n.split("|")[2])}))+" "),a("router-link",{attrs:{to:"/"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(" "+e._s(e.$t("column.refresh"))+" ")])],1)]):a("card",{attrs:{"doc-id":n,"index-col":e.columnId}})]}},{key:"nomore",fn:function(){return[a("span",[e._v(e._s(e.$t("column.no-result")))])]},proxy:!0}])})],1)},g=[],f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",[e.paramsOpen?a("div",{staticClass:"actions"},[a("button",{staticClass:"btn btn-icon",attrs:{name:"move-left","aria-label":"Move column to left"},on:{click:function(t){return e.$emit("move","left")}}},[a("i",{staticClass:"UI-icon UI-navigate-left"})]),a("button",{staticClass:"btn btn-icon margin-right-auto",attrs:{name:"move-right","aria-label":"Move column to right"},on:{click:function(t){return e.$emit("move","right")}}},[a("i",{staticClass:"UI-icon UI-navigate-right"})]),a("button",{staticClass:"btn btn-icon",attrs:{name:"close-params","aria-label":"Close column params"},on:{click:function(t){e.paramsOpen=!1}}},[a("i",{staticClass:"UI-icon UI-collapse"})])]):e._e(),a("div",{staticClass:"form-group inpt-icon"},[a("search-input",{attrs:{type:!0===e.paramsOpen?"search":"text","initial-query":e.params.query},on:{submit:e.onQueryChange}}),!1===e.paramsOpen?a("button",{staticClass:"btn btn-icon",attrs:{name:"expand","aria-label":"Open column params"},on:{click:function(t){e.paramsOpen=!0}}},[a("i",{staticClass:"UI-icon UI-expand icon-small"})]):e._e()],1),a("transition-group",{staticClass:"form",attrs:{name:"curtain",tabindex:"-1",tag:"div"}},[e.paramsOpen?a("select",{directives:[{name:"show",rawName:"v-show",value:e.languages.length>1,expression:"languages.length > 1"},{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],key:"lang",staticClass:"slct slct-large",attrs:{name:"lang","aria-label":"Select a language"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.lang=t.target.multiple?a:a[0]}}},e._l(e.languages,(function(t){var n=t.label,s=t.value,o=t.disabled;return a("option",{key:s.join("|"),attrs:{disabled:o},domProps:{value:s}},[e._v(" "+e._s(n)+" ")])})),0):e._e(),e.paramsOpen?a("select",{directives:[{name:"show",rawName:"v-show",value:e.topics.length>1,expression:"topics.length > 1"},{name:"model",rawName:"v-model",value:e.topic,expression:"topic"}],key:"topic",staticClass:"slct slct-large",attrs:{name:"topic","aria-label":"Select a topic"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.topic=t.target.multiple?a:a[0]}}},e._l(e.topics.filter((function(e){return!e.disabled})),(function(t){var n=t.label,s=t.value;return a("option",{key:s.join("|"),domProps:{value:s}},[e._v(" "+e._s(n)+" ")])})),0):e._e(),e.paramsOpen?a("button",{key:"close",staticClass:"btn btn-large danger",attrs:{name:"close","aria-label":"Delete the column"},on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("column.delete"))+" ")]):e._e()])],1)},b=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("input",{ref:"search",staticClass:"search inpt inpt-large",attrs:{placeholder:e.$t("column.search"),"aria-label":e.$t("column.search"),type:e.type,autocomplete:"off",name:"query"},domProps:{value:e.initialQuery},on:{change:e.onQueryChange,focus:e.onQueryFocus}})},y=[],w=a("049b"),C={name:"SearchInput",components:{},props:{type:{type:String,required:!1,default:"search"},initialQuery:{type:String,required:!1,default:""}},data(){return{input:""}},computed:{},methods:{onQueryChange(e){const t=e.target.value;this.$emit("submit",t)},onQueryFocus(e){e.target.setSelectionRange(e.target.value.length,e.target.value.length)}}},I=C,k=(a("3c4b"),a("2877")),O=Object(k["a"])(I,v,y,!1,null,null,null),S=O.exports,$=a("2f62"),A={name:"SearchParams",components:{SearchInput:S},props:{columnId:{type:Number,required:!0}},data(){return{paramsOpen:!1}},computed:Object(h["a"])(Object(h["a"])({},Object($["d"])(["getColumnByIndex","isAuthenticated"])),{},{column(){return this.getColumnByIndex(this.columnId)},params(){return this.column.params},languages(){return[{label:this.$t("languages.all"),value:[],disabled:!1},{label:this.$t("languages.en"),value:["en"],disabled:!1},{label:this.$t("languages.fr"),value:["fr"],disabled:!1},{label:this.$t("languages.de"),value:["de"],disabled:!1},{label:this.$t("languages.es"),value:["es"],disabled:!1},{label:this.$t("languages.pt"),value:["pt"],disabled:!1},{label:this.$t("languages.ar"),value:["ar"],disabled:!1},{label:this.$t("languages.zh-tw"),value:["zh-tw"],disabled:!1},{label:this.$t("languages.zh-cn"),value:["zh-cn"],disabled:!1}]},lang:{get(){return this.params.langs},set(e){this.updateParams({langs:e,topics:[]})}},topics(){return"fr"===this.lang[0]?[{label:this.$t("topics.all","fr"),value:[]},{label:this.$t("topics.a-la-une","fr"),value:["La une"]},{label:this.$t("topics.derniere-minute","fr"),value:["Dernière Minute"]},{label:this.$t("topics.documentation","fr"),value:["Documentation"]},{label:this.$t("topics.monde","fr"),value:["Monde"]},{label:this.$t("topics.afrique","fr"),value:["Afrique"]},{label:this.$t("topics.politique","fr"),value:["Politique"]},{label:this.$t("topics.elections","fr"),value:["Elections"]},{label:this.$t("topics.faits-divers","fr"),value:["Faits-divers"]},{label:this.$t("topics.environnement","fr"),value:["Environnement/Météo","Environnement"]},{label:this.$t("topics.sport","fr"),value:["Sport"]},{label:this.$t("topics.football","fr"),value:["Football"]},{label:this.$t("topics.people","fr"),value:["People"]},{label:this.$t("topics.tech","fr"),value:["High Tech"]},{label:this.$t("topics.sciences","fr"),value:["Sciences"]},{label:this.$t("topics.insolite","fr"),value:["Insolite"]},{label:this.$t("topics.medias","fr"),value:["Médias"]},{label:this.$t("topics.sante","fr"),value:["Médecine/Santé"]},{label:this.$t("topics.mode-de-vie","fr"),value:["Société/Modes de vie"]},{label:this.$t("topics.art-de-vivre","fr"),value:["Culture/Art de vivre"]},{label:this.$t("topics.galerie-photos","fr"),value:["Galerie Photos"]},{label:this.$t("topics.galerie-photos-insolites","fr"),value:["Galerie Photos Insolites"]},{label:this.$t("topics.videographies","fr"),value:["Vidéographies"]},{label:this.$t("topics.videos-monde","fr"),value:["Vidéos Monde"]}]:"en"===this.lang[0]?[{label:this.$t("topics.all","en"),value:[]},{label:this.$t("topics.a-la-une","en"),value:["Top Stories"]},{label:this.$t("topics.derniere-minute","en"),value:["Breaking News"]},{label:this.$t("topics.documentation","en"),value:["Doc"]},{label:this.$t("topics.monde","en"),value:["International News"]},{label:this.$t("topics.us-news","en"),value:["US News"]},{label:this.$t("topics.us-politics"),value:["US Politics"]},{label:this.$t("topics.us-sports"),value:["US Sports"]},{label:this.$t("topics.uk-news"),value:["UK News"]},{label:this.$t("topics.middle-east","en"),value:["Middle East"]},{label:this.$t("topics.south-asia-news","en"),value:["South Asia News"]},{label:this.$t("topics.asia-business","en"),value:["Asia Business"]},{label:this.$t("topics.business-tech","en"),value:["Business and Tech"]},{label:this.$t("topics.science-environment","en"),value:["Science-Environment"]},{label:this.$t("topics.offbeat","en"),value:["Offbeat"]},{label:this.$t("topics.health-lifestyle","en"),value:["Health and Lifestyle"]},{label:this.$t("topics.sport","en"),value:["Sports"]},{label:this.$t("topics.cricket","en"),value:["Cricket"]},{label:this.$t("topics.football","en"),value:["Football"]},{label:this.$t("topics.olympics","en"),value:["Olympics"]},{label:this.$t("topics.people","en"),value:["People and Entertainment"]},{label:this.$t("topics.lifestyle","en"),value:["Lifestyle"]},{label:this.$t("topics.photo-gallery","en"),value:["Photo Gallery"]},{label:this.$t("topics.videographics","en"),value:["Videographics"]},{label:this.$t("topics.video-gallery","en"),value:["Video Gallery Complete"]}]:[{label:this.$t("topics.all"),value:[]}]},topic:{get(){return this.params.topics},set(e){this.updateParams({topics:e})}},query(){return this.params.query},dateTo:{get(){return this.params.dateTo},set(e){this.updateParams({dateTo:e})}}}),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object($["e"])(["updateColumnParams","openColumnSettings","closeColumnSettings"])),Object($["c"])(["refreshColumn"])),{},{updateParams(e){const t=Object(h["a"])(Object(h["a"])({},this.params),e);this.updateColumnParams({indexCol:this.columnId,params:t}),this.$emit("reset")},onQueryChange(e){this.$ga.event("search","set query",e),this.updateParams({query:e})}})},P=A,j=(a("0acc"),Object(k["a"])(P,f,b,!1,null,"6ef1547f",null)),_=j.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vue-recyclist"},[a("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:e.height+"px"}},[e._l(e.visibleItems,(function(t,n){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.height>0,expression:"height > 0"}],key:n,staticClass:"vue-recyclist-item",style:{transform:"translate3d(0,"+t.top+"px,0)"}},[t.data?e._t("item",null,{data:t.data}):e._t("tombstone")],2)})),a("div",{staticClass:"vue-recyclist-pool"},[e._l(e.poolItems,(function(t,n){return a("div",{key:n,ref:t.data,refInFor:!0,staticClass:"vue-recyclist-item"},[e._t("item",null,{data:t.data})],2)})),0===e.tombHeight?a("div",{ref:"tomb",staticClass:"vue-recyclist-item"},[e._t("tombstone")],2):e._e()],2)],2),!e.isLoading&&e.noMore?a("div",{staticClass:"vue-recyclist-nomore"},[e._t("nomore",[a("div",[e._v("End of list")])])],2):e._e()])},T=[],x=(a("fb6a"),a("ddb0"),a("0342")),E=a.n(x);const F=[new E.a("Poppins",{weight:400,style:"normal",stretch:"normal"}),new E.a("Poppins",{weight:600,style:"normal",stretch:"normal"})];var L=()=>Promise.all(F.map(e=>e.load())),N={name:"Recyclist",props:{list:{type:Array,required:!0},size:{type:Number,default:20},offset:{type:Number,default:200},isLoading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1}},data(){return{items:[],height:0,start:0,containerHeight:0,tombHeight:0}},computed:{visibleItems(){return this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},poolItems(){return this.items.filter(e=>e.data&&!1===e.gotHeight)}},watch:{start(e,t){0===e&&t>e&&this.$emit("loadTop")},list(){this.loadList()},noMore(e){!0===e&&(this.items=this.items.filter(e=>e.data),this.updateItemTop())}},mounted(){this.$el.addEventListener("scroll",this.onScroll,{capture:!0,passive:!0}),this.tombHeight=this.$refs.tomb&&this.$refs.tomb.offsetHeight,this.containerHeight=this.$el&&this.$el.offsetHeight,this.list.length>0?(this.loadList(),this.list.length<this.size&&this.loadMoreItems()):this.loadMoreItems()},destroyed(){this.$el.removeEventListener("scroll",this.onScroll)},methods:{async reset(){this.items=[],this.height=this.start=this.$el.scrollTop=0,await this.$nextTick(),this.loadMoreItems()},async loadList(){this.items=this.list.map(this.renderItem),await L(),await this.$nextTick();for(let e=0;e<this.items.length;e++)this.updateItemHeight(e);this.updateItemTop()},async loadMoreItems(){if(this.noMore)return!1;const e=this.items.length+this.size;for(let t=this.items.length;t<e;t++)this.setItem(t,null);this.updateItemTop(),this.$emit("load-bottom")},setItem(e,t){this.$set(this.items,e,this.renderItem(t))},renderItem(e){return{data:e,top:0,height:this.tombHeight,gotHeight:!1}},updateItemTop(){this.height=0;for(let e=0;e<this.items.length;e++){const t=this.items[e-1];this.$set(this.items[e],"top",t?t.top+t.height:0),this.height+=this.items[e].height}this.updateIndex()},updateIndex(){const e=this.$el.scrollTop;for(let t=0;t<this.items.length;t++)if(this.items[t].top>e){this.start=Math.max(0,t-1);break}},updateItemHeight(e){const t=this.items[e];if(!t.data)return;const[a]=this.$refs[t.data];a&&(this.$set(this.items[e],"height",a.offsetHeight),this.$set(this.items[e],"gotHeight",a.offsetHeight>0))},onScroll(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.loadMoreItems(),this.updateIndex()}}},B=N,V=(a("a90f"),Object(k["a"])(B,D,T,!1,null,"47f9749e",null)),M=V.exports,q=a("967d"),z=a("ae8d"),U={name:"Column",components:{Card:z["a"],Recyclist:M,ContentPlaceholders:q["ContentPlaceholders"],ContentPlaceholdersHeading:q["ContentPlaceholdersHeading"],ContentPlaceholdersImg:q["ContentPlaceholdersImg"],ContentPlaceholdersText:q["ContentPlaceholdersText"],SearchParams:_},props:{columnId:{type:Number,required:!0}},data(){return{noMore:!1}},computed:Object(h["a"])(Object(h["a"])({},Object($["d"])(["getColumnByIndex","getDocumentsIdsByColumnId","isAuthenticated"])),{},{column(){return this.getColumnByIndex(this.columnId)},documents(){return this.getDocumentsIdsByColumnId(this.columnId)},params(){return this.column.params}}),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object($["e"])(["resetColumn","moveColumn","closeColumn"])),Object($["c"])(["refreshColumn"])),{},{reset(){this.noMore=!1,this.resetColumn({indexCol:this.columnId}),this.$refs.recyclist.reset()},async loadBefore(){try{const e=await this.refreshColumn({indexCol:this.columnId,mode:"before"});!1===e&&(this.noMore=!0)}catch(e){this.$toasted.global.apiError(e)}},loadAfter(){try{return this.refreshColumn({indexCol:this.columnId,mode:"after"})}catch(e){this.$toasted.global.apiError(e)}},move(e){this.moveColumn({indexCol:this.columnId,dir:e})},close(){this.closeColumn({indexCol:this.columnId})}})},H=U,R=(a("a798"),a("6d95"),Object(k["a"])(H,p,g,!1,null,"26739aaf",null)),G=R.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar is-primary is-fixed-top",attrs:{role:"navigation","aria-label":"main navigation"}},[e._m(0),a("div",{staticClass:"navbar-menu"},[a("div",{staticClass:"navbar-end"},[a("router-link",{key:"about",staticClass:"navbar-item",attrs:{to:{name:"about"},name:"about","aria-label":"about"}},[e._v(" "+e._s(e.$t("about.name"))+" ")]),e.isAuthenticated?a("a",{staticClass:"navbar-item",attrs:{"aria-label":"Log out"},on:{click:function(t){return t.preventDefault(),e.logoutHandler(t)}}},[e._v(" "+e._s(e.$t("auth.logout"))+" ")]):e._e(),e.isAuthenticated?e._e():a("router-link",{key:"authenticate",staticClass:"navbar-item",attrs:{to:{name:"login"},name:"authenticate","aria-label":"Authenticate"}},[e._v(" "+e._s(e.$t("auth.login"))+" ")]),a("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[a("a",{staticClass:"navbar-link"},[e._v(" "+e._s(e._f("capitalize")(e.currentUILanguage))+" ")]),a("div",{staticClass:"navbar-dropdown is-right"},[a("a",{staticClass:"navbar-item",on:{click:function(t){return e.changeLanguage("fr")}}},[e._v(" FR ")]),a("a",{staticClass:"navbar-item",on:{click:function(t){return e.changeLanguage("en")}}},[e._v(" EN ")])])])],1)])])},Y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar-brand"},[n("a",{staticClass:"navbar-item",attrs:{href:"#"}},[n("img",{attrs:{src:a("5365")}})]),n("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}}),n("span",{attrs:{"aria-hidden":"true"}})])])}],J={name:"Navbar",methods:Object(h["a"])(Object(h["a"])({},Object($["c"])(["changeLocale","logout"])),{},{changeLanguage(e){this.changeLocale(e)},logoutHandler(){this.$toasted.show(this.$t("auth.not-authenticated.toast").toString(),{position:"bottom-center",duration:1500,type:"info"}),this.logout()}}),computed:Object(h["a"])({currentUILanguage(){return this.$store.state.locale}},Object($["d"])(["isAuthenticated"])),filters:{capitalize(e){return e?(e=e.toString(),e.toUpperCase()):""}}},W=J,K=(a("a8eb"),Object(k["a"])(W,Q,Y,!1,null,"50af5c8a",null)),X=K.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shortcuts"},[a("div",{staticClass:"shortcuts-start"},[a("p",[e._v("Changer la langue de tous les contenus :")]),a("select",{on:{change:function(t){return e.changeAllContentLanguage(t)}}},[a("option",{attrs:{disabled:"",selected:""}},[e._v("Choix de la langue")]),e._l(e.languages,(function(t){var n=t.label,s=t.value,o=t.disabled;return a("option",{key:s.join("|"),attrs:{disabled:o},domProps:{value:s}},[e._v(" "+e._s(n)+" ")])}))],2)]),a("div",{staticClass:"shortcuts-end"},[a("a",{staticClass:"reset",on:{click:function(t){return e.resetAllColumns()}}},[e._v("Réinitialiser tous les contenus")])])])},ee=[],te=a("5593"),ae=a("ec26"),ne={name:"Shortcuts",computed:{languages(){return[{label:this.$t("languages.en"),value:["en"],disabled:!1},{label:this.$t("languages.fr"),value:["fr"],disabled:!1},{label:this.$t("languages.de"),value:["de"],disabled:!1},{label:this.$t("languages.es"),value:["es"],disabled:!1},{label:this.$t("languages.pt"),value:["pt"],disabled:!1},{label:this.$t("languages.ar"),value:["ar"],disabled:!1},{label:this.$t("languages.zh-tw"),value:["zh-tw"],disabled:!1},{label:this.$t("languages.zh-cn"),value:["zh-cn"],disabled:!1}]}},methods:Object(h["a"])(Object(h["a"])({},Object($["e"])(["resetAllColumns","addColumn"])),{},{changeAllContentLanguage(e){this.resetAllColumns();const t=e.target.value,a=te[t];for(const n of a){const e={id:Object(ae["a"])(),params:Object.assign({},w["a"].defaultSearchParams,{products:["multimedia"],topics:n.value,langs:[t],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]};this.addColumn(e)}}})},se=ne,oe=(a("8d01"),Object(k["a"])(se,Z,ee,!1,null,"2e410880",null)),ie=oe.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn-container"},[a("button",{staticClass:"btn",attrs:{id:"new-column",name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[a("i",{staticClass:"UI-icon UI-plus"}),e._v(" "+e._s(e.$t("deck.add-column"))+" ")])])},le=[],ce={name:"AddColumn",methods:Object(h["a"])(Object(h["a"])({},Object($["e"])(["addColumn"])),{},{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},ue=ce,de=(a("da65"),Object(k["a"])(ue,re,le,!1,null,"1ca59738",null)),me=de.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition-group",{attrs:{id:"sidebar",name:"appear",tag:"nav",appear:""}},[a("button",{key:"new-column",staticClass:"btn btn-circle btn-icon",attrs:{name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[a("i",{staticClass:"UI-icon UI-plus"})])])},pe=[],ge={name:"SideBar",methods:Object(h["a"])(Object(h["a"])({},Object($["e"])(["addColumn"])),{},{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},fe=ge,be=(a("ada6"),Object(k["a"])(fe,he,pe,!1,null,"a70769d0",null)),ve=be.exports,ye={name:"AutoRefreshVisibility",mounted(){this.visibilityChanged(),document.addEventListener("visibilitychange",this.visibilityChanged,!1)},beforeDestroy(){document.removeEventListener("visibilitychange",this.visibilityChanged,!1)},methods:Object(h["a"])(Object(h["a"])({},Object($["c"])(["refreshAllColumns"])),{},{visibilityChanged(){!0!==document.hidden&&(this.$root.$now=new Date,!1!==navigator.onLine&&this.refreshAllColumns())}})},we={name:"AutoRefreshTimer",data(){return{autoRefreshTimer:null,autoRefreshDelay:1e4}},mounted(){this.startAutoRefresh()},beforeDestroy(){this.stopAutoRefresh()},methods:{startAutoRefresh(){this.autoRefreshTimer=window.setInterval(async()=>{!0!==document.hidden&&(this.$root.$now=new Date,!1!==navigator.onLine&&await this.refreshAllColumns())},this.autoRefreshDelay)},stopAutoRefresh(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer)}}},Ce=n["default"].extend({name:"Deck",metaInfo:{titleTemplate:e=>e?e+" | AFP Deck":"AFP Deck"},components:{Column:G,AddColumn:me,SideBar:ve,Navbar:X,Shortcuts:ie},mixins:[ye,we],computed:Object(h["a"])(Object(h["a"])({},Object($["f"])(["authType","columns"])),Object($["d"])(["isAuthenticated"])),watch:{authType(e,t){"credentials"!==e&&"credentials"===t&&this.$router.push({name:"login",query:{redirect:this.$route.path}})}}}),Ie=Ce,ke=(a("2d16"),Object(k["a"])(Ie,d,m,!1,null,"9fcb446c",null)),Oe=ke.exports;function Se(e){return e.includes(" ")?`"${e}"`:e}n["default"].use(u["a"]);const $e=[{name:"deck",path:"/",component:Oe,meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}},children:[{path:"doc",redirect:"/"},{name:"document",path:"doc/:docId",component:()=>a.e("viewer").then(a.bind(null,"f9ca")),props:!0,meta:{analytics:{pageviewTemplate(e){const t=r["a"].getters.getDocumentById(e.params.docId);if(t)return{title:t.headline,page:e.path,location:window.location.href,dimension1:t.product,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}},{name:"slug",path:"slug/:slugs",beforeEnter:(e,t,a)=>{r["a"].commit("addColumn",{params:{query:e.params.slugs.split(",").map(e=>"slug:"+Se(e)).join(" AND ")}}),a({name:"deck"})}},{name:"place",path:"place/:country/:city?",beforeEnter:(e,t,a)=>{r["a"].commit("addColumn",{params:{query:e.params.city?`country:${Se(e.params.country)} AND city:${Se(e.params.city)}`:"country:"+Se(e.params.country)}}),a({name:"deck"})}},{name:"genre",path:"genre/:genre",beforeEnter:(e,t,a)=>{r["a"].commit("addColumn",{params:{query:"genre:"+Se(e.params.genre)}}),a({name:"deck"})}},{name:"event",path:"event/:event",beforeEnter:(e,t,a)=>{r["a"].commit("addColumn",{params:{query:`event:"afpevent:${e.params.event}"`}}),a({name:"deck"})}},{name:"creator",path:"creator/:creator",beforeEnter:(e,t,a)=>{r["a"].commit("addColumn",{params:{query:"creator:"+Se(e.params.creator)}}),a({name:"deck"})}},{name:"login",path:"login",component:()=>a.e("login").then(a.bind(null,"a55b")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - Login",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}},{name:"about",path:"about",component:()=>a.e("about").then(a.bind(null,"f820")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - About",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}}]}];var Ae=new u["a"]({routes:$e});n["default"].use(c.a,{id:"UA-127064867-1",disabled:!0,router:Ae,autoTracking:{pageviewOnLoad:!0,exception:!0},debug:{enabled:!1,sendHitTask:!0},anonymizeIp:!0,forceSSL:!0});var Pe=a("fe0b"),je=a("6591"),_e=a("c8b5"),De=a.n(_e);delete De.a.defaults.cssProps.userSelect,De.a.defaults.touchAction="pan-y",n["default"].use(je["VueHammer"]);a("b814"),a("70cb");var Te=a("f2d6"),xe=a.n(Te);n["default"].use(xe.a);var Ee=new xe.a({useVuex:!0}),Fe=a("9483");if(Object(Fe["a"])("sw.min.js",{ready(){console.log("Service worker is active.")},registered(e){console.log("Service worker has been registered.")},cached(e){console.log("version has been cached for offline use.")},updatefound(e){console.log("New version is downloading.")},updated(e){console.log("New version is available; Ask for refresh."),n["default"].toasted.show("New version available !",{action:[{text:"Update",onClick:()=>{e.waiting.postMessage({command:"skipWaiting"})}}],position:"bottom-right"})},offline(){n["default"].toasted.show("No internet connection found. App is running in offline mode.",{position:"bottom-center",duration:1500})},error(e){n["default"].toasted.global.error(e)}}),"serviceWorker"in navigator){let e;navigator.serviceWorker.addEventListener("controllerchange",async()=>{e||(r["a"].commit("clearDocuments"),Object(l["event"])("service-worker","controllerchange"),window.location.reload(),e=!0)})}function Le(){return"serviceWorker"in navigator?navigator.serviceWorker.controller?"controlled":"supported":"unsupported"}Object(l["event"])("service-worker","support",Le());var Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"night-mode":!e.useLightTheme},attrs:{id:"app"}},[a("router-view")],1)},Be=[];const Ve=navigator.connection||navigator.mozConnection||navigator.webkitConnection;var Me={name:"CheckConnection",computed:Object(h["a"])({},Object($["f"])(["isOnline"])),watch:{isOnline(e,t){!1===e?(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOff"),{duration:null,type:"info",position:"bottom-center"})):!1===t&&(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOn"),{duration:2e3,type:"info",position:"bottom-center"}))}},mounted(){if(!Ve)return!1;this.checkConnection(),Ve.addEventListener("change",this.checkConnection)},methods:Object(h["a"])(Object(h["a"])({},Object($["e"])(["setConnectivityStatus"])),{},{checkConnection(){const e=!0===navigator.onLine;this.setConnectivityStatus(e)}})},qe=a("e2b7"),ze={name:"NightMode",data(){return{useLightTheme:!0}},mounted(){this.checkDayNight(),document.addEventListener("visibilitychange",this.checkDayNight,!1)},beforeDestroy(){document.removeEventListener("visibilitychange",this.checkDayNight,!1)},methods:{checkDayNight(){try{const e=Object(qe["a"])();if(e.error)throw new Error(e.error);this.useLightTheme=e.light}catch(e){console.error(e);const t=(new Date).getHours();this.useLightTheme=t>6&&t<20}}}},Ue={name:"App",mixins:[Me,ze]},He=Ue,Re=(a("13a5"),a("4820"),Object(k["a"])(He,Ne,Be,!1,null,"7e3b9ef6",null)),Ge=Re.exports;function Qe(){new n["default"]({router:Ae,store:r["a"],i18n:Pe["a"],wait:Ee,render:e=>e(Ge)}).$mount("#app"),"deck"!==Ae.currentRoute.name||r["a"].getters.isAuthenticated||Ae.replace({name:"login"}),r["a"].getters.isAuthenticated&&n["default"].$ga.enable()}n["default"].config.productionTip=!1,n["default"].config.errorHandler=e=>{n["default"].toasted.global.error(e)},n["default"].config.warnHandler=e=>{n["default"].toasted.global.warn(e)},Ae.beforeEach(async(e,t,a)=>{if("document"===e.name&&!r["a"].getters.getDocumentById(e.params.docId))try{await r["a"].dispatch("getDocument",e.params.docId)}catch(n){return"credentials"!==r["a"].state.authType?a({name:"login",query:{redirect:"doc/"+e.params.docId}}):a({name:"deck"})}a()}),r["a"].dispatch("changeLocale",Pe["a"].locale),Object(r["b"])().then(Qe)},da65:function(e,t,a){"use strict";a("52b8")},edd4:function(e){e.exports=JSON.parse('{"back-to-home":"Back to home","submit":"Submit","loading":"Loading...","install-app":"Add to home screen","deck":{"add-column":"Add a new column"},"column":{"search":"Search...","product":"Select content","lang":"Document language","urgency":"Category of news story","until":"Until","no-result":"No result","delete":"Delete the column","refresh":"Refresh ?","documents-gap":"Since your last visit, you missed 1 document. | Since your last visit, you missed {count} documents."},"about":{"name":"About","title":"About AFP Deck","description":["AFP News Deck is a reader for AFP feeds. It allows you to find and read stories, multimedia articles and photos directly in your browser.","Made with love by the AFP Dataviz team, based on an original idea from the Medialab. Data is provided by the AFP Content API."],"version":"Version"},"auth":{"success":{"title":"You\'re logged in correctly.","description":"Enjoy AFP Deck !"},"login":"Login","logout":"Logout","clientId":"Client ID","clientSecret":"Client Secret","username":"Username","password":"Password","not-authenticated":{"title":"Log in to see the latest news","toast":"Good bye :)"},"cookies":"By continuing your navigation on this site, you consent to the use of anonymous cookies for statistical purposes.","warning-email":"Please use your username instead of your email address"},"products":{"all":"in all products","news":"in the news","multimedia":"in multimedia articles","photo":"in photos","infographie":"in graphics","videographie":"in videographics","video":"in videos"},"languages":{"all":"in all languages","en":"in english","fr":"in french","de":"in german","es":"in spanish","pt":"in portuguese","ar":"in arabic","zh-tw":"in traditionnal Chinese","zh-cn":"in simplified Chinese"},"urgencies":{"all":"All news stories","all-photos":"All photos","flash":"Only flashes","alertes":"include alerts","urgents":"include urgents","depeches":"All news stories","topshots":"Only topshots"},"topics":{"all":"All topics","a-la-une":"Top Stories","derniere-minute":"Breaking news","monde":"International news","us-news":"US News","us-politics":"US Politics","middle-east":"Middle East","asia-business":"Asia Business","business-tech":"Business and Tech","science-environment":"Science and Environment","health-lifestyle":"Health and Lifestyle","sport":"Sports","football":"Football","people":"People and Entertainment","documentation":"File","us-sports":"US Sports","uk-news":"UK News","south-asia-news":"South Asia News","offbeat":"Offbeat","cricket":"Cricket","olympics":"Olympics","lifestyle":"Lifestyle","photo-gallery":"Photo Gallery","videographics":"Videographics","video-gallery":"Video Gallery"},"connectivity":{"messageOff":"Your device is offline","messageOn":"You device is online again"},"dateTimeFormats":{"short":{"year":"numeric","month":"short","day":"numeric"},"long":{"year":"numeric","month":"short","day":"numeric","weekday":"short","hour":"numeric","minute":"numeric"}},"document":{"share":"Share","copied":"Copied in clipboard","read-more":"Full article:"}}')},f693:function(e){e.exports=JSON.parse('{"back-to-home":"Retour à l\'accueil","submit":"Valider","loading":"Chargement...","install-app":"Installer sur l\'écran d\'accueil","deck":{"add-column":"Ajouter une colonne"},"column":{"search":"Rechercher...","product":"Sélectionnez un produit","lang":"Sélectionnez une langue","urgency":"Sélectionnez une urgence","until":"Jusqu\'au","no-result":"Pas de résultats","delete":"Supprimer la colonne","refresh":"Rafraîchir ?","documents-gap":"Depuis votre dernière visite, vous avez manqué 1 document. | Depuis votre dernière visite, vous avez manqué {count} documents."},"about":{"name":"A propos","title":"À propos d\'AFP Deck","description":["AFP News Deck permet de lire les dépêches, photos et vidéos diffusées par l\'AFP, directement dans votre navigateur.","Conçu par l\'équipe Dataviz de l\'AFP, sur une idée originale du Médialab. Les données proviennent de l\'API AFP."],"version":"Version"},"auth":{"success":{"title":"Vous êtes authentifié","description":"Profitez d\'AFP Deck !"},"login":"Se connecter","logout":"Se déconnecter","clientId":"ID Client","clientSecret":"Secret Client","username":"Nom d\'utilisateur","password":"Mot de passe","not-authenticated":{"title":"Connectez-vous pour bénéficier des dernières nouvelles","toast":"À bientôt :)"},"cookies":"En poursuivant la navigation sur ce site, vous consentez à l\'utilisation de cookies anonymes à des fins statistiques.","warning-email":"SVP, utilisez votre nom d\'utilisateur et non votre adresse email"},"products":{"all":"dans tous les produits","news":"dans les dépêches","multimedia":"dans le fil multimédia","photo":"dans les photos","infographie":"dans les infographies","videographie":"dans les vidéographies","video":"dans les vidéos"},"languages":{"all":"dans toutes les langues","en":"en anglais","fr":"en français","de":"en allemand","es":"en espagnol","pt":"en portugais","ar":"en arabe","zh-tw":"en chinois traditionnel","zh-cn":"en chinois simplifié"},"urgencies":{"all":"Tout le contenu","all-photos":"Toutes les photos","flash":"Uniquement les flashs","alertes":"inclure les alertes","urgents":"inclure les urgents","depeches":"Tout le contenu","topshots":"Uniquement les topshots"},"topics":{"all":"Tous les sujets","a-la-une":"A la une","derniere-minute":"Dernière minute","monde":"Monde","afrique":"Afrique","politique":"Politique","faits-divers":"Faits divers","economie":"Economie","environnement":"Environnement","sport":"Sport","football":"Football","people":"People","insolite":"Insolite","medias":"Médias","sante":"Santé","mode-de-vie":"Modes de vie","art-de-vivre":"Art de vivre","documentation":"Documentation","galerie-photos":"Galerie photo","galerie-photos-insolites":"Photos insolites","videographies":"Vidéographies","videos-monde":"Vidéos monde","elections":"Elections","sciences":"Sciences","tech":"Technologies"},"connectivity":{"messageOff":"Votre appareil est hors connexion","messageOn":"Votre appareil est de nouveau connecté"},"dateTimeFormats":{"short":{"year":"numeric","month":"short","day":"numeric"},"long":{"year":"numeric","month":"short","day":"numeric","weekday":"short","hour":"numeric","minute":"numeric"}},"document":{"share":"Partager","copied":"Copié dans le presse-papier","read-more":"Article complet :"}}')},fca5:function(e,t,a){var n={"./en":"edd4","./en.json":"edd4","./fr":"f693","./fr.json":"f693"};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=o,e.exports=s,s.id="fca5"},fe0b:function(e,t,a){"use strict";a.d(t,"b",(function(){return h}));var n=a("15fd"),s=a("2b0e"),o=a("a925");s["default"].use(o["a"]);const i=["en","fr"],r=i[0],l={[r]:a("fca5")("./"+r)},c={[r]:l[r].dateTimeFormats};function u(){const e=navigator.language&&navigator.language.substring(0,2);return!(!e||!i.includes(e))&&e}const d=new o["a"]({locale:u()||r,fallbackLocale:r,messages:l,dateTimeFormats:c});function m(e){d.locale=e;const t=document.querySelector("html");return t&&t.setAttribute("lang",e),e}async function h(e){if(d.locale!==e||!d.messages[e]){const t=await a("39c3")(`./${e}.json`),s=t.default,{dateTimeFormats:o}=s,i=Object(n["a"])(s,["dateTimeFormats"]);return d.setLocaleMessage(e,i),d.setDateTimeFormat(e,o),m(e)}return m(e)}t["a"]=d}});
//# sourceMappingURL=app.1bf5e84b.js.map